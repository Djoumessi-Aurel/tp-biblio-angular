"use strict";(self.webpackChunkbiblio=self.webpackChunkbiblio||[]).push([[179],{709:()=>{function he(n){return"function"==typeof n}function Ba(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const yu=Ba(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ns(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class gt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(he(i))try{i()}catch(o){e=o instanceof yu?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{T0(o)}catch(s){e=e??[],s instanceof yu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)T0(e);else{if(e instanceof gt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ns(t,e)}remove(e){const{_finalizers:t}=this;t&&ns(t,e),e instanceof gt&&e._removeParent(this)}}gt.EMPTY=(()=>{const n=new gt;return n.closed=!0,n})();const I0=gt.EMPTY;function S0(n){return n instanceof gt||n&&"closed"in n&&he(n.remove)&&he(n.add)&&he(n.unsubscribe)}function T0(n){he(n)?n():n.unsubscribe()}const eo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},vu={setTimeout(n,e,...t){const{delegate:i}=vu;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=vu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function A0(n){vu.setTimeout(()=>{const{onUnhandledError:e}=eo;if(!e)throw n;e(n)})}function $p(){}const WV=zp("C",void 0,void 0);function zp(n,e,t){return{kind:n,value:e,error:t}}let to=null;function bu(n){if(eo.useDeprecatedSynchronousErrorHandling){const e=!to;if(e&&(to={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=to;if(to=null,t)throw i}}else n()}class Gp extends gt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,S0(e)&&e.add(this)):this.destination=JV}static create(e,t,i){return new Ua(e,t,i)}next(e){this.isStopped?qp(function KV(n){return zp("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?qp(function qV(n){return zp("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qp(WV,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const QV=Function.prototype.bind;function Wp(n,e){return QV.call(n,e)}class XV{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Cu(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Cu(i)}else Cu(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cu(t)}}}class Ua extends Gp{constructor(e,t,i){let r;if(super(),he(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&eo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Wp(e.next,o),error:e.error&&Wp(e.error,o),complete:e.complete&&Wp(e.complete,o)}):r=e}this.destination=new XV(r)}}function Cu(n){eo.useDeprecatedSynchronousErrorHandling?function YV(n){eo.useDeprecatedSynchronousErrorHandling&&to&&(to.errorThrown=!0,to.error=n)}(n):A0(n)}function qp(n,e){const{onStoppedNotification:t}=eo;t&&vu.setTimeout(()=>t(n,e))}const JV={closed:!0,next:$p,error:function ZV(n){throw n},complete:$p},Kp="function"==typeof Symbol&&Symbol.observable||"@@observable";function _r(n){return n}function x0(n){return 0===n.length?_r:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Oe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const o=function nB(n){return n&&n instanceof Gp||function tB(n){return n&&he(n.next)&&he(n.error)&&he(n.complete)}(n)&&S0(n)}(t)?t:new Ua(t,i,r);return bu(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=M0(i))((r,o)=>{const s=new Ua({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Kp](){return this}pipe(...t){return x0(t)(this)}toPromise(t){return new(t=M0(t))((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function M0(n){var e;return null!==(e=n??eo.Promise)&&void 0!==e?e:Promise}const iB=Ba(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ee=(()=>{class n extends Oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new R0(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new iB}next(t){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){bu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:o}=this;return i||r?I0:(this.currentObservers=null,o.push(t),new gt(()=>{this.currentObservers=null,ns(o,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){const t=new Oe;return t.source=this,t}}return n.create=(e,t)=>new R0(e,t),n})();class R0 extends Ee{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:I0}}function k0(n){return he(n?.lift)}function qe(n){return e=>{if(k0(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(n,e,t,i,r){return new rB(n,e,t,i,r)}class rB extends Gp{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Q(n,e){return qe((t,i)=>{let r=0;t.subscribe(Ve(i,o=>{i.next(n.call(e,o,r++))}))})}function P0(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]])}return t}function no(n){return this instanceof no?(this.v=n,this):new no(n)}function aB(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(h){i[h]&&(r[h]=function(f){return new Promise(function(p,m){o.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof no?Promise.resolve(h.value.v).then(c,u):d(o[0][2],h)}(i[h](f))}catch(p){d(o[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function lB(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function F0(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}const Qp=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function L0(n){return he(n?.then)}function V0(n){return he(n[Kp])}function B0(n){return Symbol.asyncIterator&&he(n?.[Symbol.asyncIterator])}function U0(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const j0=function uB(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function H0(n){return he(n?.[j0])}function $0(n){return aB(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield no(t.read());if(r)return yield no(void 0);yield yield no(i)}}finally{t.releaseLock()}})}function z0(n){return he(n?.getReader)}function Jt(n){if(n instanceof Oe)return n;if(null!=n){if(V0(n))return function dB(n){return new Oe(e=>{const t=n[Kp]();if(he(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(Qp(n))return function hB(n){return new Oe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(L0(n))return function fB(n){return new Oe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,A0)})}(n);if(B0(n))return G0(n);if(H0(n))return function pB(n){return new Oe(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(z0(n))return function mB(n){return G0($0(n))}(n)}throw U0(n)}function G0(n){return new Oe(e=>{(function gB(n,e){var t,i,r,o;return function oB(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):function r(o){return o instanceof t?o:new t(function(s){s(o)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=lB(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Fi(n,e,t,i=0,r=!1){const o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function _t(n,e,t=1/0){return he(e)?_t((i,r)=>Q((o,s)=>e(i,o,r,s))(Jt(n(i,r))),t):("number"==typeof e&&(t=e),qe((i,r)=>function _B(n,e,t,i,r,o,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{o&&e.next(m),c++;let g=!1;Jt(t(m,u++)).subscribe(Ve(e,_=>{r?.(_),o?f(_):e.next(_)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){const _=l.shift();s?Fi(e,s,()=>p(_)):p(_)}h()}catch(_){e.error(_)}}))};return n.subscribe(Ve(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function is(n=1/0){return _t(_r,n)}const Li=new Oe(n=>n.complete());function W0(n){return n&&he(n.schedule)}function Xp(n){return n[n.length-1]}function q0(n){return he(Xp(n))?n.pop():void 0}function ja(n){return W0(Xp(n))?n.pop():void 0}function K0(n,e=0){return qe((t,i)=>{t.subscribe(Ve(i,r=>Fi(i,n,()=>i.next(r),e),()=>Fi(i,n,()=>i.complete(),e),r=>Fi(i,n,()=>i.error(r),e)))})}function Y0(n,e=0){return qe((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Q0(n,e){if(!n)throw new Error("Iterable cannot be null");return new Oe(t=>{Fi(t,e,()=>{const i=n[Symbol.asyncIterator]();Fi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function nt(n,e){return e?function IB(n,e){if(null!=n){if(V0(n))return function bB(n,e){return Jt(n).pipe(Y0(e),K0(e))}(n,e);if(Qp(n))return function wB(n,e){return new Oe(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(L0(n))return function CB(n,e){return Jt(n).pipe(Y0(e),K0(e))}(n,e);if(B0(n))return Q0(n,e);if(H0(n))return function EB(n,e){return new Oe(t=>{let i;return Fi(t,e,()=>{i=n[j0](),Fi(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){return void t.error(s)}o?t.complete():t.next(r)},0,!0)}),()=>he(i?.return)&&i.return()})}(n,e);if(z0(n))return function DB(n,e){return Q0($0(n),e)}(n,e)}throw U0(n)}(n,e):Jt(n)}function Zp(...n){const e=ja(n),t=function vB(n,e){return"number"==typeof Xp(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Jt(i[0]):is(t)(nt(i,e)):Li}function Jp(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Ua({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function De(n){for(let e in n)if(n[e]===De)return e;throw Error("Could not find renamed property on target object.")}function em(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ie(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ie).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function tm(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const TB=De({__forward_ref__:De});function Te(n){return n.__forward_ref__=Te,n.toString=function(){return Ie(this())},n}function U(n){return nm(n)?n():n}function nm(n){return"function"==typeof n&&n.hasOwnProperty(TB)&&n.__forward_ref__===Te}function im(n){return n&&!!n.\u0275providers}const X0="https://g.co/ng/security#xss";class w extends Error{constructor(e,t){super(function wu(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function G(n){return"string"==typeof n?n:null==n?"":String(n)}function Eu(n,e){throw new w(-201,!1)}function In(n,e){null==n&&function ye(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function x(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ae(n){return{providers:n.providers||[],imports:n.imports||[]}}function Du(n){return Z0(n,Iu)||Z0(n,eD)}function Z0(n,e){return n.hasOwnProperty(e)?n[e]:null}function J0(n){return n&&(n.hasOwnProperty(rm)||n.hasOwnProperty(FB))?n[rm]:null}const Iu=De({\u0275prov:De}),rm=De({\u0275inj:De}),eD=De({ngInjectableDef:De}),FB=De({ngInjectorDef:De});var j=(()=>((j=j||{})[j.Default=0]="Default",j[j.Host=1]="Host",j[j.Self=2]="Self",j[j.SkipSelf=4]="SkipSelf",j[j.Optional=8]="Optional",j))();let om;function Sn(n){const e=om;return om=n,e}function tD(n,e,t){const i=Du(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&j.Optional?null:void 0!==e?e:void Eu(Ie(n))}const xe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ha={},sm="__NG_DI_FLAG__",Su="ngTempTokenPath",BB=/\n/gm,nD="__source";let $a;function rs(n){const e=$a;return $a=n,e}function jB(n,e=j.Default){if(void 0===$a)throw new w(-203,!1);return null===$a?tD(n,void 0,e):$a.get(n,e&j.Optional?null:void 0,e)}function C(n,e=j.Default){return(function LB(){return om}()||jB)(U(n),e)}function X(n,e=j.Default){return C(n,Tu(e))}function Tu(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function am(n){const e=[];for(let t=0;t<n.length;t++){const i=U(n[t]);if(Array.isArray(i)){if(0===i.length)throw new w(900,!1);let r,o=j.Default;for(let s=0;s<i.length;s++){const a=i[s],l=HB(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}e.push(C(r,o))}else e.push(C(i))}return e}function za(n,e){return n[sm]=e,n.prototype[sm]=e,n}function HB(n){return n[sm]}function yr(n){return{toString:n}.toString()}var $n=(()=>(($n=$n||{})[$n.OnPush=0]="OnPush",$n[$n.Default=1]="Default",$n))(),zn=(()=>{return(n=zn||(zn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",zn;var n})();const Bi={},ge=[],Au=De({\u0275cmp:De}),lm=De({\u0275dir:De}),cm=De({\u0275pipe:De}),rD=De({\u0275mod:De}),Ui=De({\u0275fac:De}),Ga=De({__NG_ELEMENT_ID__:De});let GB=0;function en(n){return yr(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===$n.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||ge,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||zn.Emulated,id:"c"+GB++,styles:n.styles||ge,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return r.inputs=aD(n.inputs,i),r.outputs=aD(n.outputs),s&&s.forEach(a=>a(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(oD).filter(sD):null,r.pipeDefs=o?()=>("function"==typeof o?o():o).map(jt).filter(sD):null,r})}function oD(n){return ve(n)||Rt(n)}function sD(n){return null!==n}function Pe(n){return yr(()=>({type:n.type,bootstrap:n.bootstrap||ge,declarations:n.declarations||ge,imports:n.imports||ge,exports:n.exports||ge,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function aD(n,e){if(null==n)return Bi;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),t[r]=i,e&&(e[r]=o)}return t}const V=en;function ve(n){return n[Au]||null}function Rt(n){return n[lm]||null}function jt(n){return n[cm]||null}function hn(n,e){const t=n[rD]||null;if(!t&&!0===e)throw new Error(`Type ${Ie(n)} does not have '\u0275mod' property.`);return t}function fn(n){return Array.isArray(n)&&"object"==typeof n[1]}function Wn(n){return Array.isArray(n)&&!0===n[1]}function dm(n){return 0!=(4&n.flags)}function Pu(n){return n.componentOffset>-1}function Nu(n){return 1==(1&n.flags)}function qn(n){return null!==n.template}function QB(n){return 0!=(256&n[2])}function ro(n,e){return n.hasOwnProperty(Ui)?n[Ui]:null}class JB{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Tn(){return fD}function fD(n){return n.type.prototype.ngOnChanges&&(n.setInput=t2),e2}function e2(){const n=mD(this),e=n?.current;if(e){const t=n.previous;if(t===Bi)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function t2(n,e,t,i){const r=this.declaredInputs[t],o=mD(n)||function n2(n,e){return n[pD]=e}(n,{previous:Bi,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new JB(l&&l.currentValue,e,a===Bi),n[i]=e}Tn.ngInherit=!0;const pD="__ngSimpleChanges__";function mD(n){return n[pD]||null}function Dt(n){for(;Array.isArray(n);)n=n[0];return n}function Fu(n,e){return Dt(e[n])}function pn(n,e){return Dt(e[n.index])}function gD(n,e){return n.data[e]}function mn(n,e){const t=e[n];return fn(t)?t:t[0]}function Lu(n){return 64==(64&n[2])}function vr(n,e){return null==e?null:n[e]}function _D(n){n[18]=0}function mm(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const z={lFrame:TD(null),bindingsEnabled:!0};function vD(){return z.bindingsEnabled}function D(){return z.lFrame.lView}function de(){return z.lFrame.tView}function Vu(n){return z.lFrame.contextLView=n,n[8]}function Bu(n){return z.lFrame.contextLView=null,n}function It(){let n=bD();for(;null!==n&&64===n.type;)n=n.parent;return n}function bD(){return z.lFrame.currentTNode}function di(n,e){const t=z.lFrame;t.currentTNode=n,t.isParent=e}function gm(){return z.lFrame.isParent}function ds(){return z.lFrame.bindingIndex++}function y2(n,e){const t=z.lFrame;t.bindingIndex=t.bindingRootIndex=n,ym(e)}function ym(n){z.lFrame.currentDirectiveIndex=n}function DD(){return z.lFrame.currentQueryIndex}function bm(n){z.lFrame.currentQueryIndex=n}function b2(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function ID(n,e,t){if(t&j.SkipSelf){let r=e,o=n;for(;!(r=r.parent,null!==r||t&j.Host||(r=b2(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;e=r,n=o}const i=z.lFrame=SD();return i.currentTNode=e,i.lView=n,!0}function Cm(n){const e=SD(),t=n[1];z.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function SD(){const n=z.lFrame,e=null===n?null:n.child;return null===e?TD(n):e}function TD(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function AD(){const n=z.lFrame;return z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const xD=AD;function wm(){const n=AD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function zt(){return z.lFrame.selectedIndex}function oo(n){z.lFrame.selectedIndex=n}function je(){const n=z.lFrame;return gD(n.tView,n.selectedIndex)}function Uu(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function ju(n,e,t){MD(n,e,3,t)}function Hu(n,e,t,i){(3&n[2])===t&&MD(n,e,t,i)}function Em(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function MD(n,e,t,i){const o=i??-1,s=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<o||-1==o)&&(x2(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function x2(n,e,t,i){const r=t[i]<0,o=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Qa{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Sm(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{const o=r,s=t[++i];kD(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function RD(n){return 3===n||4===n||6===n}function kD(n){return 64===n.charCodeAt(0)}function Xa(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||OD(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function OD(n,e,t,i,r){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[o+1]=r));if(i===n[o+1])return void(n[o+2]=r)}o++,null!==i&&o++,null!==r&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==i&&n.splice(o++,0,i),null!==r&&n.splice(o++,0,r)}function PD(n){return-1!==n}function $u(n){return 32767&n}function zu(n,e){let t=function P2(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Tm=!0;function Gu(n){const e=Tm;return Tm=n,e}let N2=0;const hi={};function Wu(n,e){const t=LD(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Am(i.data,n),Am(e,null),Am(i.blueprint,null));const r=xm(n,e),o=n.injectorIndex;if(PD(r)){const s=$u(r),a=zu(r,e),l=a[1].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function Am(n,e){n.push(0,0,0,0,0,0,0,0,e)}function LD(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function xm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=zD(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Mm(n,e,t){!function F2(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Ga)&&(i=t[Ga]),null==i&&(i=t[Ga]=N2++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function VD(n,e,t){if(t&j.Optional||void 0!==n)return n;Eu()}function BD(n,e,t,i){if(t&j.Optional&&void 0===i&&(i=null),0==(t&(j.Self|j.Host))){const r=n[9],o=Sn(void 0);try{return r?r.get(e,i,t&j.Optional):tD(e,i,t&j.Optional)}finally{Sn(o)}}return VD(i,0,t)}function UD(n,e,t,i=j.Default,r){if(null!==n){if(1024&e[2]){const s=function j2(n,e,t,i,r){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=jD(o,s,t,i|j.Self,hi);if(a!==hi)return a;let l=o.parent;if(!l){const c=s[21];if(c){const u=c.get(t,hi,i);if(u!==hi)return u}l=zD(s),s=s[15]}o=l}return r}(n,e,t,i,hi);if(s!==hi)return s}const o=jD(n,e,t,i,hi);if(o!==hi)return o}return BD(e,t,i,r)}function jD(n,e,t,i,r){const o=function B2(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ga)?n[Ga]:void 0;return"number"==typeof e?e>=0?255&e:U2:e}(t);if("function"==typeof o){if(!ID(e,n,i))return i&j.Host?VD(r,0,i):BD(e,t,i,r);try{const s=o(i);if(null!=s||i&j.Optional)return s;Eu()}finally{xD()}}else if("number"==typeof o){let s=null,a=LD(n,e),l=-1,c=i&j.Host?e[16][6]:null;for((-1===a||i&j.SkipSelf)&&(l=-1===a?xm(n,e):e[a+8],-1!==l&&$D(i,!1)?(s=e[1],a=$u(l),e=zu(l,e)):a=-1);-1!==a;){const u=e[1];if(HD(o,a,u.data)){const d=V2(a,e,t,s,i,c);if(d!==hi)return d}l=e[a+8],-1!==l&&$D(i,e[1].data[a+8]===c)&&HD(o,a,e)?(s=u,a=$u(l),e=zu(l,e)):a=-1}}return r}function V2(n,e,t,i,r,o){const s=e[1],a=s.data[n+8],u=qu(a,s,t,null==i?Pu(a)&&Tm:i!=s&&0!=(3&a.type),r&j.Host&&o===a);return null!==u?fs(e,s,u,a):hi}function qu(n,e,t,i,r){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,u=o>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){const f=s[l];if(f&&qn(f)&&f.type===t)return l}return null}function fs(n,e,t,i){let r=n[t];const o=e.data;if(function M2(n){return n instanceof Qa}(r)){const s=r;s.resolving&&function AB(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new w(-200,`Circular dependency in DI detected for ${n}${t}`)}(function _e(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():G(n)}(o[t]));const a=Gu(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Sn(s.injectImpl):null;ID(n,i,j.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&function A2(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){const s=fD(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==l&&Sn(l),Gu(a),s.resolving=!1,xD()}}return r}function HD(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function $D(n,e){return!(n&j.Self||n&j.Host&&e)}class ps{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return UD(this._tNode,this._lView,e,Tu(i),t)}}function U2(){return new ps(It(),D())}function St(n){return yr(()=>{const e=n.prototype.constructor,t=e[Ui]||Rm(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const o=r[Ui]||Rm(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Rm(n){return nm(n)?()=>{const e=Rm(U(n));return e&&e()}:ro(n)}function zD(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const gs="__parameters__";function ys(n,e,t){return yr(()=>{const i=function km(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(gs)?l[gs]:Object.defineProperty(l,gs,{value:[]})[gs];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class T{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=x({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gn(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let i=n[t];Array.isArray(i)?(e===n&&(e=n.slice(0,t)),gn(i,e)):e!==n&&e.push(i)}return e}function so(n,e){n.forEach(t=>Array.isArray(t)?so(t,e):e(t))}function WD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Yu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function _n(n,e,t){let i=vs(n,e);return i>=0?n[1|i]=t:(i=~i,function G2(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Pm(n,e){const t=vs(n,e);if(t>=0)return n[1|t]}function vs(n,e){return function YD(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}(n,e,1)}const tl=za(ys("Optional"),8),nl=za(ys("SkipSelf"),4);var nn=(()=>((nn=nn||{})[nn.Important=1]="Important",nn[nn.DashCase=2]="DashCase",nn))();const Um=new Map;let fU=0;const Hm="__ngContext__";function Pt(n,e){fn(e)?(n[Hm]=e[20],function mU(n){Um.set(n[20],n)}(e)):n[Hm]=e}function zm(n,e){return undefined(n,e)}function sl(n){const e=n[3];return Wn(e)?e[3]:e}function Gm(n){return gI(n[13])}function Wm(n){return gI(n[4])}function gI(n){for(;null!==n&&!Wn(n);)n=n[4];return n}function Cs(n,e,t,i,r){if(null!=i){let o,s=!1;Wn(i)?o=i:fn(i)&&(s=!0,i=i[0]);const a=Dt(i);0===n&&null!==t?null==r?wI(e,t,a):ao(e,t,a,r||null,!0):1===n&&null!==t?ao(e,t,a,r||null,!0):2===n?function Jm(n,e,t){const i=Ju(n,e);i&&function FU(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function BU(n,e,t,i,r){const o=t[7];o!==Dt(t)&&Cs(e,n,i,o,r);for(let a=10;a<t.length;a++){const l=t[a];al(l[1],l,n,e,i,o)}}(e,n,o,t,r)}}function Km(n,e,t){return n.createElement(e,t)}function yI(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,mm(r,-1)),t.splice(i,1)}function Ym(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&yI(r,i),e>0&&(n[t-1][4]=i[4]);const o=Yu(n,10+e);!function AU(n,e){al(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function vI(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&al(n,e,t,3,null,null),function RU(n){let e=n[13];if(!e)return Qm(n[1],n);for(;e;){let t=null;if(fn(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)fn(e)&&Qm(e[1],e),e=e[3];null===e&&(e=n),fn(e)&&Qm(e[1],e),t=e&&e[4]}e=t}}(e)}}function Qm(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function NU(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Qa)){const o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(r)}finally{}}}}(n,e),function PU(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?i[r=s]():i[r=-s].unsubscribe(),o+=2}else{const s=i[r=t[o+1]];t[o].call(s)}if(null!==i){for(let o=r+1;o<i.length;o++)(0,i[o])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Wn(e[3])){t!==e[3]&&yI(t,e);const i=e[19];null!==i&&i.detachView(n)}!function gU(n){Um.delete(n[20])}(e)}}function bI(n,e,t){return function CI(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:o}=n.data[i.directiveStart+r];if(o===zn.None||o===zn.Emulated)return null}return pn(i,t)}}(n,e.parent,t)}function ao(n,e,t,i,r){n.insertBefore(e,t,i,r)}function wI(n,e,t){n.appendChild(e,t)}function EI(n,e,t,i,r){null!==i?ao(n,e,t,i,r):wI(n,e,t)}function Ju(n,e){return n.parentNode(e)}let ng,id,SI=function II(n,e,t){return 40&n.type?pn(n,t):null};function ed(n,e,t,i){const r=bI(n,i,e),o=e[11],a=function DI(n,e,t){return SI(n,e,t)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)EI(o,r,t[l],a,!1);else EI(o,r,t,a,!1)}function td(n,e){if(null!==e){const t=e.type;if(3&t)return pn(e,n);if(4&t)return Zm(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return td(n,i);{const r=n[e.index];return Wn(r)?Zm(-1,r):Dt(r)}}if(32&t)return zm(e,n)()||Dt(n[e.index]);{const i=AI(n,e);return null!==i?Array.isArray(i)?i[0]:td(sl(n[16]),i):td(n,e.next)}}return null}function AI(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Zm(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return td(i,r)}return e[7]}function eg(n,e,t,i,r,o,s){for(;null!=t;){const a=i[t.index],l=t.type;if(s&&0===e&&(a&&Pt(Dt(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)eg(n,e,t.child,i,r,o,!1),Cs(e,n,r,a,o);else if(32&l){const c=zm(t,i);let u;for(;u=c();)Cs(e,n,r,u,o);Cs(e,n,r,a,o)}else 16&l?xI(n,e,i,t,r,o):Cs(e,n,r,a,o);t=s?t.projectionNext:t.next}}function al(n,e,t,i,r,o){eg(t,i,n.firstChild,e,r,o,!1)}function xI(n,e,t,i,r,o){const s=t[16],l=s[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Cs(e,n,r,l[c],o);else eg(n,e,l,s[3],r,o,!0)}function MI(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function RI(n,e,t){const{mergedAttrs:i,classes:r,styles:o}=t;null!==i&&Sm(n,e,i),null!==r&&MI(n,e,r),null!==o&&function jU(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}function NI(n){return function ig(){if(void 0===id&&(id=null,xe.trustedTypes))try{id=xe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return id}()?.createScriptURL(n)||n}class FI{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${X0})`}}function br(n){return n instanceof FI?n.changingThisBreaksApplicationSecurity:n}function ll(n,e){const t=function XU(n){return n instanceof FI&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${X0})`)}return t===e}const tj=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var it=(()=>((it=it||{})[it.NONE=0]="NONE",it[it.HTML=1]="HTML",it[it.STYLE=2]="STYLE",it[it.SCRIPT=3]="SCRIPT",it[it.URL=4]="URL",it[it.RESOURCE_URL=5]="RESOURCE_URL",it))();function lg(n){const e=ul();return e?e.sanitize(it.URL,n)||"":ll(n,"URL")?br(n):function rg(n){return(n=String(n)).match(tj)?n:"unsafe:"+n}(G(n))}function $I(n){const e=ul();if(e)return NI(e.sanitize(it.RESOURCE_URL,n)||"");if(ll(n,"ResourceURL"))return NI(br(n));throw new w(904,!1)}function ul(){const n=D();return n&&n[12]}const od=new T("ENVIRONMENT_INITIALIZER"),GI=new T("INJECTOR",-1),WI=new T("INJECTOR_DEF_TYPES");class qI{get(e,t=Ha){if(t===Ha){const i=new Error(`NullInjectorError: No provider for ${Ie(e)}!`);throw i.name="NullInjectorError",i}return t}}function mj(...n){return{\u0275providers:KI(0,n),\u0275fromNgModule:!0}}function KI(n,...e){const t=[],i=new Set;let r;return so(e,o=>{const s=o;cg(s,t,[],i)&&(r||(r=[]),r.push(s))}),void 0!==r&&YI(r,t),t}function YI(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];ug(r,o=>{e.push(o)})}}function cg(n,e,t,i){if(!(n=U(n)))return!1;let r=null,o=J0(n);const s=!o&&ve(n);if(o||s){if(s&&!s.standalone)return!1;r=n}else{const l=n.ngModule;if(o=J0(l),!o)return!1;r=l}const a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)cg(c,e,t,i)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;i.add(r);try{so(o.imports,u=>{cg(u,e,t,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&YI(c,e)}if(!a){const c=ro(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:ge},{provide:WI,useValue:r,multi:!0},{provide:od,useValue:()=>C(r),multi:!0})}const l=o.providers;null==l||a||ug(l,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}function ug(n,e){for(let t of n)im(t)&&(t=t.\u0275providers),Array.isArray(t)?ug(t,e):e(t)}const gj=De({provide:String,useValue:De});function dg(n){return null!==n&&"object"==typeof n&&gj in n}function co(n){return"function"==typeof n}const hg=new T("Set Injector scope."),sd={},yj={};let fg;function ad(){return void 0===fg&&(fg=new qI),fg}class fi{}class ZI extends fi{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mg(e,s=>this.processProvider(s)),this.records.set(GI,ws(void 0,this)),r.has("environment")&&this.records.set(fi,ws(void 0,this));const o=this.records.get(hg);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(WI.multi,ge,j.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=rs(this),i=Sn(void 0);try{return e()}finally{rs(t),Sn(i)}}get(e,t=Ha,i=j.Default){this.assertNotDestroyed(),i=Tu(i);const r=rs(this),o=Sn(void 0);try{if(!(i&j.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function Ej(n){return"function"==typeof n||"object"==typeof n&&n instanceof T}(e)&&Du(e);a=l&&this.injectableDefInScope(l)?ws(pg(e),sd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&j.Self?ad():this.parent).get(e,t=i&j.Optional&&t===Ha?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Su]=s[Su]||[]).unshift(Ie(e)),r)throw s;return function $B(n,e,t,i){const r=n[Su];throw e[nD]&&r.unshift(e[nD]),n.message=function zB(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ie(e);if(Array.isArray(e))r=e.map(Ie).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ie(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(BB,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Su]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Sn(o),rs(r)}}resolveInjectorInitializers(){const e=rs(this),t=Sn(void 0);try{const i=this.get(od.multi,ge,j.Self);for(const r of i)r()}finally{rs(e),Sn(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Ie(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new w(205,!1)}processProvider(e){let t=co(e=U(e))?e:U(e&&e.provide);const i=function bj(n){return dg(n)?ws(void 0,n.useValue):ws(JI(n),sd)}(e);if(co(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=ws(void 0,sd,!0),r.factory=()=>am(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===sd&&(t.value=yj,t.value=t.factory()),"object"==typeof t.value&&t.value&&function wj(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=U(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function pg(n){const e=Du(n),t=null!==e?e.factory:ro(n);if(null!==t)return t;if(n instanceof T)throw new w(204,!1);if(n instanceof Function)return function vj(n){const e=n.length;if(e>0)throw function el(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(e,"?"),new w(204,!1);const t=function PB(n){const e=n&&(n[Iu]||n[eD]);if(e){const t=function NB(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new w(204,!1)}function JI(n,e,t){let i;if(co(n)){const r=U(n);return ro(r)||pg(r)}if(dg(n))i=()=>U(n.useValue);else if(function XI(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...am(n.deps||[]));else if(function QI(n){return!(!n||!n.useExisting)}(n))i=()=>C(U(n.useExisting));else{const r=U(n&&(n.useClass||n.provide));if(!function Cj(n){return!!n.deps}(n))return ro(r)||pg(r);i=()=>new r(...am(n.deps))}return i}function ws(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function mg(n,e){for(const t of n)Array.isArray(t)?mg(t,e):t&&im(t)?mg(t.\u0275providers,e):e(t)}class Dj{}class eS{}class Sj{resolveComponentFactory(e){throw function Ij(n){const e=Error(`No component factory found for ${Ie(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let uo=(()=>{class n{}return n.NULL=new Sj,n})();function Tj(){return Es(It(),D())}function Es(n,e){return new rt(pn(n,e))}let rt=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Tj,n})();function Aj(n){return n instanceof rt?n.nativeElement:n}class dl{}let zi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function xj(){const n=D(),t=mn(It().index,n);return(fn(t)?t:n)[11]}(),n})(),Mj=(()=>{class n{}return n.\u0275prov=x({token:n,providedIn:"root",factory:()=>null}),n})();class ho{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Rj=new ho("15.0.2"),gg={};function yg(n){return n.ngOriginalError}class Ds{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&yg(e);for(;t&&yg(t);)t=yg(t);return t||null}}function Gi(n){return n instanceof Function?n():n}function iS(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}const rS="ng-template";function Hj(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==iS(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function oS(n){return 4===n.type&&n.value!==rS}function $j(n,e,t){return e===(4!==n.type||t?n.value:rS)}function zj(n,e,t){let i=4;const r=n.attrs||[],o=function qj(n){for(let e=0;e<n.length;e++)if(RD(n[e]))return e;return n.length}(r);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&i){if(i=2|1&i,""!==l&&!$j(n,l,t)||""===l&&1===e.length){if(Kn(i))return!1;s=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!Hj(n.attrs,c,t)){if(Kn(i))return!1;s=!0}continue}const d=Gj(8&i?"class":l,r,oS(n),t);if(-1===d){if(Kn(i))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":r[d+1].toLowerCase();const f=8&i?h:null;if(f&&-1!==iS(f,c,0)||2&i&&c!==h){if(Kn(i))return!1;s=!0}}}}else{if(!s&&!Kn(i)&&!Kn(l))return!1;if(s&&Kn(l))continue;s=!1,i=l|1&i}}return Kn(i)||s}function Kn(n){return 0==(1&n)}function Gj(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){const s=e[r];if(s===n)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function Kj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function sS(n,e,t=!1){for(let i=0;i<e.length;i++)if(zj(n,e[i],t))return!0;return!1}function aS(n,e){return n?":not("+e.trim()+")":e}function Qj(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&i){const a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+s:4&i&&(r+=" "+s);else""!==r&&!Kn(s)&&(e+=aS(o,r),r=""),i=s,o=o||!Kn(i);t++}return""!==r&&(e+=aS(o,r)),e}const W={};function be(n){lS(de(),D(),zt()+n,!1)}function lS(n,e,t,i){if(!i)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&ju(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Hu(e,o,0,t)}oo(t)}function hS(n,e=null,t=null,i){const r=fS(n,e,t,i);return r.resolveInjectorInitializers(),r}function fS(n,e=null,t=null,i,r=new Set){const o=[t||ge,mj(n)];return i=i||("object"==typeof n?void 0:Ie(n)),new ZI(o,e||ad(),i||null,r)}let yt=(()=>{class n{static create(t,i){if(Array.isArray(t))return hS({name:""},i,t,"");{const r=t.name??"";return hS({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Ha,n.NULL=new qI,n.\u0275prov=x({token:n,providedIn:"any",factory:()=>C(GI)}),n.__NG_ELEMENT_ID__=-1,n})();function b(n,e=j.Default){const t=D();return null===t?C(n,e):UD(It(),t,U(n),e)}function cd(){throw new Error("invalid")}function bS(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],o=t[i+1];if(-1!==o){const s=n.data[o];bm(r),s.contentQueries(2,e[o],o)}}}function ud(n,e,t,i,r,o,s,a,l,c,u){const d=e.blueprint.slice();return d[0]=r,d[2]=76|i,(null!==u||n&&1024&n[2])&&(d[2]|=1024),_D(d),d[3]=d[15]=n,d[8]=t,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=o,d[20]=function pU(){return fU++}(),d[21]=u,d[16]=2==e.type?n[16]:d,d}function Ts(n,e,t,i,r){let o=n.data[e];if(null===o)o=function Eg(n,e,t,i,r){const o=bD(),s=gm(),l=n.data[e]=function wH(n,e,t,i,r,o){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(n,e,t,i,r),function _2(){return z.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=i,o.attrs=r;const s=function Ya(){const n=z.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return di(o,!0),o}function hl(n,e,t,i){if(0===t)return-1;const r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Dg(n,e,t){Cm(e);try{const i=n.viewQuery;null!==i&&Pg(1,i,t);const r=n.template;null!==r&&CS(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&bS(n,e),n.staticViewQueries&&Pg(2,n.viewQuery,t);const o=n.components;null!==o&&function vH(n,e){for(let t=0;t<e.length;t++)jH(n,e[t])}(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,wm()}}function dd(n,e,t,i){const r=e[2];if(128!=(128&r)){Cm(e);try{_D(e),function wD(n){return z.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&CS(n,e,t,2,i);const s=3==(3&r);if(s){const c=n.preOrderCheckHooks;null!==c&&ju(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Hu(e,c,0,null),Em(e,0)}if(function BH(n){for(let e=Gm(n);null!==e;e=Wm(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],o=r[3];0==(512&r[2])&&mm(o,1),r[2]|=512}}}(e),function VH(n){for(let e=Gm(n);null!==e;e=Wm(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Lu(i)&&dd(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&bS(n,e),s){const c=n.contentCheckHooks;null!==c&&ju(e,c)}else{const c=n.contentHooks;null!==c&&Hu(e,c,1),Em(e,1)}!function _H(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)oo(~r);else{const o=r,s=t[++i],a=t[++i];y2(s,o),a(2,e[o])}}}finally{oo(-1)}}(n,e);const a=n.components;null!==a&&function yH(n,e){for(let t=0;t<e.length;t++)UH(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Pg(2,l,i),s){const c=n.viewCheckHooks;null!==c&&ju(e,c)}else{const c=n.viewHooks;null!==c&&Hu(e,c,2),Em(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,mm(e[3],-1))}finally{wm()}}}function CS(n,e,t,i,r){const o=zt(),s=2&i;try{oo(-1),s&&e.length>22&&lS(n,e,22,!1),t(i,r)}finally{oo(o)}}function Ig(n,e,t){if(dm(e)){const r=e.directiveEnd;for(let o=e.directiveStart;o<r;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function Sg(n,e,t){!vD()||(function AH(n,e,t,i){const r=t.directiveStart,o=t.directiveEnd;n.firstCreatePass||Wu(t,e),Pt(i,e);const s=t.initialInputs;for(let a=r;a<o;a++){const l=n.data[a],c=qn(l);c&&NH(e,t,l);const u=fs(e,n,a,t);Pt(u,e),null!==s&&FH(0,a-r,u,l,0,s),c&&(mn(t.index,e)[8]=u)}}(n,e,t,pn(t,e)),64==(64&t.flags)&&AS(n,e,t))}function Tg(n,e,t=pn){const i=e.localNames;if(null!==i){let r=e.index+1;for(let o=0;o<i.length;o+=2){const s=i[o+1],a=-1===s?t(e,n):n[s];n[r++]=a}}}function wS(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Ag(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Ag(n,e,t,i,r,o,s,a,l,c){const u=22+i,d=u+r,h=function bH(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:W);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function ES(n,e,t,i){const r=MS(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&RS(n).push(i,r.length-1))}function DS(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const o=n[r];null===i?IS(t,e,r,o):i.hasOwnProperty(r)&&IS(t,e,i[r],o)}return t}function IS(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function yn(n,e,t,i,r,o,s,a){const l=pn(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(Ng(n,t,u,i,r),Pu(e)&&SS(t,e.index)):3&e.type&&(i=function DH(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=s?s(r,e.value||"",i):r,o.setProperty(l,i,r))}function SS(n,e){const t=mn(e,n);16&t[2]||(t[2]|=32)}function xg(n,e,t,i){let r=!1;if(vD()){const o=null===i?null:{"":-1},s=function MH(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(sS(e,s.selectors,!1))if(i||(i=[]),qn(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s),Mg(n,e,a.length)}else i.unshift(s),Mg(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return null===i?null:[i,r]}(n,t);let a,l;null===s?a=l=null:[a,l]=s,null!==a&&(r=!0,TS(n,e,t,a,o,l)),o&&function RH(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const o=t[e[r+1]];if(null==o)throw new w(-301,!1);i.push(e[r],o)}}}(t,i,o)}return t.mergedAttrs=Xa(t.mergedAttrs,t.attrs),r}function TS(n,e,t,i,r,o){for(let c=0;c<i.length;c++)Mm(Wu(t,e),n,i[c].type);!function OH(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=hl(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=Xa(t.mergedAttrs,u.hostAttrs),PH(n,t,e,l,u),kH(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function EH(n,e,t){const r=e.directiveEnd,o=n.data,s=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=o[u],h=t?t.get(d):null,p=h?h.outputs:null;l=DS(d.inputs,u,l,h?h.inputs:null),c=DS(d.outputs,u,c,p);const m=null===l||null===s||oS(e)?null:LH(l,u,s);a.push(m)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,o)}function AS(n,e,t){const i=t.directiveStart,r=t.directiveEnd,o=t.index,s=function v2(){return z.lFrame.currentDirectiveIndex}();try{oo(o);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];ym(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&xH(l,c)}}finally{oo(-1),ym(s)}}function xH(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Mg(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function kH(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;qn(e)&&(t[""]=n)}}function PH(n,e,t,i,r){n.data[i]=r;const o=r.factory||(r.factory=ro(r.type)),s=new Qa(o,qn(r),b);n.blueprint[i]=s,t[i]=s,function SH(n,e,t,i,r){const o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function TH(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,i,o)}}(n,e,i,hl(n,t,r.hostVars,W),r)}function NH(n,e,t){const i=pn(e,n),r=wS(t),o=n[10],s=hd(n,ud(n,r,null,t.onPush?32:16,i,e,o,o.createRenderer(i,t),null,null,null));n[e.index]=s}function pi(n,e,t,i,r,o){const s=pn(n,e);!function Rg(n,e,t,i,r,o,s){if(null==o)n.removeAttribute(e,r,t);else{const a=null==s?G(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],s,o,n.value,t,i,r)}function FH(n,e,t,i,r,o){const s=o[e];if(null!==s){const a=i.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?i.setInput(t,d,c,u):t[u]=d}}}function LH(n,e,t){let i=null,r=0;for(;r<t.length;){const o=t[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===i&&(i=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){i.push(o,s[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function xS(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function UH(n,e){const t=mn(e,n);if(Lu(t)){const i=t[1];48&t[2]?dd(i,t,i.template,t[8]):t[5]>0&&kg(t)}}function kg(n){for(let i=Gm(n);null!==i;i=Wm(i))for(let r=10;r<i.length;r++){const o=i[r];if(Lu(o))if(512&o[2]){const s=o[1];dd(s,o,s.template,o[8])}else o[5]>0&&kg(o)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=mn(t[i],n);Lu(r)&&r[5]>0&&kg(r)}}function jH(n,e){const t=mn(e,n),i=t[1];(function HH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),Dg(i,t,t[8])}function hd(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Og(n){for(;n;){n[2]|=32;const e=sl(n);if(QB(n)&&!e)return n;n=e}return null}function fd(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{dd(n,e,n.template,t)}catch(s){throw i&&OS(e,s),s}finally{r.end&&r.end()}}function Pg(n,e,t){bm(0),e(n,t)}function MS(n){return n[7]||(n[7]=[])}function RS(n){return n.cleanup||(n.cleanup=[])}function OS(n,e){const t=n[9],i=t?t.get(Ds,null):null;i&&i.handleError(e)}function Ng(n,e,t,i,r){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],l=e[s],c=n.data[s];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function pd(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?r=tm(r,a):2==o&&(i=tm(i,a+": "+e[++s]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function md(n,e,t,i,r=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&i.push(Dt(o)),Wn(o))for(let a=10;a<o.length;a++){const l=o[a],c=l[1].firstChild;null!==c&&md(l[1],l,c,i)}const s=t.type;if(8&s)md(n,e,t.child,i);else if(32&s){const a=zm(t,e);let l;for(;l=a();)i.push(l)}else if(16&s){const a=AI(e,t);if(Array.isArray(a))i.push(...a);else{const l=sl(e[16]);md(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class fl{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return md(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Wn(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Ym(e,i),Yu(t,i))}this._attachedToViewContainer=!1}vI(this._lView[1],this._lView)}onDestroy(e){ES(this._lView[1],this._lView,null,e)}markForCheck(){Og(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){fd(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new w(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function MU(n,e){al(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new w(902,!1);this._appRef=e}}class $H extends fl{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;fd(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class PS extends uo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=ve(e);return new pl(t,this.ngModule)}}function NS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class GH{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Tu(i);const r=this.injector.get(e,gg,i);return r!==gg||t===gg?r:this.parentInjector.get(e,t,i)}}class pl extends eS{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Xj(n){return n.map(Qj).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return NS(this.componentDef.inputs)}get outputs(){return NS(this.componentDef.outputs)}create(e,t,i,r){let o=(r=r||this.ngModule)instanceof fi?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new GH(e,o):e,a=s.get(dl,null);if(null===a)throw new w(407,!1);const l=s.get(Mj,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=i?function CH(n,e,t){return n.selectRootElement(e,t===zn.ShadowDom)}(c,i,this.componentDef.encapsulation):Km(c,u,function zH(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Ag(0,null,null,1,0,null,null,null,null,null),p=ud(null,f,null,h,null,null,a,c,l,s,null);let m,g;Cm(p);try{const _=this.componentDef;let E,y=null;_.findHostDirectiveDefs?(E=[],y=new Map,_.findHostDirectiveDefs(_,E,y),E.push(_)):E=[_];const I=function qH(n,e){const t=n[1];return n[22]=e,Ts(t,22,2,"#host",null)}(p,d),q=function KH(n,e,t,i,r,o,s,a){const l=r[1];!function YH(n,e,t,i){for(const r of n)e.mergedAttrs=Xa(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(pd(e,e.mergedAttrs,!0),null!==t&&RI(i,t,e))}(i,n,e,s);const c=o.createRenderer(e,t),u=ud(r,wS(t),null,t.onPush?32:16,r[n.index],n,o,c,a||null,null,null);return l.firstCreatePass&&Mg(l,n,i.length-1),hd(r,u),r[n.index]=u}(I,d,_,E,p,a,c);g=gD(f,22),d&&function XH(n,e,t,i){if(i)Sm(n,t,["ng-version",Rj.full]);else{const{attrs:r,classes:o}=function Zj(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let o=n[i];if("string"==typeof o)2===r?""!==o&&e.push(o,n[++i]):8===r&&t.push(o);else{if(!Kn(r))break;r=o}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Sm(n,t,r),o&&o.length>0&&MI(n,t,o.join(" "))}}(c,_,d,i),void 0!==t&&function ZH(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const o=t[r];i.push(null!=o?Array.from(o):null)}}(g,this.ngContentSelectors,t),m=function QH(n,e,t,i,r,o){const s=It(),a=r[1],l=pn(s,r);TS(a,r,s,t,null,i);for(let u=0;u<t.length;u++)Pt(fs(r,a,s.directiveStart+u,s),r);AS(a,r,s),l&&Pt(l,r);const c=fs(r,a,s.directiveStart+s.componentOffset,s);if(n[8]=r[8]=c,null!==o)for(const u of o)u(c,e);return Ig(a,s,n),c}(q,_,E,y,p,[JH]),Dg(f,p,null)}finally{wm()}return new WH(this.componentType,m,Es(g,p),p,g)}}class WH extends Dj{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new $H(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const o=this._rootLView;Ng(o[1],o,r,e,t),SS(o,this._tNode.index)}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function JH(){const n=It();Uu(D()[1],n)}function fe(n){let e=function FS(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(qn(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new w(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const s=n;s.inputs=Fg(n.inputs),s.declaredInputs=Fg(n.declaredInputs),s.outputs=Fg(n.outputs);const a=r.hostBindings;a&&i$(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&t$(n,l),c&&n$(n,c),em(n.inputs,r.inputs),em(n.declaredInputs,r.declaredInputs),em(n.outputs,r.outputs),qn(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===fe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function e$(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Xa(r.hostAttrs,t=Xa(t,r.hostAttrs))}}(i)}function Fg(n){return n===Bi?{}:n===ge?[]:n}function t$(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function n$(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,o)=>{e(i,r,o),t(i,r,o)}:e}function i$(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}let gd=null;function fo(){if(!gd){const n=xe.Symbol;if(n&&n.iterator)gd=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(gd=i)}}}return gd}function ml(n){return!!function Lg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&fo()in n)}function Nt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Mn(n,e,t,i){const r=D();return Nt(r,ds(),e)&&(de(),pi(je(),r,n,e,t,i)),Mn}function Ft(n,e,t,i,r,o,s,a){const l=D(),c=de(),u=n+22,d=c.firstCreatePass?function f$(n,e,t,i,r,o,s,a,l){const c=e.consts,u=Ts(e,n,4,s||null,vr(c,a));xg(e,t,u,vr(c,l)),Uu(e,u);const d=u.tViews=Ag(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,o,s):c.data[u];di(d,!1);const h=l[11].createComment("");ed(c,l,h,d),Pt(h,l),hd(l,l[u]=xS(h,l,h,d)),Nu(d)&&Sg(c,l,d),null!=s&&Tg(l,d,a)}function Vg(n){return function us(n,e){return n[e]}(function g2(){return z.lFrame.contextLView}(),22+n)}function Fe(n,e,t){const i=D();return Nt(i,ds(),e)&&yn(de(),je(),i,n,e,i[11],t,!1),Fe}function Bg(n,e,t,i,r){const s=r?"class":"style";Ng(n,t,e.inputs[s],s,i)}function F(n,e,t,i){const r=D(),o=de(),s=22+n,a=r[11],l=r[s]=Km(a,e,function T2(){return z.lFrame.currentNamespace}()),c=o.firstCreatePass?function m$(n,e,t,i,r,o,s){const a=e.consts,c=Ts(e,n,2,r,vr(a,o));return xg(e,t,c,vr(a,s)),null!==c.attrs&&pd(c,c.attrs,!1),null!==c.mergedAttrs&&pd(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,r,0,e,t,i):o.data[s];return di(c,!0),RI(a,l,c),32!=(32&c.flags)&&ed(o,r,l,c),0===function d2(){return z.lFrame.elementDepthCount}()&&Pt(l,r),function h2(){z.lFrame.elementDepthCount++}(),Nu(c)&&(Sg(o,r,c),Ig(o,c,r)),null!==i&&Tg(r,c),F}function P(){let n=It();gm()?function _m(){z.lFrame.isParent=!1}():(n=n.parent,di(n,!1));const e=n;!function f2(){z.lFrame.elementDepthCount--}();const t=de();return t.firstCreatePass&&(Uu(t,n),dm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function k2(n){return 0!=(8&n.flags)}(e)&&Bg(t,e,D(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function O2(n){return 0!=(16&n.flags)}(e)&&Bg(t,e,D(),e.stylesWithoutHost,!1),P}function Gt(n,e,t,i){return F(n,e,t,i),P(),Gt}function yd(){return D()}function _l(n){return!!n&&"function"==typeof n.then}const Hg=function QS(n){return!!n&&"function"==typeof n.subscribe};function Ye(n,e,t,i){const r=D(),o=de(),s=It();return function ZS(n,e,t,i,r,o,s){const a=Nu(i),c=n.firstCreatePass&&RS(n),u=e[8],d=MS(e);let h=!0;if(3&i.type||s){const m=pn(i,e),g=s?s(m):m,_=d.length,E=s?I=>s(Dt(I[i.index])):i.index;let y=null;if(!s&&a&&(y=function _$(n,e,t,i){const r=n.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===t&&r[o+1]===i){const a=e[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,r,i.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1;else{o=eT(i,e,u,o,!1);const I=t.listen(g,r,o);d.push(o,I),c&&c.push(r,E,_,_+1)}}else o=eT(i,e,u,o,!1);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const m=p.length;if(m)for(let g=0;g<m;g+=2){const q=e[p[g]][p[g+1]].subscribe(o),Y=d.length;d.push(o,q),c&&c.push(r,i.index,Y,-(Y+1))}}}(o,r,r[11],s,n,e,i),Ye}function JS(n,e,t,i){try{return!1!==t(i)}catch(r){return OS(n,r),!1}}function eT(n,e,t,i,r){return function o(s){if(s===Function)return i;Og(n.componentOffset>-1?mn(n.index,e):e);let l=JS(e,0,i,s),c=o.__ngNextListenerFn__;for(;c;)l=JS(e,0,c,s)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function mo(n=1){return function C2(n){return(z.lFrame.contextLView=function w2(n,e){for(;n>0;)e=e[15],n--;return e}(n,z.lFrame.contextLView))[8]}(n)}function vd(n,e){return n<<17|e<<2}function Cr(n){return n>>17&32767}function zg(n){return 2|n}function go(n){return(131068&n)>>2}function Gg(n,e){return-131069&n|e<<2}function Wg(n){return 1|n}function uT(n,e,t,i,r){const o=n[t+1],s=null===e;let a=i?Cr(o):go(o),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];S$(n[a],e)&&(l=!0,n[a+1]=i?Wg(u):zg(u)),a=i?Cr(u):go(u)}l&&(n[t+1]=i?zg(o):Wg(o))}function S$(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&vs(n,e)>=0}function Vs(n,e){return function Yn(n,e,t,i){const r=D(),o=de(),s=function Hi(n){const e=z.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function vT(n,e,t,i){const r=n.data;if(null===r[t+1]){const o=r[zt()],s=function yT(n,e){return e>=n.expandoStartIndex}(n,t);(function ET(n,e){return 0!=(n.flags&(e?8:16))})(o,i)&&null===e&&!s&&(e=!1),e=function N$(n,e,t,i){const r=function vm(n){const e=z.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=yl(t=qg(null,n,e,t,i),e.attrs,i),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==r)if(t=qg(r,n,e,t,i),null===o){let l=function F$(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==go(i))return n[Cr(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=qg(null,n,e,l[1],i),l=yl(l,e.attrs,i),function L$(n,e,t,i){n[Cr(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else o=function V$(n,e,t){let i;const r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++)i=yl(i,n[o].hostAttrs,t);return yl(i,e.attrs,t)}(n,e,i)}return void 0!==o&&(i?e.residualClasses=o:e.residualStyles=o),t}(r,o,e,i),function D$(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Cr(s),l=go(s);n[i]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||vs(d,u)>0)&&(c=!0)}else u=t;if(r)if(0!==l){const h=Cr(n[a+1]);n[i+1]=vd(h,a),0!==h&&(n[h+1]=Gg(n[h+1],i)),n[a+1]=function w$(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=vd(a,0),0!==a&&(n[a+1]=Gg(n[a+1],i)),a=i;else n[i+1]=vd(l,0),0===a?a=i:n[l+1]=Gg(n[l+1],i),l=i;c&&(n[i+1]=zg(n[i+1])),uT(n,u,i,!0),uT(n,u,i,!1),function I$(n,e,t,i,r){const o=r?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&vs(o,e)>=0&&(t[i+1]=Wg(t[i+1]))}(e,u,n,i,o),s=vd(a,l),o?e.classBindings=s:e.styleBindings=s}(r,o,e,t,s,i)}}(o,n,s,i),e!==W&&Nt(r,s,e)&&function CT(n,e,t,i,r,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function E$(n){return 1==(1&n)}(c)?wT(l,e,t,r,go(c),s):void 0;bd(u)||(bd(o)||function C$(n){return 2==(2&n)}(c)&&(o=wT(l,null,t,r,a,s)),function UU(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=-1===i.indexOf("-")?void 0:nn.DashCase;null==r?n.removeStyle(t,i,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=nn.Important),n.setStyle(t,i,r,o))}}(i,s,Fu(zt(),t),r,o))}(o,o.data[zt()],r,r[11],n,r[s+1]=function j$(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ie(br(n)))),n}(e,t),i,s)}(n,e,null,!0),Vs}function qg(n,e,t,i,r){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],i=yl(i,o.hostAttrs,r),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function yl(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?r=s:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),_n(n,s,!!t||e[++o]))}return void 0===n?null:n}function wT(n,e,t,i,r,o){const s=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[r+1];h===W&&(h=d?ge:void 0);let f=d?Pm(h,i):u===i?h:void 0;if(c&&!bd(f)&&(f=Pm(l,i)),bd(f)&&(a=f,s))return a;const p=n[r+1];r=s?Cr(p):go(p)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=Pm(l,i))}return a}function bd(n){return void 0!==n}function ee(n,e=""){const t=D(),i=de(),r=n+22,o=i.firstCreatePass?Ts(i,r,1,e,null):i.data[r],s=t[r]=function qm(n,e){return n.createText(e)}(t[11],e);ed(i,t,s,o),di(o,!1)}function Cd(n){return wr("",n,""),Cd}function wr(n,e,t){const i=D(),r=function xs(n,e,t,i){return Nt(n,ds(),t)?e+G(t)+i:W}(i,n,e,t);return r!==W&&function Wi(n,e,t){const i=Fu(e,n);!function _I(n,e,t){n.setValue(e,t)}(n[11],i,t)}(i,zt(),r),wr}function wd(n,e,t){const i=D();return Nt(i,ds(),e)&&yn(de(),je(),i,n,e,i[11],t,!0),wd}const Us="en-US";let zT=Us;function Qg(n,e,t,i,r){if(n=U(n),Array.isArray(n))for(let o=0;o<n.length;o++)Qg(n[o],e,t,i,r);else{const o=de(),s=D();let a=co(n)?n:U(n.provide),l=JI(n);const c=It(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(co(n)||!n.multi){const f=new Qa(l,r,b),p=Zg(a,e,r?u:u+h,d);-1===p?(Mm(Wu(c,s),o,a),Xg(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=Zg(a,e,u+h,d),p=Zg(a,e,u,u+h),m=f>=0&&t[f],g=p>=0&&t[p];if(r&&!g||!r&&!m){Mm(Wu(c,s),o,a);const _=function oG(n,e,t,i,r){const o=new Qa(n,t,b);return o.multi=[],o.index=e,o.componentProviders=0,mA(o,r,i&&!t),o}(r?rG:iG,t.length,r,i,l);!r&&g&&(t[p].providerFactory=_),Xg(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(_),s.push(_)}else Xg(o,n,f>-1?f:p,mA(t[r?p:f],l,!r&&i));!r&&i&&g&&t[p].componentProviders++}}}function Xg(n,e,t,i){const r=co(e),o=function _j(n){return!!n.useClass}(e);if(r||o){const l=(o?U(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function mA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Zg(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function iG(n,e,t,i){return Jg(this.multi,[])}function rG(n,e,t,i){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=fs(t,t[1],this.providerFactory.index,i);o=a.slice(0,s),Jg(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Jg(r,o);return o}function Jg(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Be(n,e=[]){return t=>{t.providersResolver=(i,r)=>function nG(n,e,t){const i=de();if(i.firstCreatePass){const r=qn(n);Qg(t,i.data,i.blueprint,r,!0),Qg(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class js{}class gA{}class _A extends js{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PS(this);const i=hn(e);this._bootstrapComponents=Gi(i.bootstrap),this._r3Injector=fS(e,t,[{provide:js,useValue:this},{provide:uo,useValue:this.componentFactoryResolver}],Ie(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class e_ extends gA{constructor(e){super(),this.moduleType=e}create(e){return new _A(this.moduleType,e)}}class aG extends js{constructor(e,t,i){super(),this.componentFactoryResolver=new PS(this),this.instance=null;const r=new ZI([...e,{provide:js,useValue:this},{provide:uo,useValue:this.componentFactoryResolver}],t||ad(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Td(n,e,t=null){return new aG(n,e,t).injector}let lG=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=KI(0,t.type),r=i.length>0?Td([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=x({token:n,providedIn:"environment",factory:()=>new n(C(fi))}),n})();function yA(n){n.getStandaloneInjector=e=>e.get(lG).getOrCreateStandaloneInjector(n)}function n_(n){return e=>{setTimeout(n,void 0,e)}}const Le=class PG extends Ee{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=n_(o),r&&(r=n_(r)),s&&(s=n_(s)));const a=super.subscribe({next:r,error:o,complete:s});return e instanceof gt&&e.add(a),a}};function NG(){return this._results[fo()]()}class i_{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=fo(),i=i_.prototype;i[t]||(i[t]=NG)}get changes(){return this._changes||(this._changes=new Le)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=gn(e);(this._changesDetected=!function $2(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let yi=(()=>{class n{}return n.__NG_ELEMENT_ID__=VG,n})();const FG=yi,LG=class extends FG{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=ud(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(r[19]=s.createEmbeddedView(i)),Dg(i,r,e),new fl(r)}};function VG(){return Ad(It(),D())}function Ad(n,e){return 4&n.type?new LG(e,n,Es(n,e)):null}let Rn=(()=>{class n{}return n.__NG_ELEMENT_ID__=BG,n})();function BG(){return kA(It(),D())}const UG=Rn,MA=class extends UG{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Es(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){const e=xm(this._hostTNode,this._hostLView);if(PD(e)){const t=zu(e,this._hostLView),i=$u(e);return new ps(t[1].data[i+8],t)}return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=RA(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,o;"number"==typeof i?r=i:null!=i&&(r=i.index,o=i.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,r),s}createComponent(e,t,i,r,o){const s=e&&!function Ja(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,i=d.injector,r=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?e:new pl(ve(e)),c=i||this.parentInjector;if(!o&&null==l.ngModule){const h=(s?c:this.parentInjector).get(fi,null);h&&(o=h)}const u=l.create(c,r,void 0,o);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[1];if(function u2(n){return Wn(n[3])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=i[3],h=new MA(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function kU(n,e,t,i){const r=10+i,o=t.length;i>0&&(t[r-1][4]=e),i<o-10?(e[4]=t[r],WD(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function OU(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,s,o);const a=Zm(o,s),l=i[11],c=Ju(l,s[7]);return null!==c&&function xU(n,e,t,i,r,o){i[0]=r,i[6]=e,al(n,i,t,1,r,o)}(r,s[6],l,i,c,a),e.attachToViewContainerRef(),WD(r_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=RA(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Ym(this._lContainer,t);i&&(Yu(r_(this._lContainer),t),vI(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Ym(this._lContainer,t);return i&&null!=Yu(r_(this._lContainer),t)?new fl(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function RA(n){return n[8]}function r_(n){return n[8]||(n[8]=[])}function kA(n,e){let t;const i=e[n.index];if(Wn(i))t=i;else{let r;if(8&n.type)r=Dt(i);else{const o=e[11];r=o.createComment("");const s=pn(n,e);ao(o,Ju(o,s),r,function LU(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=xS(i,e,r,n),hd(e,t)}return new MA(t,n,e)}class o_{constructor(e){this.queryList=e,this.matches=null}clone(){return new o_(this.queryList)}setDirty(){this.queryList.setDirty()}}class s_{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){const s=t.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new s_(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==BA(e,t).matches&&this.queries[t].setDirty()}}class OA{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class a_{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,null!==t?t.push(o):t=[o])}return null!==t?new a_(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class l_{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new l_(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];this.matchTNodeWithReadOption(e,t,$G(t,o)),this.matchTNodeWithReadOption(e,t,qu(t,e,o,!1,!1))}else i===yi?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,qu(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===rt||r===Rn||r===yi&&4&t.type)this.addMatch(t.index,-2);else{const o=qu(t,e,r,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function $G(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function GG(n,e,t,i){return-1===t?function zG(n,e){return 11&n.type?Es(n,e):4&n.type?Ad(n,e):null}(e,n):-2===t?function WG(n,e,t){return t===rt?Es(e,n):t===yi?Ad(e,n):t===Rn?kA(e,n):void 0}(n,e,i):fs(n,n[1],t,e)}function PA(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:GG(e,o[c],s[l+1],t.metadata.read))}r.matches=a}return r.matches}function c_(n,e,t,i){const r=n.queries.getByIndex(t),o=r.matches;if(null!==o){const s=PA(n,e,r,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)i.push(s[a/2]);else{const c=o[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&c_(h[1],h,c,i)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];c_(f[1],f,c,i)}}}}}return i}function u_(n){const e=D(),t=de(),i=DD();bm(i+1);const r=BA(t,i);if(n.dirty&&function c2(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const o=r.crossesNgTemplate?c_(t,e,i,[]):PA(t,e,r,i);n.reset(o,Aj),n.notifyOnChanges()}return!0}return!1}function d_(){return function qG(n,e){return n[19].queries[e].queryList}(D(),DD())}function LA(n,e,t){const i=new i_(4==(4&t));ES(n,e,i,i.destroy),null===e[19]&&(e[19]=new s_),e[19].queries.push(new o_(i))}function VA(n,e,t){null===n.queries&&(n.queries=new a_),n.queries.track(new l_(e,t))}function BA(n,e){return n.queries.getByIndex(e)}function Md(...n){}const Rd=new T("Application Initializer");let kd=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Md,this.reject=Md,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(_l(o))t.push(o);else if(Hg(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(C(Rd,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tl=new T("AppId",{providedIn:"root",factory:function rx(){return`${g_()}${g_()}${g_()}`}});function g_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ox=new T("Platform Initializer"),Od=new T("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sx=new T("appBootstrapListener"),Al=new T("AnimationModuleType");let mW=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const vi=new T("LocaleId",{providedIn:"root",factory:()=>X(vi,j.Optional|j.SkipSelf)||function gW(){return typeof $localize<"u"&&$localize.locale||Us}()});class yW{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let __=(()=>{class n{compileModuleSync(t){return new e_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),o=Gi(hn(t).declarations).reduce((s,a)=>{const l=ve(a);return l&&s.push(new pl(l)),s},[]);return new yW(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CW=(()=>Promise.resolve(0))();function y_(n){typeof Zone>"u"?CW.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ue{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1),typeof Zone>"u")throw new w(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function wW(){let n=xe.requestAnimationFrame,e=xe.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function IW(n){const e=()=>{!function DW(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(xe,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,b_(n),n.isCheckStableRunning=!0,v_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),b_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,o,s,a)=>{try{return cx(n),t.invokeTask(r,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),ux(n)}},onInvoke:(t,i,r,o,s,a,l)=>{try{return cx(n),t.invoke(r,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),ux(n)}},onHasTask:(t,i,r,o)=>{t.hasTask(r,o),i===r&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,b_(n),v_(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,i,r,o)=>(t.handleError(r,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ue.isInAngularZone())throw new w(909,!1)}static assertNotInAngularZone(){if(ue.isInAngularZone())throw new w(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,EW,Md,Md);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const EW={};function v_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function b_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function cx(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ux(n){n._nesting--,v_(n)}class SW{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const dx=new T(""),Pd=new T("");let E_,C_=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,E_||(function TW(n){E_=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ue.assertNotInAngularZone(),y_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())y_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(C(ue),C(w_),C(Pd))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})(),w_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return E_?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Er=null;const hx=new T("AllowMultipleToken"),D_=new T("PlatformDestroyListeners");class fx{constructor(e,t){this.name=e,this.token=t}}function mx(n,e,t=[]){const i=`Platform: ${e}`,r=new T(i);return(o=[])=>{let s=I_();if(!s||s.injector.get(hx,!1)){const a=[...t,...o,{provide:r,useValue:!0}];n?n(a):function MW(n){if(Er&&!Er.get(hx,!1))throw new w(400,!1);Er=n;const e=n.get(_x);(function px(n){const e=n.get(ox,null);e&&e.forEach(t=>t())})(n)}(function gx(n=[],e){return yt.create({name:e,providers:[{provide:hg,useValue:"platform"},{provide:D_,useValue:new Set([()=>Er=null])},...n]})}(a,i))}return function kW(n){const e=I_();if(!e)throw new w(401,!1);return e}()}}function I_(){return Er?.get(_x)??null}let _x=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function vx(n,e){let t;return t="noop"===n?new SW:("zone.js"===n?void 0:n)||new ue(e),t}(i?.ngZone,function yx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),o=[{provide:ue,useValue:r}];return r.run(()=>{const s=yt.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),l=a.injector.get(Ds,null);if(!l)throw new w(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Nd(this._modules,a),c.unsubscribe()})}),function bx(n,e,t){try{const i=t();return _l(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(kd);return c.runInitializers(),c.donePromise.then(()=>(function GT(n){In(n,"Expected localeId to be defined"),"string"==typeof n&&(zT=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(vi,Us)||Us),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=Cx({},i);return function AW(n,e,t){const i=new e_(t);return Promise.resolve(i)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(t){const i=t.injector.get(zs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new w(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new w(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(D_,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(C(yt))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Cx(n,e){return Array.isArray(e)?e.reduce(Cx,n):{...n,...e}}let zs=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Oe(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new Oe(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ue.assertNotInAngularZone(),y_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ue.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Zp(o,s.pipe(function SB(n={}){const{connector:e=(()=>new Ee),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return o=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const m=s;f(),m?.unsubscribe()};return qe((m,g)=>{c++,!d&&!u&&h();const _=l=l??e();g.add(()=>{c--,0===c&&!d&&!u&&(a=Jp(p,r))}),_.subscribe(g),!s&&c>0&&(s=new Ua({next:E=>_.next(E),error:E=>{d=!0,h(),a=Jp(f,t,E),_.error(E)},complete:()=>{u=!0,h(),a=Jp(f,i),_.complete()}}),Jt(m).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof eS;if(!this._injector.get(kd).done)throw!r&&function os(n){const e=ve(n)||Rt(n)||jt(n);return null!==e&&e.standalone}(t),new w(405,false);let s;s=r?t:this._injector.get(uo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function xW(n){return n.isBoundToModule}(s)?void 0:this._injector.get(js),c=s.create(yt.NULL,[],i||s.selector,a),u=c.location.nativeElement,d=c.injector.get(dx,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Nd(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new w(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Nd(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(sx,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Nd(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new w(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(C(ue),C(fi),C(Ds))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Nd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Fd=(()=>{class n{}return n.__NG_ELEMENT_ID__=PW,n})();function PW(n){return function NW(n,e,t){if(Pu(n)&&!t){const i=mn(n.index,e);return new fl(i,i)}return 47&n.type?new fl(e[16],e):null}(It(),D(),16==(16&n))}class Sx{constructor(){}supports(e){return ml(e)}create(e){return new jW(e)}}const UW=(n,e)=>e;class jW{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||UW}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){const s=!i||t&&t.currentIndex<Ax(i,r,o)?t:i,a=Ax(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{o||(o=[]);const c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;u<=p&&p<c&&(o[h]=f+1)}o[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!ml(e))throw new w(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,o,s,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),i=!0),t=t._next}else r=0,function u$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[fo()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{s=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,s)?(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new HW(t,i),o,r),e}_verifyReinsertion(e,t,i,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==o?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,o=e._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Tx),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Tx),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class HW{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $W{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class Tx{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new $W,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ax(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function Mx(){return new Bd([new Sx])}let Bd=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||Mx()),deps:[[n,new nl,new tl]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new w(901,!1)}}return n.\u0275prov=x({token:n,providedIn:"root",factory:Mx}),n})();const KW=mx(null,"core",[]);let YW=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(C(zs))},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({}),n})();function Gs(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Ud=null;function bi(){return Ud}class ZW{}const ce=new T("DocumentToken");let M_=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:function(){return function JW(){return C(kx)}()},providedIn:"platform"}),n})();const e4=new T("Location Initialized");let kx=(()=>{class n extends M_{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bi().getBaseHref(this._doc)}onPopState(t){const i=bi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=bi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){Ox()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){Ox()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=x({token:n,factory:function(){return function t4(){return new kx(C(ce))}()},providedIn:"platform"}),n})();function Ox(){return!!window.history.pushState}function R_(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Px(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ki(n){return n&&"?"!==n[0]?"?"+n:n}let vo=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:function(){return X(Fx)},providedIn:"root"}),n})();const Nx=new T("appBaseHref");let Fx=(()=>{class n extends vo{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??X(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return R_(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ki(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){const s=this.prepareExternalUrl(r+Ki(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){const s=this.prepareExternalUrl(r+Ki(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(C(M_),C(Nx,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),n4=(()=>{class n extends vo{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=R_(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+Ki(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+Ki(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(C(M_),C(Nx,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})(),Ml=(()=>{class n{constructor(t){this._subject=new Le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._baseHref=Px(Lx(i)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ki(i))}normalize(t){return n.stripTrailingSlash(function r4(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Lx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ki(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ki(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ki,n.joinWithSlash=R_,n.stripTrailingSlash=Px,n.\u0275fac=function(t){return new(t||n)(C(vo))},n.\u0275prov=x({token:n,factory:function(){return function i4(){return new Ml(C(vo))}()},providedIn:"root"}),n})();function Lx(n){return n.replace(/\/index.html$/,"")}function Wx(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,o]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}class $4{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yx=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new $4(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)i.remove(null===o?void 0:o);else if(null!==o){const a=i.get(o);i.move(a,s),Qx(a,r)}});for(let r=0,o=i.length;r<o;r++){const a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Qx(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(Rn),b(yi),b(Bd))},n.\u0275dir=V({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Qx(n,e){n.context.$implicit=e.item}let bo=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new G4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Xx("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Xx("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(b(Rn),b(yi))},n.\u0275dir=V({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class G4{constructor(){this.$implicit=null,this.ngIf=null}}function Xx(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ie(e)}'.`)}let C3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({}),n})();const eM="browser";let S3=(()=>{class n{}return n.\u0275prov=x({token:n,providedIn:"root",factory:()=>new T3(C(ce),window)}),n})();class T3{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function A3(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=tM(this.window.history)||tM(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function tM(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class nM{}class t8 extends ZW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class q_ extends t8{static makeCurrent(){!function XW(n){Ud||(Ud=n)}(new q_)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function n8(){return Pl=Pl||document.querySelector("base"),Pl?Pl.getAttribute("href"):null}();return null==t?null:function i8(n){Xd=Xd||document.createElement("a"),Xd.setAttribute("href",n);const e=Xd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Wx(document.cookie,e)}}let Xd,Pl=null;const lM=new T("TRANSITION_ID"),o8=[{provide:Rd,useFactory:function r8(n,e,t){return()=>{t.get(kd).donePromise.then(()=>{const i=bi(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<r.length;o++)i.remove(r[o])})}},deps:[lM,ce,yt],multi:!0}];let a8=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();const Zd=new T("EventManagerPlugins");let Jd=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(C(Zd),C(ue))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();class cM{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=bi().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let uM=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})(),Nl=(()=>{class n extends uM{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(i.appendChild(s))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(dM),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(dM))}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();function dM(n){bi().remove(n)}const K_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Y_=/%COMP%/g;function eh(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?eh(n,r,t):(r=r.replace(Y_,n),t.push(r))}return t}function pM(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let th=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Q_(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case zn.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new f8(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case zn.ShadowDom:return new p8(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=eh(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(C(Jd),C(Nl),C(Tl))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();class Q_{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(K_[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(gM(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(gM(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const o=K_[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=K_[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(nn.DashCase|nn.Important)?e.style.setProperty(t,i,r&nn.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&nn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,pM(i)):this.eventManager.addEventListener(e,t,pM(i))}}function gM(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class f8 extends Q_{constructor(e,t,i,r){super(e),this.component=i;const o=eh(r+"-"+i.id,i.styles,[]);t.addStyles(o),this.contentAttr=function u8(n){return"_ngcontent-%COMP%".replace(Y_,n)}(r+"-"+i.id),this.hostAttr=function d8(n){return"_nghost-%COMP%".replace(Y_,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class p8 extends Q_{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=eh(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let m8=(()=>{class n extends cM{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();const _M=["alt","control","meta","shift"],g8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_8={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let y8=(()=>{class n extends cM{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const o=n._normalizeKey(i.pop());let s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),_M.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,0!=i.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=g8[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),_M.forEach(s=>{s!==r&&(0,_8[s])(t)&&(o+=s+".")}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();const w8=mx(KW,"browser",[{provide:Od,useValue:eM},{provide:ox,useValue:function v8(){q_.makeCurrent()},multi:!0},{provide:ce,useFactory:function C8(){return function GU(n){ng=n}(document),document},deps:[]}]),bM=new T(""),CM=[{provide:Pd,useClass:class s8{addToWindow(e){xe.getAngularTestability=(i,r=!0)=>{const o=e.findTestabilityInTree(i,r);if(null==o)throw new Error("Could not find testability for element.");return o},xe.getAllAngularTestabilities=()=>e.getAllTestabilities(),xe.getAllAngularRootElements=()=>e.getAllRootElements(),xe.frameworkStabilizers||(xe.frameworkStabilizers=[]),xe.frameworkStabilizers.push(i=>{const r=xe.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&i(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?bi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:dx,useClass:C_,deps:[ue,w_,Pd]},{provide:C_,useClass:C_,deps:[ue,w_,Pd]}],wM=[{provide:hg,useValue:"root"},{provide:Ds,useFactory:function b8(){return new Ds},deps:[]},{provide:Zd,useClass:m8,multi:!0,deps:[ce,ue,Od]},{provide:Zd,useClass:y8,multi:!0,deps:[ce]},{provide:th,useClass:th,deps:[Jd,Nl,Tl]},{provide:dl,useExisting:th},{provide:uM,useExisting:Nl},{provide:Nl,useClass:Nl,deps:[ce]},{provide:Jd,useClass:Jd,deps:[Zd,ue]},{provide:nM,useClass:a8,deps:[]},[]];let EM=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Tl,useValue:t.appId},{provide:lM,useExisting:Tl},o8]}}}return n.\u0275fac=function(t){return new(t||n)(C(bM,12))},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({providers:[...wM,...CM],imports:[C3,YW]}),n})(),DM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=x({token:n,factory:function(t){let i=null;return i=t?new t:function D8(){return new DM(C(ce))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;const{isArray:k8}=Array,{getPrototypeOf:O8,prototype:P8,keys:N8}=Object;function TM(n){if(1===n.length){const e=n[0];if(k8(e))return{args:e,keys:null};if(function F8(n){return n&&"object"==typeof n&&O8(n)===P8}(e)){const t=N8(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:L8}=Array;function J_(n){return Q(e=>function V8(n,e){return L8(e)?n(...e):n(e)}(n,e))}function AM(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}let xM=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(b(zi),b(rt))},n.\u0275dir=V({type:n}),n})(),Co=(()=>{class n extends xM{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=St(n)))(i||n)}}(),n.\u0275dir=V({type:n,features:[fe]}),n})();const Ci=new T("NgValueAccessor"),j8={provide:Ci,useExisting:Te(()=>Ws),multi:!0},$8=new T("CompositionEventMode");let Ws=(()=>{class n extends xM{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function H8(){const n=bi()?bi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(b(zi),b(rt),b($8,8))},n.\u0275dir=V({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&Ye("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Be([j8]),fe]}),n})();function Ir(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function RM(n){return null!=n&&"number"==typeof n.length}const Lt=new T("NgValidators"),Sr=new T("NgAsyncValidators"),G8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wo{static min(e){return function kM(n){return e=>{if(Ir(e.value)||Ir(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function OM(n){return e=>{if(Ir(e.value)||Ir(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return PM(e)}static requiredTrue(e){return function NM(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function FM(n){return Ir(n.value)||G8.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function LM(n){return e=>Ir(e.value)||!RM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function VM(n){return e=>RM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function BM(n){if(!n)return nh;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Ir(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return GM(e)}static composeAsync(e){return WM(e)}}function PM(n){return Ir(n.value)?{required:!0}:null}function nh(n){return null}function UM(n){return null!=n}function jM(n){return _l(n)?nt(n):n}function HM(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function $M(n,e){return e.map(t=>t(n))}function zM(n){return n.map(e=>function W8(n){return!n.validate}(e)?e:t=>e.validate(t))}function GM(n){if(!n)return null;const e=n.filter(UM);return 0==e.length?null:function(t){return HM($M(t,e))}}function ey(n){return null!=n?GM(zM(n)):null}function WM(n){if(!n)return null;const e=n.filter(UM);return 0==e.length?null:function(t){return function B8(...n){const e=q0(n),{args:t,keys:i}=TM(n),r=new Oe(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Jt(t[u]).subscribe(Ve(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?AM(i,a):a),o.complete())}))}});return e?r.pipe(J_(e)):r}($M(t,e).map(jM)).pipe(Q(HM))}}function ty(n){return null!=n?WM(zM(n)):null}function qM(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function KM(n){return n._rawValidators}function YM(n){return n._rawAsyncValidators}function ny(n){return n?Array.isArray(n)?n:[n]:[]}function ih(n,e){return Array.isArray(n)?n.includes(e):n===e}function QM(n,e){const t=ny(e);return ny(n).forEach(r=>{ih(t,r)||t.push(r)}),t}function XM(n,e){return ny(e).filter(t=>!ih(n,t))}class ZM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ey(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ty(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Kt extends ZM{get formDirective(){return null}get path(){return null}}class Tr extends ZM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class JM{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let rh=(()=>{class n extends JM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(b(Tr,2))},n.\u0275dir=V({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Vs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[fe]}),n})(),oh=(()=>{class n extends JM{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(b(Kt,10))},n.\u0275dir=V({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&Vs("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[fe]}),n})();const Fl="VALID",ah="INVALID",qs="PENDING",Ll="DISABLED";function sy(n){return(lh(n)?n.validators:n)||null}function ay(n,e){return(lh(e)?e.asyncValidators:n)||null}function lh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function tR(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new w(1e3,"");if(!i[t])throw new w(1001,"")}function nR(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new w(1002,"")})}class ch{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Fl}get invalid(){return this.status===ah}get pending(){return this.status==qs}get disabled(){return this.status===Ll}get enabled(){return this.status!==Ll}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(QM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(QM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XM(e,this._rawAsyncValidators))}hasValidator(e){return ih(this._rawValidators,e)}hasAsyncValidator(e){return ih(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=qs,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ll,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Fl,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fl||this.status===qs)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ll:Fl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=qs,this._hasOwnPendingAsyncValidator=!0;const t=jM(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?Ll:this.errors?ah:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qs)?qs:this._anyControlsHaveStatus(ah)?ah:Fl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function J8(n){return Array.isArray(n)?ey(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function eq(n){return Array.isArray(n)?ty(n):n||null}(this._rawAsyncValidators)}}class Vl extends ch{constructor(e,t,i){super(sy(t),ay(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nR(this,0,e),Object.keys(e).forEach(i=>{tR(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,o)=>{i=t(i,r,o)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class iR extends Vl{}const Ks=new T("CallSetDisabledState",{providedIn:"root",factory:()=>uh}),uh="always";function dh(n,e){return[...e.path,n]}function Bl(n,e,t=uh){ly(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function nq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&rR(n,e)})}(n,e),function rq(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function iq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&rR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tq(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hh(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),ph(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function fh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ly(n,e){const t=KM(n);null!==e.validator?n.setValidators(qM(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=YM(n);null!==e.asyncValidator?n.setAsyncValidators(qM(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();fh(e._rawValidators,r),fh(e._rawAsyncValidators,r)}function ph(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=KM(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.validator);o.length!==r.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const r=YM(n);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(t=!0,n.setAsyncValidators(o))}}}const i=()=>{};return fh(e._rawValidators,i),fh(e._rawAsyncValidators,i),t}function rR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function oR(n,e){ly(n,e)}function uy(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function sR(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function dy(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(o=>{o.constructor===Ws?t=o:function aq(n){return Object.getPrototypeOf(n.constructor)===Co}(o)?i=o:r=o}),r||i||t||null}const cq={provide:Kt,useExisting:Te(()=>mh)},Ul=(()=>Promise.resolve())();let mh=(()=>{class n extends Kt{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Le,this.form=new Vl({},ey(t),ty(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ul.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Bl(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ul.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ul.then(()=>{const i=this._findContainer(t.path),r=new Vl({});oR(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ul.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Ul.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,sR(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(b(Lt,10),b(Sr,10),b(Ks,8))},n.\u0275dir=V({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&Ye("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Be([cq]),fe]}),n})();function aR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function lR(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const jl=class extends ch{constructor(e=null,t,i){super(sy(t),ay(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=lR(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){lR(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},hq={provide:Tr,useExisting:Te(()=>hy)},dR=(()=>Promise.resolve())();let hy=(()=>{class n extends Tr{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new jl,this._registered=!1,this.update=new Le,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=dy(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),uy(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Bl(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){dR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&Gs(i);dR.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?dh(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(b(Kt,9),b(Lt,10),b(Sr,10),b(Ci,10),b(Fd,8),b(Ks,8))},n.\u0275dir=V({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Be([hq]),fe,Tn]}),n})(),gh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=V({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),fR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({}),n})();const fy=new T("NgModelWithFormControlWarning"),yq={provide:Kt,useExisting:Te(()=>Hl)};let Hl=(()=>{class n extends Kt{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Le,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ph(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Bl(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){hh(t.control||null,t,!1),function lq(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,sR(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(hh(i||null,t),(n=>n instanceof jl)(r)&&(Bl(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);oR(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function oq(n,e){return ph(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ly(this.form,this),this._oldForm&&ph(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(b(Lt,10),b(Sr,10),b(Ks,8))},n.\u0275dir=V({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&Ye("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Be([yq]),fe,Tn]}),n})();const Cq={provide:Tr,useExisting:Te(()=>_h)};let _h=(()=>{class n extends Tr{constructor(t,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new Le,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=dy(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),uy(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return dh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(b(Kt,13),b(Lt,10),b(Sr,10),b(Ci,10),b(fy,8))},n.\u0275dir=V({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Be([Cq]),fe,Tn]}),n})(),Eo=(()=>{class n{constructor(){this._validator=nh}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):nh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=V({type:n,features:[Tn]}),n})();const Mq={provide:Lt,useExisting:Te(()=>yh),multi:!0};let yh=(()=>{class n extends Eo{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Gs,this.createValidator=t=>PM}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=St(n)))(i||n)}}(),n.\u0275dir=V({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&Mn("required",i._enabled?"":null)},inputs:{required:"required"},features:[Be([Mq]),fe]}),n})(),xR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[fR]}),n})(),Fq=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ks,useValue:t.callSetDisabledState??uh}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[xR]}),n})(),MR=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fy,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ks,useValue:t.callSetDisabledState??uh}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[xR]}),n})();class RR extends ch{constructor(e,t,i){super(sy(t),ay(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){nR(this,0,e),e.forEach((i,r)=>{tR(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function kR(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let OR=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let o={};return kR(i)?o=i:null!==i&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Vl(r,o)}record(t,i=null){const r=this._reduceControls(t);return new iR(r,i)}control(t,i,r){let o={};return this.useNonNullable?(kR(i)?o=i:(o.validators=i,o.asyncValidators=r),new jl(t,{...o,nonNullable:!0})):new jl(t,i,r)}array(t,i,r){const o=t.map(s=>this._createControl(s));return new RR(o,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof jl||t instanceof ch?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:MR}),n})();function N(...n){return nt(n,ja(n))}function Ar(n,e){return he(e)?_t(n,e,1):_t(n,1)}function Yt(n,e){return qe((t,i)=>{let r=0;t.subscribe(Ve(i,o=>n.call(e,o,r++)&&i.next(o)))})}class vh{}class yy{}class Qi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Qi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Qi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Qi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const o=e.value;if(o){let s=this.headers.get(t);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Lq{encodeKey(e){return PR(e)}encodeValue(e){return PR(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Bq=/%(\d[a-f0-9])/gi,Uq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function PR(n){return encodeURIComponent(n).replace(Bq,(e,t)=>Uq[t]??e)}function bh(n){return`${n}`}class xr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Lq,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Vq(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(bh):[bh(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new xr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(bh(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(bh(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class jq{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function NR(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function FR(n){return typeof Blob<"u"&&n instanceof Blob}function LR(n){return typeof FormData<"u"&&n instanceof FormData}class $l{constructor(e,t,i,r){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Hq(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Qi),this.context||(this.context=new jq),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+s}}else this.params=new xr,this.urlWithParams=t}serializeBody(){return null===this.body?null:NR(this.body)||FR(this.body)||LR(this.body)||function $q(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof xr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||LR(this.body)?null:FR(this.body)?this.body.type||null:NR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof xr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,s=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new $l(t,i,o,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:s})}}var at=(()=>((at=at||{})[at.Sent=0]="Sent",at[at.UploadProgress=1]="UploadProgress",at[at.ResponseHeader=2]="ResponseHeader",at[at.DownloadProgress=3]="DownloadProgress",at[at.Response=4]="Response",at[at.User=5]="User",at))();class vy{constructor(e,t=200,i="OK"){this.headers=e.headers||new Qi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class by extends vy{constructor(e={}){super(e),this.type=at.ResponseHeader}clone(e={}){return new by({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ch extends vy{constructor(e={}){super(e),this.type=at.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ch({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class VR extends vy{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Cy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let zq=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof $l)o=t;else{let l,c;l=r.headers instanceof Qi?r.headers:new Qi(r.headers),r.params&&(c=r.params instanceof xr?r.params:new xr({fromObject:r.params})),o=new $l(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=N(o).pipe(Ar(l=>this.handler.handle(l)));if(t instanceof $l||"events"===r.observe)return s;const a=s.pipe(Yt(l=>l instanceof Ch));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Q(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Q(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Q(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new xr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,Cy(r,i))}post(t,i,r={}){return this.request("POST",t,Cy(r,i))}put(t,i,r={}){return this.request("PUT",t,Cy(r,i))}}return n.\u0275fac=function(t){return new(t||n)(C(vh))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();function BR(n,e){return e(n)}function Gq(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const qq=new T("HTTP_INTERCEPTORS"),zl=new T("HTTP_INTERCEPTOR_FNS");function Kq(){let n=null;return(e,t)=>(null===n&&(n=(X(qq,{optional:!0})??[]).reduceRight(Gq,BR)),n(e,t))}let UR=(()=>{class n extends vh{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=Array.from(new Set(this.injector.get(zl)));this.chain=i.reduceRight((r,o)=>function Wq(n,e,t){return(i,r)=>t.runInContext(()=>e(i,o=>n(o,r)))}(r,o,this.injector),BR)}return this.chain(t,i=>this.backend.handle(i))}}return n.\u0275fac=function(t){return new(t||n)(C(yy),C(fi))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();const Zq=/^\)\]\}',?\n/;let HR=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Oe(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((f,p)=>r.setRequestHeader(f,p.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&r.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();r.responseType="json"!==f?f:"text"}const o=t.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const f=r.statusText||"OK",p=new Qi(r.getAllResponseHeaders()),m=function Jq(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return s=new by({headers:p,status:r.status,statusText:f,url:m}),s},l=()=>{let{headers:f,status:p,statusText:m,url:g}=a(),_=null;204!==p&&(_=typeof r.response>"u"?r.responseText:r.response),0===p&&(p=_?200:0);let E=p>=200&&p<300;if("json"===t.responseType&&"string"==typeof _){const y=_;_=_.replace(Zq,"");try{_=""!==_?JSON.parse(_):null}catch(I){_=y,E&&(E=!1,_={error:I,text:_})}}E?(i.next(new Ch({body:_,headers:f,status:p,statusText:m,url:g||void 0})),i.complete()):i.error(new VR({error:_,headers:f,status:p,statusText:m,url:g||void 0}))},c=f=>{const{url:p}=a(),m=new VR({error:f,status:r.status||0,statusText:r.statusText||"Unknown Error",url:p||void 0});i.error(m)};let u=!1;const d=f=>{u||(i.next(a()),u=!0);let p={type:at.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),"text"===t.responseType&&!!r.responseText&&(p.partialText=r.responseText),i.next(p)},h=f=>{let p={type:at.UploadProgress,loaded:f.loaded};f.lengthComputable&&(p.total=f.total),i.next(p)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),t.reportProgress&&(r.addEventListener("progress",d),null!==o&&r.upload&&r.upload.addEventListener("progress",h)),r.send(o),i.next({type:at.Sent}),()=>{r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),t.reportProgress&&(r.removeEventListener("progress",d),null!==o&&r.upload&&r.upload.removeEventListener("progress",h)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(C(nM))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();const wy=new T("XSRF_ENABLED"),$R="XSRF-TOKEN",zR=new T("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>$R}),GR="X-XSRF-TOKEN",WR=new T("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>GR});class qR{}let e5=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Wx(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(Od),C(zR))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();function t5(n,e){const t=n.url.toLowerCase();if(!X(wy)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=X(qR).getToken(),r=X(WR);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var et=(()=>((et=et||{})[et.Interceptors=0]="Interceptors",et[et.LegacyInterceptors=1]="LegacyInterceptors",et[et.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",et[et.NoXsrfProtection=3]="NoXsrfProtection",et[et.JsonpSupport=4]="JsonpSupport",et[et.RequestsMadeViaParent=5]="RequestsMadeViaParent",et))();function Ys(n,e){return{\u0275kind:n,\u0275providers:e}}function n5(...n){const e=[zq,HR,UR,{provide:vh,useExisting:UR},{provide:yy,useExisting:HR},{provide:zl,useValue:t5,multi:!0},{provide:wy,useValue:!0},{provide:qR,useClass:e5}];for(const t of n)e.push(...t.\u0275providers);return function pj(n){return{\u0275providers:n}}(e)}const KR=new T("LEGACY_INTERCEPTOR_FN");function o5({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:zR,useValue:n}),void 0!==e&&t.push({provide:WR,useValue:e}),Ys(et.CustomXsrfConfiguration,t)}let s5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({providers:[n5(Ys(et.LegacyInterceptors,[{provide:KR,useFactory:Kq},{provide:zl,useExisting:KR,multi:!0}]),o5({cookieName:$R,headerName:GR}))]}),n})();class Pn extends Ee{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const wh=Ba(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ey(...n){const e=ja(n),t=q0(n),{args:i,keys:r}=TM(n);if(0===i.length)return nt([],e);const o=new Oe(function a5(n,e,t=_r){return i=>{YR(e,()=>{const{length:r}=n,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)YR(e,()=>{const c=nt(n[l],e);let u=!1;c.subscribe(Ve(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}(i,e,r?s=>AM(r,s):_r));return t?o.pipe(J_(t)):o}function YR(n,e,t){n?Fi(t,n,e):e()}function Eh(...n){return function l5(){return is(1)}()(nt(n,ja(n)))}function Dh(n){return new Oe(e=>{Jt(n()).subscribe(e)})}function Gl(n,e){const t=he(n)?n:()=>n,i=r=>r.error(t());return new Oe(e?r=>e.schedule(i,0,r):i)}function Dy(){return qe((n,e)=>{let t=null;n._refCount++;const i=Ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class QR extends Oe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,k0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gt;const t=this.getSubject();e.add(this.source.subscribe(Ve(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gt.EMPTY)}return e}refCount(){return Dy()(this)}}function wi(n,e){return qe((t,i)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&i.complete();t.subscribe(Ve(i,l=>{r?.unsubscribe();let c=0;const u=o++;Jt(n(l,u)).subscribe(r=Ve(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function ei(n){return n<=0?()=>Li:qe((e,t)=>{let i=0;e.subscribe(Ve(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Ih(...n){const e=ja(n);return qe((t,i)=>{(e?Eh(n,t,e):Eh(n,t)).subscribe(i)})}function Sh(n){return qe((e,t)=>{let i=!1;e.subscribe(Ve(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function XR(n=c5){return qe((e,t)=>{let i=!1;e.subscribe(Ve(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function c5(){return new wh}function Mr(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Yt((r,o)=>n(r,o,i)):_r,ei(1),t?Sh(e):XR(()=>new wh))}function Vt(n,e,t){const i=he(n)||e||t?{next:n,error:e,complete:t}:n;return i?qe((r,o)=>{var s;null===(s=i.subscribe)||void 0===s||s.call(i);let a=!0;r.subscribe(Ve(o,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),o.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),o.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),o.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):_r}function Rr(n){return qe((e,t)=>{let o,i=null,r=!1;i=e.subscribe(Ve(t,void 0,void 0,s=>{o=Jt(n(s,Rr(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function u5(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(Ve(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function ZR(n,e){return qe(u5(n,e,arguments.length>=2,!0))}function Iy(n){return n<=0?()=>Li:qe((e,t)=>{let i=[];e.subscribe(Ve(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function JR(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Yt((r,o)=>n(r,o,i)):_r,Iy(1),t?Sh(e):XR(()=>new wh))}function Sy(n){return qe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ie="primary",Wl=Symbol("RouteTitle");class f5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Qs(n){return new f5(n)}function p5(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let o=0;o<i.length;o++){const s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ei(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!ek(n[r],e[r]))return!1;return!0}function ek(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}return n===e}function tk(n){return Array.prototype.concat.apply([],n)}function nk(n){return n.length>0?n[n.length-1]:null}function Tt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function kr(n){return Hg(n)?n:_l(n)?nt(Promise.resolve(n)):N(n)}const Th=!1,g5={exact:function ok(n,e,t){if(!Io(n.segments,e.segments)||!Ah(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!ok(n.children[i],e.children[i],t))return!1;return!0},subset:sk},ik={exact:function _5(n,e){return Ei(n,e)},subset:function y5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ek(n[t],e[t]))},ignored:()=>!0};function rk(n,e,t){return g5[t.paths](n.root,e.root,t.matrixParams)&&ik[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function sk(n,e,t){return ak(n,e,e.segments,t)}function ak(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Io(r,t)||e.hasChildren()||!Ah(r,t,i))}if(n.segments.length===t.length){if(!Io(n.segments,t)||!Ah(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!sk(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Io(n.segments,r)&&Ah(n.segments,r,i)&&n.children[ie])&&ak(n.children[ie],e,o,i)}}function Ah(n,e,t){return e.every((i,r)=>ik[t](n[r].parameters,i.parameters))}class Do{constructor(e=new se([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qs(this.queryParams)),this._queryParamMap}toString(){return C5.serialize(this)}}class se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Tt(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xh(this)}}class ql{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Qs(this.parameters)),this._parameterMap}toString(){return uk(this)}}function Io(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Kl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:function(){return new Ty},providedIn:"root"}),n})();class Ty{parse(e){const t=new M5(e);return new Do(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Yl(e.root,!0)}`,i=function D5(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Mh(t)}=${Mh(r)}`).join("&"):`${Mh(t)}=${Mh(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function w5(n){return encodeURI(n)}(e.fragment)}`:""}`}}const C5=new Ty;function xh(n){return n.segments.map(e=>uk(e)).join("/")}function Yl(n,e){if(!n.hasChildren())return xh(n);if(e){const t=n.children[ie]?Yl(n.children[ie],!1):"",i=[];return Tt(n.children,(r,o)=>{o!==ie&&i.push(`${o}:${Yl(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function b5(n,e){let t=[];return Tt(n.children,(i,r)=>{r===ie&&(t=t.concat(e(i,r)))}),Tt(n.children,(i,r)=>{r!==ie&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===ie?[Yl(n.children[ie],!1)]:[`${r}:${Yl(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ie]?`${xh(n)}/${t[0]}`:`${xh(n)}/(${t.join("//")})`}}function lk(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mh(n){return lk(n).replace(/%3B/gi,";")}function Ay(n){return lk(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rh(n){return decodeURIComponent(n)}function ck(n){return Rh(n.replace(/\+/g,"%20"))}function uk(n){return`${Ay(n.path)}${function E5(n){return Object.keys(n).map(e=>`;${Ay(e)}=${Ay(n[e])}`).join("")}(n.parameters)}`}const I5=/^[^\/()?;=#]+/;function kh(n){const e=n.match(I5);return e?e[0]:""}const S5=/^[^=?&#]+/,A5=/^[^&#]+/;class M5{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ie]=new se(e,t)),i}parseSegment(){const e=kh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new w(4009,Th);return this.capture(e),new ql(Rh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=kh(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=kh(this.remaining);r&&(i=r,this.capture(i))}e[Rh(t)]=Rh(i)}parseQueryParam(e){const t=function T5(n){const e=n.match(S5);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const s=function x5(n){const e=n.match(A5);return e?e[0]:""}(this.remaining);s&&(i=s,this.capture(i))}const r=ck(t),o=ck(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=kh(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new w(4010,Th);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ie);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ie]:new se([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new w(4011,Th)}}function xy(n){return n.segments.length>0?new se([],{[ie]:n}):n}function Oh(n){const e={};for(const i of Object.keys(n.children)){const o=Oh(n.children[i]);(o.segments.length>0||o.hasChildren())&&(e[i]=o)}return function R5(n){if(1===n.numberOfChildren&&n.children[ie]){const e=n.children[ie];return new se(n.segments.concat(e.segments),e.children)}return n}(new se(n.segments,e))}function So(n){return n instanceof Do}function P5(n,e,t,i,r){if(0===t.length)return Xs(e.root,e.root,e.root,i,r);const o=function fk(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new hk(!0,0,n);let e=0,t=!1;const i=n.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Tt(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new hk(t,e,i)}(t);return o.toRoot()?Xs(e.root,e.root,new se([],{}),i,r):function s(l){const c=function F5(n,e,t,i){if(n.isAbsolute)return new Zs(e.root,!0,0);if(-1===i)return new Zs(t,t===e.root,0);return function pk(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new w(4005,!1);r=i.segments.length}return new Zs(i,!1,r-o)}(t,i+(Ql(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,l),u=c.processChildren?Zl(c.segmentGroup,c.index,o.commands):Ry(c.segmentGroup,c.index,o.commands);return Xs(e.root,c.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function Ql(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xl(n){return"object"==typeof n&&null!=n&&n.outlets}function Xs(n,e,t,i,r){let s,o={};i&&Tt(i,(l,c)=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:dk(n,e,t);const a=xy(Oh(s));return new Do(a,o,r)}function dk(n,e,t){const i={};return Tt(n.children,(r,o)=>{i[o]=r===e?t:dk(r,e,t)}),new se(n.segments,i)}class hk{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Ql(i[0]))throw new w(4003,!1);const r=i.find(Xl);if(r&&r!==nk(i))throw new w(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zs{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function Ry(n,e,t){if(n||(n=new se([],{})),0===n.segments.length&&n.hasChildren())return Zl(n,e,t);const i=function V5(n,e,t){let i=0,r=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;const s=n.segments[r],a=t[i];if(Xl(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!gk(l,c,s))return o;i+=2}else{if(!gk(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const o=new se(n.segments.slice(0,i.pathIndex),{});return o.children[ie]=new se(n.segments.slice(i.pathIndex),n.children),Zl(o,0,r)}return i.match&&0===r.length?new se(n.segments,{}):i.match&&!n.hasChildren()?ky(n,e,t):i.match?Zl(n,0,r):ky(n,e,t)}function Zl(n,e,t){if(0===t.length)return new se(n.segments,{});{const i=function L5(n){return Xl(n[0])?n[0].outlets:{[ie]:n}}(t),r={};return Tt(i,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=Ry(n.children[s],e,o))}),Tt(n.children,(o,s)=>{void 0===i[s]&&(r[s]=o)}),new se(n.segments,r)}}function ky(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const o=t[r];if(Xl(o)){const l=B5(o.outlets);return new se(i,l)}if(0===r&&Ql(t[0])){i.push(new ql(n.segments[e].path,mk(t[0]))),r++;continue}const s=Xl(o)?o.outlets[ie]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&Ql(a)?(i.push(new ql(s,mk(a))),r+=2):(i.push(new ql(s,{})),r++)}return new se(i,{})}function B5(n){const e={};return Tt(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=ky(new se([],{}),0,t))}),e}function mk(n){const e={};return Tt(n,(t,i)=>e[i]=`${t}`),e}function gk(n,e,t){return n==t.path&&Ei(e,t.parameters)}class Xi{constructor(e,t){this.id=e,this.url=t}}class Oy extends Xi{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class To extends Xi{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ph extends Xi{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _k extends Xi{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class U5 extends Xi{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class j5 extends Xi{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H5 extends Xi{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $5 extends Xi{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class z5 extends Xi{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G5{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class W5{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class q5{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K5{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yk{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class vk{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Py(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=Py(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ny(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Ny(e,this._root).map(t=>t.value)}}function Py(n,e){if(n===e.value)return e;for(const t of e.children){const i=Py(n,t);if(i)return i}return null}function Ny(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Ny(n,t);if(i.length)return i.unshift(e),i}return[]}class Zi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Js(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bk extends vk{constructor(e,t){super(e),this.snapshot=t,Fy(this,e)}toString(){return this.snapshot.toString()}}function Ck(n,e){const t=function Z5(n,e){const s=new Nh([],{},{},"",{},ie,e,null,n.root,-1,{});return new Ek("",new Zi(s,[]))}(n,e),i=new Pn([new ql("",{})]),r=new Pn({}),o=new Pn({}),s=new Pn({}),a=new Pn(""),l=new Or(i,r,s,a,o,ie,e,t.root);return l.snapshot=t.root,new bk(new Zi(l,[]),t)}class Or{constructor(e,t,i,r,o,s,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(Q(c=>c[Wl]))??N(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Q(e=>Qs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Q(e=>Qs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wk(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],o=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(o.component)break;i--}}return function J5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Nh{constructor(e,t,i,r,o,s,a,l,c,u,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=d}get title(){return this.data?.[Wl]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ek extends vk{constructor(e,t){super(t),this.url=e,Fy(this,t)}toString(){return Dk(this._root)}}function Fy(n,e){e.value._routerState=n,e.children.forEach(t=>Fy(n,t))}function Dk(n){const e=n.children.length>0?` { ${n.children.map(Dk).join(", ")} } `:"";return`${n.value}${e}`}function Ly(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ei(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ei(e.params,t.params)||n.params.next(t.params),function m5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ei(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ei(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Vy(n,e){const t=Ei(n.params,e.params)&&function v5(n,e){return Io(n,e)&&n.every((t,i)=>Ei(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Vy(n.parent,e.parent))}function Jl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function t6(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Jl(n,i,r);return Jl(n,i)})}(n,e,t);return new Zi(i,r)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Jl(n,a)),s}}const i=function n6(n){return new Or(new Pn(n.url),new Pn(n.params),new Pn(n.queryParams),new Pn(n.fragment),new Pn(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(o=>Jl(n,o));return new Zi(i,r)}}const By="ngNavigationCancelingError";function Ik(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=So(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Sk(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function Sk(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[By]=!0,i.cancellationCode=e,t&&(i.url=t),i}function Tk(n){return Ak(n)&&So(n.url)}function Ak(n){return n&&n[By]}class i6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ea,this.attachRef=null}}let ea=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new i6,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fh=!1;let Uy=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ie,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=X(ea),this.location=X(Rn),this.changeDetector=X(Fd),this.environmentInjector=X(fi)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w(4012,Fh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w(4012,Fh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w(4012,Fh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new w(4013,Fh);this._activatedRoute=t;const r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new r6(t,a,r.injector);if(i&&function o6(n){return!!n.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(s);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=V({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Tn]}),n})();class r6{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Or?this.route:e===ea?this.childContexts:this.parent.get(e,t)}}let jy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=en({type:n,selectors:[["ng-component"]],standalone:!0,features:[yA],decls:1,vars:0,template:function(t,i){1&t&&Gt(0,"router-outlet")},dependencies:[Uy],encapsulation:2}),n})();function xk(n,e){return n.providers&&!n._injector&&(n._injector=Td(n.providers,e,`Route: ${n.path}`)),n._injector??e}function $y(n){const e=n.children&&n.children.map($y),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=jy),t}function Nn(n){return n.outlet||ie}function Mk(n,e){const t=n.filter(i=>Nn(i)===e);return t.push(...n.filter(i=>Nn(i)!==e)),t}function ec(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class u6{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Ly(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Js(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Tt(r,(o,s)=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(r===o)if(r.component){const s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Js(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(i&&i.outlet){const s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=Js(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Js(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Q5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new K5(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,o=t?t.value:null;if(Ly(r),r===o)if(r.component){const s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ly(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=ec(r.snapshot),l=a?.get(uo)??null;s.attachRef=null,s.route=r,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}}class Rk{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Lh{constructor(e,t){this.component=e,this.route=t}}function d6(n,e,t){const i=n._root;return tc(i,e?e._root:null,t,[i.value])}function ta(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function OB(n){return null!==Du(n)}(n)?e.get(n):n:i}function tc(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Js(e);return n.children.forEach(s=>{(function f6(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function p6(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Io(n.url,e.url)||!Ei(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vy(n,e)||!Ei(n.queryParams,e.queryParams);default:return!Vy(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Rk(i)):(o.data=s.data,o._resolvedData=s._resolvedData),tc(n,e,o.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Lh(a.outlet.component,s))}else s&&nc(e,a,r),r.canActivateChecks.push(new Rk(i)),tc(n,null,o.component?a?a.children:null:t,i,r)})(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Tt(o,(s,a)=>nc(s,t.getContext(a),r)),r}function nc(n,e,t){const i=Js(n),r=n.value;Tt(i,(o,s)=>{nc(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Lh(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function ic(n){return"function"==typeof n}function zy(n){return n instanceof wh||"EmptyError"===n?.name}const Vh=Symbol("INITIAL_VALUE");function na(){return wi(n=>Ey(n.map(e=>e.pipe(ei(1),Ih(Vh)))).pipe(Q(e=>{for(const t of e)if(!0!==t){if(t===Vh)return Vh;if(!1===t||t instanceof Do)return t}return!0}),Yt(e=>e!==Vh),ei(1)))}function kk(n){return function eB(...n){return x0(n)}(Vt(e=>{if(So(e))throw Ik(0,e)}),Q(e=>!0===e))}const Gy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ok(n,e,t,i,r){const o=Wy(n,e,t);return o.matched?function R6(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?N(r.map(s=>{const a=ta(s,n);return kr(function b6(n){return n&&ic(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(na(),kk()):N(!0)}(i=xk(e,i),e,t).pipe(Q(s=>!0===s?o:{...Gy})):N(o)}function Wy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Gy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||p5)(t,n,e);if(!r)return{...Gy};const o={};Tt(r.posParams,(a,l)=>{o[l]=a.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Bh(n,e,t,i){if(t.length>0&&function P6(n,e,t){return t.some(i=>Uh(n,e,i)&&Nn(i)!==ie)}(n,t,i)){const o=new se(e,function O6(n,e,t,i){const r={};r[ie]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Nn(o)!==ie){const s=new se([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,r[Nn(o)]=s}return r}(n,e,i,new se(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function N6(n,e,t){return t.some(i=>Uh(n,e,i))}(n,t,i)){const o=new se(n.segments,function k6(n,e,t,i,r){const o={};for(const s of i)if(Uh(n,t,s)&&!r[Nn(s)]){const a=new se([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,o[Nn(s)]=a}return{...r,...o}}(n,e,t,i,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const r=new se(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Uh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Pk(n,e,t,i){return!!(Nn(n)===i||i!==ie&&Uh(e,t,n))&&("**"===n.path||Wy(e,n,t).matched)}function Nk(n,e,t){return 0===e.length&&!n.children[t]}const jh=!1;class Hh{constructor(e){this.segmentGroup=e||null}}class Fk{constructor(e){this.urlTree=e}}function rc(n){return Gl(new Hh(n))}function Lk(n){return Gl(new Fk(n))}class B6{constructor(e,t,i,r,o){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=o,this.allowRedirects=!0}apply(){const e=Bh(this.urlTree.root,[],[],this.config).segmentGroup,t=new se(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ie).pipe(Q(o=>this.createUrlTree(Oh(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Rr(o=>{if(o instanceof Fk)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Hh?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ie).pipe(Q(r=>this.createUrlTree(Oh(r),e.queryParams,e.fragment))).pipe(Rr(r=>{throw r instanceof Hh?this.noMatchError(r):r}))}noMatchError(e){return new w(4002,jh)}createUrlTree(e,t,i){const r=xy(e);return new Do(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Q(o=>new se([],o))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const o of Object.keys(i.children))"primary"===o?r.unshift(o):r.push(o);return nt(r).pipe(Ar(o=>{const s=i.children[o],a=Mk(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(Q(l=>({segment:l,outlet:o})))}),ZR((o,s)=>(o[s.outlet]=s.segment,o),{}),JR())}expandSegment(e,t,i,r,o,s){return nt(i).pipe(Ar(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,o,s).pipe(Rr(c=>{if(c instanceof Hh)return N(null);throw c}))),Mr(a=>!!a),Rr((a,l)=>{if(zy(a))return Nk(t,r,o)?N(new se([],{})):rc(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,o,s,a){return Pk(r,t,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s):rc(t):rc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const o=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?Lk(o):this.lineralizeSegments(i,o).pipe(_t(s=>{const a=new se(s,{});return this.expandSegment(e,a,t,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=Wy(t,r,o);if(!a)return rc(t);const d=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?Lk(d):this.lineralizeSegments(r,d).pipe(_t(h=>this.expandSegment(e,t,i,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,i,r,o){return"**"===i.path?(e=xk(i,e),i.loadChildren?(i._loadedRoutes?N({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(Q(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new se(r,{})))):N(new se(r,{}))):Ok(t,i,r,e).pipe(wi(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=i._injector??e,i,r).pipe(_t(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=Bh(t,a,l,h),m=new se(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(Q(y=>new se(a,y)));if(0===h.length&&0===p.length)return N(new se(a,{}));const g=Nn(i)===o;return this.expandSegment(d,m,h,p,g?ie:o,!0).pipe(Q(E=>new se(a.concat(E.segments),E.children)))})):rc(t)))}getChildConfig(e,t,i){return t.children?N({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?N({routes:t._loadedRoutes,injector:t._loadedInjector}):function M6(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?N(!0):N(r.map(s=>{const a=ta(s,n);return kr(function g6(n){return n&&ic(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(na(),kk())}(e,t,i).pipe(_t(r=>r?this.configLoader.loadChildren(e,t).pipe(Vt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function L6(n){return Gl(Sk(jh,3))}())):N({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return N(i);if(r.numberOfChildren>1||!r.children[ie])return Gl(new w(4e3,jh));r=r.children[ie]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const o=this.createSegmentGroup(e,t.root,i,r);return new Do(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Tt(e,(r,o)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[o]=t[a]}else i[o]=r}),i}createSegmentGroup(e,t,i,r){const o=this.createSegments(e,t.segments,i,r);let s={};return Tt(t.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,i,r)}),new se(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new w(4001,jh);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class j6{}class z6{constructor(e,t,i,r,o,s,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=Bh(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ie).pipe(Q(t=>{if(null===t)return null;const i=new Nh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ie,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Zi(i,t),o=new Ek(this.url,r);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,i=wk(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return nt(Object.keys(i.children)).pipe(Ar(r=>{const o=i.children[r],s=Mk(t,r);return this.processSegmentGroup(e,s,o,r)}),ZR((r,o)=>r&&o?(r.push(...o),r):null),function d5(n,e=!1){return qe((t,i)=>{let r=0;t.subscribe(Ve(i,o=>{const s=n(o,r++);(s||e)&&i.next(o),!s&&i.complete()}))})}(r=>null!==r),Sh(null),JR(),Q(r=>{if(null===r)return null;const o=Bk(r);return function G6(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,i,r,o){return nt(t).pipe(Ar(s=>this.processSegmentAgainstRoute(s._injector??e,s,i,r,o)),Mr(s=>!!s),Rr(s=>{if(zy(s))return Nk(i,r,o)?N([]):N(null);throw s}))}processSegmentAgainstRoute(e,t,i,r,o){if(t.redirectTo||!Pk(t,i,r,o))return N(null);let s;if("**"===t.path){const a=r.length>0?nk(r).parameters:{},l=jk(i)+r.length;s=N({snapshot:new Nh(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hk(t),Nn(t),t.component??t._loadedComponent??null,t,Uk(i),l,$k(t)),consumedSegments:[],remainingSegments:[]})}else s=Ok(i,t,r,e).pipe(Q(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=jk(i)+l.length;return{snapshot:new Nh(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Hk(t),Nn(t),t.component??t._loadedComponent??null,t,Uk(i),d,$k(t)),consumedSegments:l,remainingSegments:c}}));return s.pipe(wi(a=>{if(null===a)return N(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function W6(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=Bh(i,c,u,h.filter(g=>void 0===g.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(Q(g=>null===g?null:[new Zi(l,g)]));if(0===h.length&&0===p.length)return N([new Zi(l,[])]);const m=Nn(t)===o;return this.processSegment(d,h,f,p,m?ie:o).pipe(Q(g=>null===g?null:[new Zi(l,g)]))}))}}function q6(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Bk(n){const e=[],t=new Set;for(const i of n){if(!q6(i)){e.push(i);continue}const r=e.find(o=>i.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=Bk(i.children);e.push(new Zi(i.value,r))}return e.filter(i=>!t.has(i))}function Uk(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jk(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Hk(n){return n.data||{}}function $k(n){return n.resolve||{}}function zk(n){return"string"==typeof n.title||null===n.title}function qy(n){return wi(e=>{const t=n(e);return t?nt(t).pipe(Q(()=>e)):N(e)})}const ia=new T("ROUTES");let Ky=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return N(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=kr(t.loadComponent()).pipe(Q(Wk),Vt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Sy(()=>{this.componentLoaders.delete(t)})),r=new QR(i,()=>new Ee).pipe(Dy());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const o=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Q(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=tk(l.get(ia,[],j.Self|j.Optional)));return{routes:c.map($y),injector:l}}),Sy(()=>{this.childrenLoaders.delete(i)})),s=new QR(o,()=>new Ee).pipe(Dy());return this.childrenLoaders.set(i,s),s}loadModuleFactoryOrRoutes(t){return kr(t()).pipe(Q(Wk),_t(r=>r instanceof gA||Array.isArray(r)?N(r):nt(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(C(yt),C(__))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wk(n){return function nK(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Yy=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ee,this.configLoader=X(Ky),this.environmentInjector=X(fi),this.urlSerializer=X(Kl),this.rootContexts=X(ea),this.navigationId=0,this.configLoader.onLoadEndListener=r=>this.events.next(new W5(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new G5(r))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Pn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Yt(i=>0!==i.id),Q(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),wi(i=>{let r=!1,o=!1;return N(i).pipe(Vt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),wi(s=>{const a=t.browserUrlTree.toString(),l=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||l)&&t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Kk(s.source)&&(t.browserUrlTree=s.extractedUrl),N(s).pipe(wi(u=>{const d=this.transitions?.getValue();return this.events.next(new Oy(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),d!==this.transitions?.getValue()?Li:Promise.resolve(u)}),function U6(n,e,t,i){return wi(r=>function V6(n,e,t,i,r){return new B6(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Q(o=>({...r,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Vt(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},i.urlAfterRedirects=u.urlAfterRedirects}),function Y6(n,e,t,i,r){return _t(o=>function $6(n,e,t,i,r,o,s="emptyOnly"){return new z6(n,e,t,i,r,s,o).recognize().pipe(wi(a=>null===a?function H6(n){return new Oe(e=>e.error(n))}(new j6):N(a)))}(n,e,t,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,r).pipe(Q(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Vt(u=>{if(i.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(h,u)}t.browserUrlTree=u.urlAfterRedirects}const d=new U5(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}));if(l&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:m}=s,g=new Oy(d,this.urlSerializer.serialize(h),f,p);this.events.next(g);const _=Ck(h,t.rootComponentType).snapshot;return N(i={...s,targetSnapshot:_,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=s.rawUrl,s.resolve(null),Li}),Vt(s=>{const a=new j5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Q(s=>i={...s,guards:d6(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function w6(n,e){return _t(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?N({...t,guardsResult:!0}):function E6(n,e,t,i){return nt(n).pipe(_t(r=>function x6(n,e,t,i,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?N(o.map(a=>{const l=ec(e)??r,c=ta(a,l);return kr(function v6(n){return n&&ic(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(Mr())})).pipe(na()):N(!0)}(r.component,r.route,t,e,i)),Mr(r=>!0!==r,!0))}(s,i,r,n).pipe(_t(a=>a&&function m6(n){return"boolean"==typeof n}(a)?function D6(n,e,t,i){return nt(e).pipe(Ar(r=>Eh(function S6(n,e){return null!==n&&e&&e(new q5(n)),N(!0)}(r.route.parent,i),function I6(n,e){return null!==n&&e&&e(new Y5(n)),N(!0)}(r.route,i),function A6(n,e,t){const i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function h6(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>Dh(()=>N(s.guards.map(l=>{const c=ec(s.node)??t,u=ta(l,c);return kr(function y6(n){return n&&ic(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(Mr())})).pipe(na())));return N(o).pipe(na())}(n,r.path,t),function T6(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return N(!0);const r=i.map(o=>Dh(()=>{const s=ec(e)??t,a=ta(o,s);return kr(function _6(n){return n&&ic(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Mr())}));return N(r).pipe(na())}(n,r.route,t))),Mr(r=>!0!==r,!0))}(i,o,n,e):N(a)),Q(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Vt(s=>{if(i.guardsResult=s.guardsResult,So(s.guardsResult))throw Ik(0,s.guardsResult);const a=new H5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Yt(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3,t),!1)),qy(s=>{if(s.guards.canActivateChecks.length)return N(s).pipe(Vt(a=>{const l=new $5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),wi(a=>{let l=!1;return N(a).pipe(function Q6(n,e){return _t(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return N(t);let o=0;return nt(r).pipe(Ar(s=>function X6(n,e,t,i){const r=n.routeConfig,o=n._resolve;return void 0!==r?.title&&!zk(r)&&(o[Wl]=r.title),function Z6(n,e,t,i){const r=function J6(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return N({});const o={};return nt(r).pipe(_t(s=>function eK(n,e,t,i){const r=ec(e)??i,o=ta(n,r);return kr(o.resolve?o.resolve(e,t):r.runInContext(()=>o(e,t)))}(n[s],e,t,i).pipe(Mr(),Vt(a=>{o[s]=a}))),Iy(1),function h5(n){return Q(()=>n)}(o),Rr(s=>zy(s)?Li:Gl(s)))}(o,n,e,i).pipe(Q(s=>(n._resolvedData=s,n.data=wk(n,t).resolve,r&&zk(r)&&(n.data[Wl]=r.title),null)))}(s.route,i,n,e)),Vt(()=>o++),Iy(1),_t(s=>o===r.length?N(t):Li))})}(t.paramsInheritanceStrategy,this.environmentInjector),Vt({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),Vt(a=>{const l=new z5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),qy(s=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Vt(u=>{l.component=u}),Q(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Ey(a(s.targetSnapshot.root)).pipe(Sh(),ei(1))}),qy(()=>t.afterPreactivation()),Q(s=>{const a=function e6(n,e,t){const i=Jl(n,e._root,t?t._root:void 0);return new bk(i,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return i={...s,targetRouterState:a}}),Vt(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>Q(i=>(new u6(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Vt({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new To(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),Sy(()=>{r||o||this.cancelNavigationTransition(i,"",1,t),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Rr(s=>{if(o=!0,Ak(s)){Tk(s)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new Ph(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),Tk(s)){const l=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Kk(i.source)};t.scheduleNavigation(l,"imperative",null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new _k(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(s))}catch(l){i.reject(l)}}return Li}))}))}cancelNavigationTransition(t,i,r,o){const s=new Ph(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Kk(n){return"imperative"!==n}let Yk=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===ie);return i}getResolvedTitleForRoute(t){return t.data[Wl]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:function(){return X(iK)},providedIn:"root"}),n})(),iK=(()=>{class n extends Yk{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(C(DM))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:function(){return X(sK)},providedIn:"root"}),n})();class oK{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let sK=(()=>{class n extends oK{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=St(n)))(i||n)}}(),n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $h=new T("",{providedIn:"root",factory:()=>({})});let lK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:function(){return X(cK)},providedIn:"root"}),n})(),cK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uK(n){throw n}function dK(n,e,t){return e.parse("/")}const hK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Xk(){const n=X(Kl),e=X(ea),t=X(Ml),i=X(yt),r=X(__),o=X(ia,{optional:!0})??[],s=X($h,{optional:!0})??{},a=new tt(null,n,e,t,i,r,tk(o));return function pK(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(s,a),a}let tt=(()=>{class n{constructor(t,i,r,o,s,a,l){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=o,this.config=l,this.disposed=!1,this.currentPageId=0,this.isNgZoneEnabled=!1,this.errorHandler=uK,this.malformedUriErrorHandler=dK,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>N(void 0),this.urlHandlingStrategy=X(lK),this.routeReuseStrategy=X(rK),this.titleStrategy=X(Yk),this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.navigationTransitions=X(Yy),this.console=s.get(mW);const c=s.get(ue);this.isNgZoneEnabled=c instanceof ue&&ue.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new Do,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ck(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(u=>{this.lastSuccessfulId=u.id,this.currentPageId=u.targetPageId},u=>{this.console.warn(`Unhandled Navigation Error: ${u}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,i,o,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map($y),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=r||this.routerState.root,u=l?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),P5(c,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=So(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function mK(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new w(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...hK}:!1===i?{...fK}:i,So(t))return rk(this.currentUrlTree,t,r);const o=this.parseUrl(t);return rk(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const o=t[r];return null!=o&&(i[r]=o),i},{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),u=r&&r.\u0275routerPageId?r.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):u=0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),o={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",o):this.location.go(r,"",o)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){cd()},n.\u0275prov=x({token:n,factory:function(){return Xk()},providedIn:"root"}),n})(),oc=(()=>{class n{constructor(t,i,r,o,s,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ee;const l=s.nativeElement.tagName;this.isAnchorElement="A"===l||"AREA"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof To&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Gs(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Gs(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Gs(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function zI(n,e,t){return function fj(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?$I:lg}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,o=this.el.nativeElement;null!==i?r.setAttribute(o,t,i):r.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(b(tt),b(Or),function Ku(n){return function L2(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const o=t[r];if(RD(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(o===e)return t[r+1];r+=2}}}return null}(It(),n)}("tabindex"),b(zi),b(rt),b(vo))},n.\u0275dir=V({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&Ye("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&Mn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Tn]}),n})(),Zk=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.element=i,this.renderer=r,this.cdr=o,this.link=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Le,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof To&&this.update()})}ngAfterContentInit(){N(this.links.changes,N(null)).pipe(is()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=nt(t).pipe(is()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function gK(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(b(tt),b(rt),b(zi),b(Fd),b(oc,8))},n.\u0275dir=V({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&function FA(n,e,t,i){const r=de();if(r.firstCreatePass){const o=It();VA(r,new OA(e,t,i),o.index),function KG(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}LA(r,D(),t)}(r,oc,5),2&t){let o;u_(o=d_())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Tn]}),n})();class Jk{}let _K=(()=>{class n{constructor(t,i,r,o,s){this.router=t,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Yt(t=>t instanceof To),Ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const o of i){o.providers&&!o._injector&&(o._injector=Td(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?r.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return nt(r).pipe(is())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):N(null);const o=r.pipe(_t(s=>null===s?N(void 0):(i._loadedRoutes=s.routes,i._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return i.loadComponent&&!i._loadedComponent?nt([o,this.loader.loadComponent(i)]).pipe(is()):o})}}return n.\u0275fac=function(t){return new(t||n)(C(tt),C(__),C(fi),C(Jk),C(Ky))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qy=new T("");let eO=(()=>{class n{constructor(t,i,r,o,s={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Oy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof To&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yk&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yk(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){cd()},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();function oa(n,e){return{\u0275kind:n,\u0275providers:e}}function nO(){const n=X(yt);return e=>{const t=n.get(zs);if(e!==t.components[0])return;const i=n.get(tt),r=n.get(iO);1===n.get(Zy)&&i.initialNavigation(),n.get(rO,null,j.Optional)?.setUpPreloading(),n.get(Qy,null,j.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const iO=new T("",{factory:()=>new Ee}),Zy=new T("",{providedIn:"root",factory:()=>1});const rO=new T("");function wK(n){return oa(0,[{provide:rO,useExisting:_K},{provide:Jk,useExisting:n}])}const oO=new T("ROUTER_FORROOT_GUARD"),EK=[Ml,{provide:Kl,useClass:Ty},{provide:tt,useFactory:Xk},ea,{provide:Or,useFactory:function tO(n){return n.routerState.root},deps:[tt]},Ky,[]];function DK(){return new fx("Router",tt)}let sO=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[EK,[],{provide:ia,multi:!0,useValue:t},{provide:oO,useFactory:AK,deps:[[tt,new tl,new nl]]},{provide:$h,useValue:i||{}},i?.useHash?{provide:vo,useClass:n4}:{provide:vo,useClass:Fx},{provide:Qy,useFactory:()=>{const n=X(S3),e=X(ue),t=X($h),i=X(Yy),r=X(Kl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new eO(r,i,n,e,t)}},i?.preloadingStrategy?wK(i.preloadingStrategy).\u0275providers:[],{provide:fx,multi:!0,useFactory:DK},i?.initialNavigation?xK(i):[],[{provide:aO,useFactory:nO},{provide:sx,multi:!0,useExisting:aO}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ia,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(C(oO,8))},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[jy]}),n})();function AK(n){return"guarded"}function xK(n){return["disabled"===n.initialNavigation?oa(3,[{provide:Rd,multi:!0,useFactory:()=>{const e=X(tt);return()=>{e.setUpLocationChangeListener()}}},{provide:Zy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?oa(2,[{provide:Zy,useValue:0},{provide:Rd,multi:!0,deps:[yt],useFactory:e=>{const t=e.get(e4,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(tt),s=e.get(iO);(function i(r){e.get(tt).events.pipe(Yt(s=>s instanceof To||s instanceof Ph||s instanceof _k),Q(s=>s instanceof To||s instanceof Ph&&(0===s.code||1===s.code)&&null),Yt(s=>null!==s),ei(1)).subscribe(()=>{r()})})(()=>{r(!0)}),o.afterPreactivation=()=>(r(!0),s.closed?N(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const aO=new T("");function lO(n,e,t,i,r,o,s){try{var a=n[o](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function v(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var o=n.apply(e,t);function s(l){lO(o,i,r,s,a,"next",l)}function a(l){lO(o,i,r,s,a,"throw",l)}s(void 0)})}}const S=function(n,e){if(!n)throw sa(e)},sa=function(n){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+n)},cO=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):55296==(64512&r)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&n.charCodeAt(++i)),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e},ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],s=r+1<n.length,a=s?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0;let h=(15&a)<<2|c>>6,f=63&c;l||(f=64,s||(h=64)),i.push(t[o>>2],t[(3&o)<<4|a>>4],t[h],t[f])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cO(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){const l=((7&r)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const o=n[t++],s=n[t++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const d=r<n.length?t[n.charAt(r)]:64;if(++r,null==o||null==a||null==c||null==d)throw Error();i.push(o<<2|a>>4),64!==c&&(i.push(a<<4&240|c>>2),64!==d&&i.push(c<<6&192|d))}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},uO=function(n){const e=cO(n);return ev.encodeByteArray(e,!0)},zh=function(n){return uO(n).replace(/\./g,"")},Gh=function(n){try{return ev.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function kK(n){return dO(void 0,n)}function dO(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!OK(t)||(n[t]=dO(n[t],e[t]));return n}function OK(n){return"__proto__"!==n}function vt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function tv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function fO(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function pO(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mO(){return"object"==typeof indexedDB}function gO(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var o;e((null===(o=r.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}const nv=()=>{try{return function FK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gh(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},_O=n=>{var e,t;return null===(t=null===(e=nv())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},yO=n=>{const e=_O(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),i]:[e.substring(0,t),i]},vO=n=>{var e;return null===(e=nv())||void 0===e?void 0:e[`_${n}`]};class ac{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function bO(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[zh(JSON.stringify({alg:"none",type:"JWT"})),zh(JSON.stringify(s)),""].join(".")}class ti extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],s=o?function HK(n,e){return n.replace($K,(t,i)=>{const r=e[i];return null!=r?String(r):`<${i}?>`})}(o,i):"Error";return new ti(r,`${this.serviceName}: ${s} (${r}).`,i)}}const $K=/\{\$([^}]+)}/g;function lc(n){return JSON.parse(n)}function ft(n){return JSON.stringify(n)}const Wh=function(n){let e={},t={},i={},r="";try{const o=n.split(".");e=lc(Gh(o[0])||""),t=lc(Gh(o[1])||""),r=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}};function er(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function aa(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function iv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qh(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function cc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],s=e[r];if(CO(o)&&CO(s)){if(!cc(o,s))return!1}else if(o!==s)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function CO(n){return null!==n&&"object"==typeof n}function uc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function dc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function hc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}class WK{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)i[d]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let d=0;d<16;d++)i[d]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let d=16;d<80;d++){const h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=4294967295&(h<<1|h>>>31)}let c,u,r=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],l=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^o&(s^a),u=1518500249):(c=o^s^a,u=1859775393):d<60?(c=o&s|a&(o|s),u=2400959708):(c=o^s^a,u=3395469782);const h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=s,s=4294967295&(o<<30|o>>>2),o=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const i=t-this.blockSize;let r=0;const o=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(o[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}else for(;r<t;)if(o[s]=e[r],++s,++r,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}class KK{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(void 0===e&&void 0===t&&void 0===i)throw new Error("Missing Observer.");r=function YK(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:i},void 0===r.next&&(r.next=rv),void 0===r.error&&(r.error=rv),void 0===r.complete&&(r.complete=rv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rv(){}function la(n,e){return`${n} failed: ${e} argument `}const Kh=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};function wO(n,e=1e3,t=2){const i=e*Math.pow(t,n),r=Math.round(.5*i*(Math.random()-.5)*2);return Math.min(144e5,i+r)}function Xe(n){return n&&n._delegate?n._delegate:n}class Fn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const xo="[DEFAULT]";class nY{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ac;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function rY(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return v(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,s]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(o)&&s.resolve(r);return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),o=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;o.add(e),this.onInitCallbacks.set(r,o);const s=this.instances.get(r);return s&&e(s,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===xo?void 0:n),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}var n;return i||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oY{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nY(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ov=[];var we=(()=>{return(n=we||(we={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",we;var n})();const EO={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},sY=we.INFO,aY={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},lY=(n,e,...t)=>{if(e<n.logLevel)return;const i=(new Date).toISOString(),r=aY[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${n.name}:`,...t)};class Yh{constructor(e){this.name=e,this._logLevel=sY,this._logHandler=lY,this._userLogHandler=null,ov.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?EO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}let DO,IO;const SO=new WeakMap,sv=new WeakMap,TO=new WeakMap,av=new WeakMap,lv=new WeakMap;let cv={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return sv.get(n);if("objectStoreNames"===e)return n.objectStoreNames||TO.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pr(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function gY(n){return"function"==typeof n?function mY(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function dY(){return IO||(IO=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(uv(this),e),Pr(SO.get(this))}:function(...e){return Pr(n.apply(uv(this),e))}:function(e,...t){const i=n.call(uv(this),e,...t);return TO.set(i,e.sort?e.sort():[e]),Pr(i)}}(n):(n instanceof IDBTransaction&&function fY(n){if(sv.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),r()},s=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});sv.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function uY(){return DO||(DO=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,cv):n)}function Pr(n){if(n instanceof IDBRequest)return function hY(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Pr(n.result)),r()},s=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&SO.set(t,n)}).catch(()=>{}),lv.set(e,n),e}(n);if(av.has(n))return av.get(n);const e=gY(n);return e!==n&&(av.set(n,e),lv.set(e,n)),e}const uv=n=>lv.get(n);function AO(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const s=indexedDB.open(n,e),a=Pr(s);return i&&s.addEventListener("upgradeneeded",l=>{i(Pr(s.result),l.oldVersion,l.newVersion,Pr(s.transaction))}),t&&s.addEventListener("blocked",()=>t()),a.then(l=>{o&&l.addEventListener("close",()=>o()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const _Y=["get","getKey","getAll","getAllKeys","count"],yY=["put","add","delete","clear"],dv=new Map;function xO(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(dv.get(e))return dv.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=yY.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!_Y.includes(t))return;const o=function(){var s=v(function*(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let u=c.store;return i&&(u=u.index(l.shift())),(yield Promise.all([u[t](...l),r&&c.done]))[0]});return function(l){return s.apply(this,arguments)}}();return dv.set(e,o),o}!function pY(n){cv=n(cv)}(n=>({...n,get:(e,t,i)=>xO(e,t)||n.get(e,t,i),has:(e,t)=>!!xO(e,t)||n.has(e,t)}));class vY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function bY(n){return"VERSION"===n.getComponent()?.type}(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}return null}).filter(t=>t).join(" ")}}const hv="@firebase/app",Mo=new Yh("@firebase/app"),Qh="[DEFAULT]",WY={[hv]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ro=new Map,Xh=new Map;function qY(n,e){try{n.container.addComponent(e)}catch(t){Mo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ni(n){const e=n.name;if(Xh.has(e))return Mo.debug(`There were multiple attempts to register component ${e}.`),!1;Xh.set(e,n);for(const t of Ro.values())qY(t,n);return!0}function tr(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const nr=new Ao("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class YY{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}const ca="9.14.0";function RO(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const i=Object.assign({name:Qh,automaticDataCollectionEnabled:!1},e),r=i.name;if("string"!=typeof r||!r)throw nr.create("bad-app-name",{appName:String(r)});if(t||(t=(()=>{var n;return null===(n=nv())||void 0===n?void 0:n.config})()),!t)throw nr.create("no-options");const o=Ro.get(r);if(o){if(cc(t,o.options)&&cc(i,o.config))return o;throw nr.create("duplicate-app",{appName:r})}const s=new oY(r);for(const l of Xh.values())s.addComponent(l);const a=new YY(t,i,s);return Ro.set(r,a),a}function Zh(n=Qh){const e=Ro.get(n);if(!e&&n===Qh)return RO();if(!e)throw nr.create("no-app",{appName:n});return e}function sn(n,e,t){var i;let r=null!==(i=WY[n])&&void 0!==i?i:n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${r}" with version "${e}":`];return o&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Mo.warn(a.join(" "))}ni(new Fn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const fc="firebase-heartbeat-store";let pv=null;function kO(){return pv||(pv=AO("firebase-heartbeat-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(fc)}}).catch(n=>{throw nr.create("idb-open",{originalErrorMessage:n.message})})),pv}function mv(){return(mv=v(function*(n){var e;try{return(yield kO()).transaction(fc).objectStore(fc).get(PO(n))}catch(t){if(t instanceof ti)Mo.warn(t.message);else{const i=nr.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});Mo.warn(i.message)}}})).apply(this,arguments)}function OO(n,e){return gv.apply(this,arguments)}function gv(){return(gv=v(function*(n,e){var t;try{const r=(yield kO()).transaction(fc,"readwrite");return yield r.objectStore(fc).put(e,PO(n)),r.done}catch(i){if(i instanceof ti)Mo.warn(i.message);else{const r=nr.create("idb-set",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message});Mo.warn(r.message)}}})).apply(this,arguments)}function PO(n){return`${n.name}!${n.options.appId}`}class t7{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new i7(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){var e=this;return v(function*(){const i=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=NO();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==r&&!e._heartbeatsCache.heartbeats.some(o=>o.date===r))return e._heartbeatsCache.heartbeats.push({date:r,agent:i}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return v(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const t=NO(),{heartbeatsToSend:i,unsentEntries:r}=function n7(n,e=1024){const t=[];let i=n.slice();for(const r of n){const o=t.find(s=>s.agent===r.agent);if(o){if(o.dates.push(r.date),FO(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),FO(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}(e._heartbeatsCache.heartbeats),o=zh(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(e._heartbeatsCache.heartbeats=r,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),o})()}}function NO(){return(new Date).toISOString().substring(0,10)}class i7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return v(function*(){return!!mO()&&gO().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return v(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function ZY(n){return mv.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var t=this;return v(function*(){var i;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return OO(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return v(function*(){var i;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return OO(t.app,{lastSentHeartbeatDate:null!==(i=e.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function FO(n){return zh(JSON.stringify({version:2,heartbeats:n})).length}!function r7(n){ni(new Fn("platform-logger",e=>new vY(e),"PRIVATE")),ni(new Fn("heartbeat",e=>new t7(e),"PRIVATE")),sn(hv,"0.8.4",n),sn(hv,"0.8.4","esm2017"),sn("fire-js","")}("");const o7=function LO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},VO=new Ao("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),BO=new Yh("@firebase/auth");function Jh(n,...e){BO.logLevel<=we.ERROR&&BO.error(`Auth (${ca}): ${n}`,...e)}function an(n,...e){throw _v(n,...e)}function Di(n,...e){return _v(n,...e)}function UO(n,e,t){const i=Object.assign(Object.assign({},o7()),{[e]:t});return new Ao("auth","Firebase",i).create(e,{appName:n.name})}function _v(n,...e){if("string"!=typeof n){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return VO.create(n,...e)}function M(n,e,...t){if(!n)throw _v(e,...t)}function Ii(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Jh(e),new Error(e)}function Nr(n,e){n||Ii(e)}const jO=new Map;function ir(n){Nr(n instanceof Function,"Expected a class definition");let e=jO.get(n);return e?(Nr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jO.set(n,e),e)}function pc(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function HO(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=tv()||pO()}get(){return function l7(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function yv(){return"http:"===HO()||"https:"===HO()}()||fO()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vv(n,e){Nr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class $O{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const u7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},d7=new mc(3e4,6e4);function pt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function bt(n,e,t,i){return bv.apply(this,arguments)}function bv(){return(bv=v(function*(n,e,t,i,r={}){return zO(n,r,v(function*(){let o={},s={};i&&("GET"===e?s=i:o={body:JSON.stringify(i)});const a=uc(Object.assign({key:n.config.apiKey},s)).slice(1),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode),$O.fetch()(GO(n,n.config.apiHost,t,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function zO(n,e,t){return Cv.apply(this,arguments)}function Cv(){return(Cv=v(function*(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},u7),e);try{const r=new h7(n),o=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw gc(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===l)throw gc(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===l)throw gc(n,"email-already-in-use",s);if("USER_DISABLED"===l)throw gc(n,"user-disabled",s);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw UO(n,u,c);an(n,u)}}catch(r){if(r instanceof ti)throw r;an(n,"network-request-failed")}})).apply(this,arguments)}function rr(n,e,t,i){return wv.apply(this,arguments)}function wv(){return(wv=v(function*(n,e,t,i,r={}){const o=yield bt(n,e,t,i,r);return"mfaPendingCredential"in o&&an(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function GO(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?vv(n.config,r):`${n.config.apiScheme}://${r}`}class h7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Di(this.auth,"network-request-failed")),d7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Di(n,e,i);return r.customData._tokenResponse=t,r}function Ev(){return(Ev=v(function*(n,e){return bt(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function m7(n,e){return Iv.apply(this,arguments)}function Iv(){return(Iv=v(function*(n,e){return bt(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function _c(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Sv(){return(Sv=v(function*(n,e=!1){const t=Xe(n),i=yield t.getIdToken(e),r=ef(i);M(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o="object"==typeof r.firebase?r.firebase:void 0,s=o?.sign_in_provider;return{claims:r,token:i,authTime:_c(Tv(r.auth_time)),issuedAtTime:_c(Tv(r.iat)),expirationTime:_c(Tv(r.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function Tv(n){return 1e3*Number(n)}function ef(n){var e;const[t,i,r]=n.split(".");if(void 0===t||void 0===i||void 0===r)return Jh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Gh(i);return o?JSON.parse(o):(Jh("Failed to decode base64 JWT payload"),null)}catch(o){return Jh("Caught error parsing JWT payload as JSON",null===(e=o)||void 0===e?void 0:e.toString()),null}}function or(n,e){return Av.apply(this,arguments)}function Av(){return(Av=v(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(i){throw i instanceof ti&&y7(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})).apply(this,arguments)}function y7({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class v7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),i}{this.errorBackoff=3e4;const r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(v(function*(){yield t.iteration()}),i)}iteration(){var e=this;return v(function*(){var t;try{yield e.user.getIdToken(!0)}catch(i){return void("auth/network-request-failed"===(null===(t=i)||void 0===t?void 0:t.code)&&e.schedule(!0))}e.schedule()})()}}class WO{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yc(n){return xv.apply(this,arguments)}function xv(){return(xv=v(function*(n){var e;const t=n.auth,i=yield n.getIdToken(),r=yield or(n,m7(t,{idToken:i}));M(r?.users.length,t,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?w7(o.providerUserInfo):[],a=C7(n.providerData,s),u=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new WO(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(n,d)})).apply(this,arguments)}function Mv(){return(Mv=v(function*(n){const e=Xe(n);yield yc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function C7(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function w7(n){return n.map(e=>{var{providerId:t}=e,i=P0(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function Rv(){return(Rv=v(function*(n,e){const t=yield zO(n,{},v(function*(){const i=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,s=GO(n,r,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$O.fetch()(s,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}class vc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){M(e.idToken,"internal-error"),M(typeof e.idToken<"u","internal-error"),M(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function _7(n){const e=ef(n);return M(e,"internal-error"),M(typeof e.exp<"u","internal-error"),M(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var i=this;return v(function*(){return M(!i.accessToken||i.refreshToken,e,"user-token-expired"),t||!i.accessToken||i.isExpired?i.refreshToken?(yield i.refresh(e,i.refreshToken),i.accessToken):null:i.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var i=this;return v(function*(){const{accessToken:r,refreshToken:o,expiresIn:s}=yield function E7(n,e){return Rv.apply(this,arguments)}(e,t);i.updateTokensAndExpiration(r,o,Number(s))})()}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*i}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,s=new vc;return i&&(M("string"==typeof i,"internal-error",{appName:e}),s.refreshToken=i),r&&(M("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),o&&(M("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vc,this.toJSON())}_performRefresh(){return Ii("not implemented")}}function Fr(n,e){M("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class ko{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,o=P0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new v7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new WO(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return v(function*(){const i=yield or(t,t.stsTokenManager.getToken(t.auth,e));return M(i,t.auth,"internal-error"),t.accessToken!==i&&(t.accessToken=i,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),i})()}getIdTokenResult(e){return function g7(n){return Sv.apply(this,arguments)}(this,e)}reload(){return function b7(n){return Mv.apply(this,arguments)}(this)}_assign(e){this!==e&&(M(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ko(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){M(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var i=this;return v(function*(){let r=!1;e.idToken&&e.idToken!==i.stsTokenManager.accessToken&&(i.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield yc(i)),yield i.auth._persistUserIfCurrent(i),r&&i.auth._notifyListenersIfCurrent(i)})()}delete(){var e=this;return v(function*(){const t=yield e.getIdToken();return yield or(e,function f7(n,e){return Ev.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,o,s,a,l,c,u;const d=null!==(i=t.displayName)&&void 0!==i?i:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,_=null!==(c=t.createdAt)&&void 0!==c?c:void 0,E=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:I,isAnonymous:q,providerData:Y,stsTokenManager:Ge}=t;M(y&&Ge,e,"internal-error");const xt=vc.fromJSON(this.name,Ge);M("string"==typeof y,e,"internal-error"),Fr(d,e.name),Fr(h,e.name),M("boolean"==typeof I,e,"internal-error"),M("boolean"==typeof q,e,"internal-error"),Fr(f,e.name),Fr(p,e.name),Fr(m,e.name),Fr(g,e.name),Fr(_,e.name),Fr(E,e.name);const Mt=new ko({uid:y,auth:e,email:h,emailVerified:I,displayName:d,isAnonymous:q,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:xt,createdAt:_,lastLoginAt:E});return Y&&Array.isArray(Y)&&(Mt.providerData=Y.map(li=>Object.assign({},li))),g&&(Mt._redirectEventId=g),Mt}static _fromIdTokenResponse(e,t,i=!1){return v(function*(){const r=new vc;r.updateFromServerResponse(t);const o=new ko({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield yc(o),o})()}}const qO=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(function*(){return!0})()}_set(t,i){var r=this;return v(function*(){r.storage[t]=i})()}_get(t){var i=this;return v(function*(){const r=i.storage[t];return void 0===r?null:r})()}_remove(t){var i=this;return v(function*(){delete i.storage[t]})()}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})();function tf(n,e,t){return`firebase:${n}:${e}:${t}`}class da{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=tf(this.userKey,r.apiKey,o),this.fullPersistenceKey=tf("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return v(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?ko._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return v(function*(){if(t.persistence===e)return;const i=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,i?t.setCurrentUser(i):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return v(function*(){if(!t.length)return new da(ir(qO),e,i);const r=(yield Promise.all(t.map(function(){var c=v(function*(u){if(yield u._isAvailable())return u});return function(u){return c.apply(this,arguments)}}()))).filter(c=>c);let o=r[0]||ir(qO);const s=tf(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=yield c._get(s);if(u){const d=ko._fromJSON(e,u);c!==o&&(a=d),o=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return o._shouldAllowMigration&&l.length?(o=l[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var c=v(function*(u){if(u!==o)try{yield u._remove(s)}catch{}});return function(u){return c.apply(this,arguments)}}())),new da(o,e,i)):new da(o,e,i)})()}}function KO(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(XO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(JO(e))return"Blackberry";if(eP(e))return"Webos";if(kv(e))return"Safari";if((e.includes("chrome/")||QO(e))&&!e.includes("edge/"))return"Chrome";if(ZO(e))return"Android";{const i=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===i?.length)return i[1]}return"Other"}function YO(n=vt()){return/firefox\//i.test(n)}function kv(n=vt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function QO(n=vt()){return/crios\//i.test(n)}function XO(n=vt()){return/iemobile/i.test(n)}function ZO(n=vt()){return/android/i.test(n)}function JO(n=vt()){return/blackberry/i.test(n)}function eP(n=vt()){return/webos/i.test(n)}function nf(n=vt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tP(n=vt()){return nf(n)||ZO(n)||eP(n)||JO(n)||/windows phone/i.test(n)||XO(n)}function nP(n,e=[]){let t;switch(n){case"Browser":t=KO(vt());break;case"Worker":t=`${KO(vt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ca}/${i}`}class T7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((s,a)=>{try{s(e(o))}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return v(function*(){var i;if(t.auth.currentUser===e)return;const r=[];try{for(const o of t.queue)yield o(e),o.onAbort&&r.push(o.onAbort)}catch(o){r.reverse();for(const s of r)try{s()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:null===(i=o)||void 0===i?void 0:i.message})}})()}}class A7{constructor(e,t,i){this.app=e,this.heartbeatServiceProvider=t,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iP(this),this.idTokenSubscription=new iP(this),this.beforeStateQueue=new T7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VO,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var i=this;return t&&(this._popupRedirectResolver=ir(t)),this._initializationPromise=this.queue(v(function*(){var r,o;if(!i._deleted&&(i.persistenceManager=yield da.create(i,e),!i._deleted)){if(null!==(r=i._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{yield i._popupRedirectResolver._initialize(i)}catch{}yield i.initializeCurrentUser(t),i.lastNotifiedUid=(null===(o=i.currentUser)||void 0===o?void 0:o.uid)||null,!i._deleted&&(i._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return v(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return v(function*(){var i;const r=yield t.assertedPersistence.getCurrentUser();let o=r,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId,l=o?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===l)&&c?.user&&(o=c.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=r,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return M(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return v(function*(){let i=null;try{i=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return i})()}reloadAndSetCurrentUserOrClear(e){var t=this;return v(function*(){var i;try{yield yc(e)}catch(r){if("auth/network-request-failed"!==(null===(i=r)||void 0===i?void 0:i.code))return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function c7(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return v(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return v(function*(){const i=e?Xe(e):null;return i&&M(i.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(i&&i._clone(t))})()}_updateCurrentUser(e,t=!1){var i=this;return v(function*(){if(!i._deleted)return e&&M(i.tenantId===e.tenantId,i,"tenant-id-mismatch"),t||(yield i.beforeStateQueue.runMiddleware(e)),i.queue(v(function*(){yield i.directlySetCurrentUser(e),i.notifyAuthListeners()}))})()}signOut(){var e=this;return v(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(v(function*(){yield t.assertedPersistence.setPersistence(ir(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var i=this;return v(function*(){const r=yield i.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return v(function*(){if(!t.redirectPersistenceManager){const i=e&&ir(e)||t._popupRedirectResolver;M(i,t,"argument-error"),t.redirectPersistenceManager=yield da.create(t,[ir(i._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return v(function*(){var i,r;return t._isInitialized&&(yield t.queue(v(function*(){}))),(null===(i=t._currentUser)||void 0===i?void 0:i._redirectEventId)===e?t._currentUser:(null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return v(function*(){if(e===t.currentUser)return t.queue(v(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return M(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof t?e.addObserver(t,i,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return v(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return M(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return v(function*(){var t;const i={"X-Client-Version":e.clientVersion};e.app.options.appId&&(i["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();return r&&(i["X-Firebase-Client"]=r),i})()}}function ln(n){return Xe(n)}class iP{constructor(e){this.auth=e,this.observer=null,this.addObserver=function qK(n,e){const t=new KK(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return M(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function rP(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function oP(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class sP{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,t){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}function Pv(){return(Pv=v(function*(n,e){return bt(n,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Fv(){return(Fv=v(function*(n,e){return rr(n,"POST","/v1/accounts:signInWithPassword",pt(n,e))})).apply(this,arguments)}function Hv(){return(Hv=v(function*(n,e){return rr(n,"POST","/v1/accounts:signInWithEmailLink",pt(n,e))})).apply(this,arguments)}function $v(){return($v=v(function*(n,e){return rr(n,"POST","/v1/accounts:signInWithEmailLink",pt(n,e))})).apply(this,arguments)}class bc extends sP{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new bc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new bc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return v(function*(){switch(t.signInMethod){case"password":return function O7(n,e){return Fv.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function V7(n,e){return Hv.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:an(e,"internal-error")}})()}_linkToIdToken(e,t){var i=this;return v(function*(){switch(i.signInMethod){case"password":return function lP(n,e){return Pv.apply(this,arguments)}(e,{idToken:t,returnSecureToken:!0,email:i._email,password:i._password});case"emailLink":return function B7(n,e){return $v.apply(this,arguments)}(e,{idToken:t,email:i._email,oobCode:i._password});default:an(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function sr(n,e){return zv.apply(this,arguments)}function zv(){return(zv=v(function*(n,e){return rr(n,"POST","/v1/accounts:signInWithIdp",pt(n,e))})).apply(this,arguments)}class Ec{constructor(e){var t,i,r,o,s,a;const l=dc(hc(e)),c=null!==(t=l.apiKey)&&void 0!==t?t:null,u=null!==(i=l.oobCode)&&void 0!==i?i:null,d=function W7(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=l.mode)&&void 0!==r?r:null);M(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=null!==(o=l.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=l.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=l.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function q7(n){const e=dc(hc(n)).link,t=e?dc(hc(e)).deep_link_id:null,i=dc(hc(n)).deep_link_id;return(i?dc(hc(i)).link:null)||i||t||e||n}(e);try{return new Ec(t)}catch{return null}}}let cP=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,i){return bc._fromEmailAndPassword(t,i)}static credentialWithLink(t,i){const r=Ec.parseLink(i);return M(r,"argument-error"),bc._fromEmailAndCode(t,r.code,r.tenantId)}}return n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink",n})();class Lr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class K7 extends Lr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}function uP(n,e){return Qv.apply(this,arguments)}function Qv(){return(Qv=v(function*(n,e){return rr(n,"POST","/v1/accounts:signUp",pt(n,e))})).apply(this,arguments)}class Ln{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return v(function*(){const o=yield ko._fromIdTokenResponse(e,i,r),s=dP(i);return new Ln({user:o,providerId:s,_tokenResponse:i,operationType:t})})()}static _forOperation(e,t,i){return v(function*(){yield e._updateTokensIfNecessary(i,!0);const r=dP(i);return new Ln({user:e,providerId:r,_tokenResponse:i,operationType:t})})()}}function dP(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class af extends ti{constructor(e,t,i,r){var o;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,af.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new af(e,t,i,r)}}function hP(n,e,t,i){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?af._fromErrorAndOperation(n,o,e,i):o})}function Jv(n,e){return eb.apply(this,arguments)}function eb(){return(eb=v(function*(n,e,t=!1){const i=yield or(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ln._forOperation(n,"link",i)})).apply(this,arguments)}function nb(){return(nb=v(function*(n,e,t=!1){var i;const{auth:r}=n,o="reauthenticate";try{const s=yield or(n,hP(r,o,e,n),t);M(s.idToken,r,"internal-error");const a=ef(s.idToken);M(a,r,"internal-error");const{sub:l}=a;return M(n.uid===l,r,"user-mismatch"),Ln._forOperation(n,o,s)}catch(s){throw"auth/user-not-found"===(null===(i=s)||void 0===i?void 0:i.code)&&an(r,"user-mismatch"),s}})).apply(this,arguments)}function mP(n,e){return ib.apply(this,arguments)}function ib(){return(ib=v(function*(n,e,t=!1){const i="signIn",r=yield hP(n,i,e),o=yield Ln._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}function ob(){return(ob=v(function*(n,e){return mP(ln(n),e)})).apply(this,arguments)}function _b(){return(_b=v(function*(n,e,t){const i=ln(n),r=yield uP(i,{returnSecureToken:!0,email:e,password:t}),o=yield Ln._fromIdTokenResponse(i,"signIn",r);return yield i._updateCurrentUser(o.user),o})).apply(this,arguments)}function Ab(n,e,t,i){return Xe(n).onAuthStateChanged(e,t,i)}const uf="__sak";class _P{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uf,"1"),this.storage.removeItem(uf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const v9=(()=>{class n extends _P{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function g9(){const n=vt();return kv(n)||nf(n)}()&&function S7(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=tP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),o=this.localCache[i];r!==o&&t(i,o,r)}}onStorageEvent(t,i=!1){if(!t.key)return void this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});const r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(r);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}const o=()=>{const a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);!function I7(){return function PK(){const n=vt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,i){var r=()=>super._set,o=this;return v(function*(){yield r().call(o,t,i),o.localCache[t]=JSON.stringify(i)})()}_get(t){var i=()=>super._get,r=this;return v(function*(){const o=yield i().call(r,t);return r.localCache[t]=JSON.stringify(o),o})()}_remove(t){var i=()=>super._remove,r=this;return v(function*(){yield i().call(r,t),delete r.localCache[t]})()}}return n.type="LOCAL",n})(),yP=(()=>{class n extends _P{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})();let C9=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(o=>o.isListeningto(t));if(i)return i;const r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var i=this;return v(function*(){const r=t,{eventId:o,eventType:s,data:a}=r.data,l=i.handlersMap[s];if(!l?.size)return;r.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const c=Array.from(l).map(function(){var d=v(function*(h){return h(r.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function b9(n){return Promise.all(n.map(function(){var e=v(function*(t){try{return{fulfilled:!0,value:yield t}}catch(i){return{fulfilled:!1,reason:i}}});return function(t){return e.apply(this,arguments)}}()))}(c);r.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:u})})()}_subscribe(t,i){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Ob(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(10*Math.random());return n+t}class w9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){var r=this;return v(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const u=Ob("",20);o.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},i);a={messageChannel:o,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"))}}},r.handlers.add(a),o.port1.addEventListener("message",a.onMessage),r.target.postMessage({eventType:e,eventId:u,data:t},[o.port2])}).finally(()=>{a&&r.removeMessageHandler(a)})})()}}function mt(){return window}function Pb(){return typeof mt().WorkerGlobalScope<"u"&&"function"==typeof mt().importScripts}function Nb(){return(Nb=v(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const vP="firebaseLocalStorageDb",df="firebaseLocalStorage",bP="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hf(n,e){return n.transaction([df],e?"readwrite":"readonly").objectStore(df)}function Fb(){const n=indexedDB.open(vP,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(df,{keyPath:bP})}catch(r){t(r)}}),n.addEventListener("success",v(function*(){const i=n.result;i.objectStoreNames.contains(df)?e(i):(i.close(),yield function A9(){const n=indexedDB.deleteDatabase(vP);return new Ic(n).toPromise()}(),e(yield Fb()))}))})}function CP(n,e,t){return Lb.apply(this,arguments)}function Lb(){return(Lb=v(function*(n,e,t){const i=hf(n,!0).put({[bP]:e,value:t});return new Ic(i).toPromise()})).apply(this,arguments)}function Vb(){return(Vb=v(function*(n,e){const t=hf(n,!1).get(e),i=yield new Ic(t).toPromise();return void 0===i?null:i.value})).apply(this,arguments)}function wP(n,e){const t=hf(n,!0).delete(e);return new Ic(t).toPromise()}const k9=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return v(function*(){return t.db||(t.db=yield Fb()),t.db})()}_withRetries(t){var i=this;return v(function*(){let r=0;for(;;)try{const o=yield i._openDb();return yield t(o)}catch(o){if(r++>3)throw o;i.db&&(i.db.close(),i.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return v(function*(){return Pb()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return v(function*(){t.receiver=C9._getInstance(function S9(){return Pb()?self:null}()),t.receiver._subscribe("keyChanged",function(){var i=v(function*(r,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(r,o){return i.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var i=v(function*(r,o){return["keyChanged"]});return function(r,o){return i.apply(this,arguments)}}())})()}initializeSender(){var t=this;return v(function*(){var i,r;if(t.activeServiceWorker=yield function D9(){return Nb.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new w9(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);!o||(null===(i=o[0])||void 0===i?void 0:i.fulfilled)&&(null===(r=o[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var i=this;return v(function*(){if(i.sender&&i.activeServiceWorker&&function I9(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===i.activeServiceWorker)try{yield i.sender._send("keyChanged",{key:t},i.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return v(function*(){try{if(!indexedDB)return!1;const t=yield Fb();return yield CP(t,uf,"1"),yield wP(t,uf),!0}catch{}return!1})()}_withPendingWrite(t){var i=this;return v(function*(){i.pendingWrites++;try{yield t()}finally{i.pendingWrites--}})()}_set(t,i){var r=this;return v(function*(){return r._withPendingWrite(v(function*(){return yield r._withRetries(o=>CP(o,t,i)),r.localCache[t]=i,r.notifyServiceWorker(t)}))})()}_get(t){var i=this;return v(function*(){const r=yield i._withRetries(o=>function x9(n,e){return Vb.apply(this,arguments)}(o,t));return i.localCache[t]=r,r})()}_remove(t){var i=this;return v(function*(){return i._withPendingWrite(v(function*(){return yield i._withRetries(r=>wP(r,t)),delete i.localCache[t],i.notifyServiceWorker(t)}))})()}_poll(){var t=this;return v(function*(){const i=yield t._withRetries(s=>{const a=hf(s,!1).getAll();return new Ic(a).toPromise()});if(!i)return[];if(0!==t.pendingWrites)return[];const r=[],o=new Set;for(const{fbase_key:s,value:a}of i)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),r.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),r.push(s));return r})()}notifyListeners(t,i){this.localCache[t]=i;const r=this.listeners[t];if(r)for(const o of Array.from(r))o(i)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(v(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function DP(n){return`__${n}${Math.floor(1e6*Math.random())}`}function Po(n,e){return e?ir(e):(M(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}DP("rcb"),new mc(3e4,6e4);class Kb extends sP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Y9(n){return mP(n.auth,new Kb(n),n.bypassAuthState)}function Q9(n){const{auth:e,user:t}=n;return M(t,e,"internal-error"),function pP(n,e){return nb.apply(this,arguments)}(t,new Kb(n),n.bypassAuthState)}function X9(n){return Yb.apply(this,arguments)}function Yb(){return(Yb=v(function*(n){const{auth:e,user:t}=n;return M(t,e,"internal-error"),Jv(t,new Kb(n),n.bypassAuthState)})).apply(this,arguments)}class Z9{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=v(function*(i,r){e.pendingPromise={resolve:i,reject:r};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(i,r){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return v(function*(){const{urlResponse:i,sessionId:r,postBody:o,tenantId:s,error:a,type:l}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:i,sessionId:r,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(l)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y9;case"linkViaPopup":case"linkViaRedirect":return X9;case"reauthViaPopup":case"reauthViaRedirect":return Q9;default:an(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new mc(2e3,1e4);const Sc=new Map;class eQ extends Z9{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){var e=()=>super.execute,t=this;return v(function*(){let i=Sc.get(t.auth._key());if(!i){try{const o=(yield function tQ(n,e){return eC.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;i=()=>Promise.resolve(o)}catch(r){i=()=>Promise.reject(r)}Sc.set(t.auth._key(),i)}return t.bypassAuthState||Sc.set(t.auth._key(),()=>Promise.resolve(null)),i()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,i=this;return v(function*(){if("signInViaRedirect"===e.type)return t().call(i,e);if("unknown"!==e.type){if(e.eventId){const r=yield i.auth._redirectUserForId(e.eventId);if(r)return i.user=r,t().call(i,e);i.resolve(null)}}else i.resolve(null)})()}onExecution(){return v(function*(){})()}cleanUp(){}}function eC(){return(eC=v(function*(n,e){const t=TP(e),i=SP(n);if(!(yield i._isAvailable()))return!1;const r="true"===(yield i._get(t));return yield i._remove(t),r})).apply(this,arguments)}function nQ(n,e){Sc.set(n._key(),e)}function SP(n){return ir(n._redirectPersistence)}function TP(n){return tf("pendingRedirect",n.config.apiKey,n.name)}function AP(n,e){return aC.apply(this,arguments)}function aC(){return(aC=v(function*(n,e,t=!1){const i=ln(n),r=Po(i,e),s=yield new eQ(i,r,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield i._persistUserIfCurrent(s.user),yield i._setRedirectUser(null,e)),s})).apply(this,arguments)}class aQ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function lQ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RP(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!RP(e)){const r=(null===(i=e.error.code)||void 0===i?void 0:i.split("auth/")[1])||"internal-error";t.onError(Di(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(MP(e))}saveEventToCache(e){this.cachedEventUids.add(MP(e)),this.lastProcessedEventTime=Date.now()}}function MP(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RP({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function cQ(n){return cC.apply(this,arguments)}function cC(){return(cC=v(function*(n,e={}){return bt(n,"GET","/v1/projects",e)})).apply(this,arguments)}const uQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dQ=/^https?/;function uC(){return(uC=v(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield cQ(n);for(const t of e)try{if(fQ(t))return}catch{}an(n,"unauthorized-domain")})).apply(this,arguments)}function fQ(n){const e=pc(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===i?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===i}if(!dQ.test(t))return!1;if(uQ.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const pQ=new mc(3e4,6e4);function kP(){const n=mt().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}let pf=null;function gQ(n){return pf=pf||function mQ(n){return new Promise((e,t)=>{var i,r,o;function s(){kP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kP(),t(Di(n,"network-request-failed"))},timeout:pQ.get()})}if(null!==(r=null===(i=mt().gapi)||void 0===i?void 0:i.iframes)&&void 0!==r&&r.Iframe)e(gapi.iframes.getContext());else{if(null===(o=mt().gapi)||void 0===o||!o.load){const a=DP("iframefcb");return mt()[a]=()=>{gapi.load?s():t(Di(n,"network-request-failed"))},function EP(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=Di("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",function F9(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(i)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>t(l))}s()}}).catch(e=>{throw pf=null,e})}(n),pf}const _Q=new mc(5e3,15e3),bQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wQ(n){const e=n.config;M(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?vv(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,i={apiKey:e.apiKey,appName:n.name,v:ca},r=CQ.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${uc(i).slice(1)}`}function dC(){return dC=v(function*(n){const e=yield gQ(n),t=mt().gapi;return M(t,n,"internal-error"),e.open({where:document.body,url:wQ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bQ,dontclear:!0},i=>new Promise(function(){var r=v(function*(o,s){yield i.restyle({setHideOnLeave:!1});const a=Di(n,"network-request-failed"),l=mt().setTimeout(()=>{s(a)},_Q.get());function c(){mt().clearTimeout(l),o(i)}i.ping(c).then(c,()=>{s(a)})});return function(o,s){return r.apply(this,arguments)}}()))}),dC.apply(this,arguments)}const DQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class OP{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PP(n,e,t,i,r,o){M(n.config.authDomain,n,"auth-domain-config-required"),M(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ca,eventId:r};if(e instanceof Lr){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",iv(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(o||{}))s[l]=c}if(e instanceof K7){const l=e.getScopes().filter(c=>""!==c);l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];return`${function OQ({config:n}){return n.emulator?vv(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}(n)}?${uc(a).slice(1)}`}const hC="webStorageSupport",NQ=class PQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yP,this._completeRedirectFn=AP,this._overrideRedirectResult=nQ}_openPopup(e,t,i,r){var o=this;return v(function*(){var s;Nr(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=PP(e,t,i,pc(),r);return function xQ(n,e,t,i=500,r=600){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),s=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},DQ),{width:i.toString(),height:r.toString(),top:o,left:s}),c=vt().toLowerCase();t&&(a=QO(c)?"_blank":t),YO(c)&&(e=e||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function D7(n=vt()){var e;return nf(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function MQ(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}(e||"",a),new OP(null);const d=window.open(e||"",a,u);M(d,n,"popup-blocked");try{d.focus()}catch{}return new OP(d)}(e,a,Ob())})()}_openRedirect(e,t,i,r){var o=this;return v(function*(){return yield o._originValidation(e),function E9(n){mt().location.href=n}(PP(e,t,i,pc(),r)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(Nr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){var t=this;return v(function*(){const i=yield function EQ(n){return dC.apply(this,arguments)}(e),r=new aQ(e);return i.register("authEvent",o=>(M(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=i,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hC,{type:hC},r=>{var o;const s=null===(o=r?.[0])||void 0===o?void 0:o[hC];void 0!==s&&t(!!s),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function hQ(n){return uC.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tP()||kv()||nf()}};var FP="@firebase/auth",LP="0.20.11";class FQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return v(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{var r;e((null===(r=i)||void 0===r?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){M(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const UQ=vO("authIdTokenMaxAge")||300;let VP=null;const jQ=n=>function(){var e=v(function*(t){const i=t&&(yield t.getIdTokenResult()),r=i&&((new Date).getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>UQ)return;const o=i?.token;VP!==o&&(VP=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function mf(n=Zh()){const e=tr(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function s7(n,e){const t=tr(n,"auth");if(t.isInitialized()){const r=t.getImmediate();if(cc(t.getOptions(),e??{}))return r;an(r,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:NQ,persistence:[k9,v9,yP]}),i=vO("authTokenSyncURL");if(i){const o=jQ(i);(function d9(n,e,t){Xe(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function u9(n,e,t,i){Xe(n).onIdTokenChanged(e,t,i)}(t,s=>o(s))}const r=_O("auth");return r&&function x7(n,e,t){const i=ln(n);M(i._canInitEmulator,i,"emulator-config-failed"),M(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!t?.disableWarnings,o=rP(e),{host:s,port:a}=function M7(n){const e=rP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:oP(i.substr(o.length+1))}}{const[o,s]=i.split(":");return{host:o,port:oP(s)}}}(e);i.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function R7(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${r}`),t}!function VQ(n){ni(new Fn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:o,authDomain:s}=i.options;return((a,l)=>{M(o&&!o.includes(":"),"invalid-api-key",{appName:a.name}),M(!s?.includes(":"),"argument-error",{appName:a.name});const c={apiKey:o,authDomain:s,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nP(n)},u=new A7(a,l,c);return function a7(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ir);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}(u,t),u})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ni(new Fn("auth-internal",e=>{const t=ln(e.getProvider("auth").getImmediate());return new FQ(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),sn(FP,LP,function LQ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(n)),sn(FP,LP,"esm2017")}("Browser");class Vr{constructor(){this.auth=mf()}createNewUser(e,t){return new Promise((i,r)=>{(function t9(n,e,t){return _b.apply(this,arguments)})(this.auth,e,t).then(o=>{i(o.user)}).catch(o=>{r(o)})})}signIn(e,t){return new Promise((i,r)=>{(function n9(n,e,t){return function rb(n,e){return ob.apply(this,arguments)}(Xe(n),cP.credential(e,t))})(this.auth,e,t).then(o=>{i(o.user)}).catch(o=>{r(o)})})}signOut(){!function h9(n){Xe(n).signOut()}(this.auth)}static#e=this.\u0275fac=function(t){return new(t||Vr)};static#t=this.\u0275prov=x({token:Vr,factory:Vr.\u0275fac,providedIn:"root"})}function HQ(n,e){if(1&n&&(F(0,"div",10),ee(1),P()),2&n){const t=mo();be(1),wr(" ",t.errorMessage," ")}}class gf{constructor(e,t,i){this.formBuilder=e,this.authService=t,this.router=i,this.errorMessage=""}ngOnInit(){this.initForm()}initForm(){this.signInForm=this.formBuilder.group({email:["",[wo.required,wo.email]],password:["",[wo.required]]})}onSubmit(){this.authService.signIn(this.signInForm.value.email,this.signInForm.value.password).then(i=>{console.log(i),this.router.navigate(["/books"])}).catch(i=>{this.errorMessage=i.message})}static#e=this.\u0275fac=function(t){return new(t||gf)(b(OR),b(Vr),b(tt))};static#t=this.\u0275cmp=en({type:gf,selectors:[["app-signin"]],decls:16,vars:3,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group","my-2"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],["class","error  my-2",4,"ngIf"],[1,"error","my-2"]],template:function(t,i){1&t&&(F(0,"div",0)(1,"div",1)(2,"h2"),ee(3,"Connexion"),P(),F(4,"form",2),Ye("ngSubmit",function(){return i.onSubmit()}),F(5,"div",3)(6,"label",4),ee(7,"Email"),P(),Gt(8,"input",5),P(),F(9,"div",3)(10,"label",6),ee(11,"Mot de passe"),P(),Gt(12,"input",7),P(),F(13,"button",8),ee(14," Connexion "),P(),Ft(15,HQ,2,1,"div",9),P()()()),2&t&&(be(4),Fe("formGroup",i.signInForm),be(9),Fe("disabled",i.signInForm.invalid),be(2),Fe("ngIf",""!==i.errorMessage))},dependencies:[bo,gh,Ws,rh,oh,Hl,_h],styles:[".error[_ngcontent-%COMP%]{color:red;font-weight:700}"]})}function $Q(n,e){if(1&n&&(F(0,"div",10),ee(1),P()),2&n){const t=mo();be(1),wr(" ",t.errorMessage," ")}}class _f{constructor(e,t,i){this.formBuilder=e,this.authService=t,this.router=i,this.errorMessage=""}ngOnInit(){this.initForm()}initForm(){this.signUpForm=this.formBuilder.group({email:["",[wo.required,wo.email]],password:["",[wo.required,wo.pattern(/[\w\d]{6,}/)]]})}onSubmit(){this.authService.createNewUser(this.signUpForm.value.email,this.signUpForm.value.password).then(i=>{console.log(i),this.router.navigate(["/books"])}).catch(i=>{this.errorMessage=i.message})}static#e=this.\u0275fac=function(t){return new(t||_f)(b(OR),b(Vr),b(tt))};static#t=this.\u0275cmp=en({type:_f,selectors:[["app-signup"]],decls:16,vars:3,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"formGroup","ngSubmit"],[1,"form-group","my-2"],["for","email"],["type","text","id","email","formControlName","email",1,"form-control"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],["class","error  my-2",4,"ngIf"],[1,"error","my-2"]],template:function(t,i){1&t&&(F(0,"div",0)(1,"div",1)(2,"h2"),ee(3,"Cr\xe9er un compte"),P(),F(4,"form",2),Ye("ngSubmit",function(){return i.onSubmit()}),F(5,"div",3)(6,"label",4),ee(7,"Email"),P(),Gt(8,"input",5),P(),F(9,"div",3)(10,"label",6),ee(11,"Mot de passe"),P(),Gt(12,"input",7),P(),F(13,"button",8),ee(14," Cr\xe9er mon compte "),P(),Ft(15,$Q,2,1,"div",9),P()()()),2&t&&(be(4),Fe("formGroup",i.signUpForm),be(9),Fe("disabled",i.signUpForm.invalid),be(2),Fe("ngIf",""!==i.errorMessage))},dependencies:[bo,gh,Ws,rh,oh,Hl,_h],styles:[".error[_ngcontent-%COMP%]{color:red;font-weight:700}"]})}class BP{constructor(e,t,i,r){this.id=e,this.title=t,this.author=i,this.year=r}}const UP="@firebase/database",jP="0.13.10";let fC="";class GQ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ft(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:lc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class WQ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return er(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const HP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new GQ(e)}}catch{}return new WQ},No=HP("localStorage"),pC=HP("sessionStorage"),ha=new Yh("@firebase/database"),$P=function(){let n=1;return function(){return n++}}(),zP=function(n){const e=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,S(i<n.length,"Surrogate pair missing trail surrogate."),r=65536+(o<<10)+(n.charCodeAt(i)-56320)}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=63&r|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=63&r|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=63&r|128)}return e}(n),t=new WK;t.update(e);const i=t.digest();return ev.encodeByteArray(i)},Tc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Tc.apply(null,i):e+="object"==typeof i?ft(i):i,e+=" "}return e};let Fo=null,GP=!0;const Ct=function(...n){if(!0===GP&&(GP=!1,null===Fo&&!0===pC.get("logging_enabled")&&function(n,e){S(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ha.logLevel=we.VERBOSE,Fo=ha.log.bind(ha),e&&pC.set("logging_enabled",!0)):"function"==typeof n?Fo=n:(Fo=null,pC.remove("logging_enabled"))}(!0)),Fo){const e=Tc.apply(null,n);Fo(e)}},Ac=function(n){return function(...e){Ct(n,...e)}},mC=function(...n){const e="FIREBASE INTERNAL ERROR: "+Tc(...n);ha.error(e)},Si=function(...n){const e=`FIREBASE FATAL ERROR: ${Tc(...n)}`;throw ha.error(e),new Error(e)},Bt=function(...n){const e="FIREBASE WARNING: "+Tc(...n);ha.warn(e)},yf=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ar="[MIN_NAME]",Ti="[MAX_NAME]",Lo=function(n,e){if(n===e)return 0;if(n===ar||e===Ti)return-1;if(e===ar||n===Ti)return 1;{const t=vf(n),i=vf(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},YQ=function(n,e){return n===e?0:n<e?-1:1},xc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ft(e))},gC=function(n){if("object"!=typeof n||null===n)return ft(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=ft(e[i]),t+=":",t+=gC(n[e[i]]);return t+="}",t},qP=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function wt(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const KP=function(n){S(!yf(n),"Invalid JSON number");const i=1023;let r,o,s,a,l;0===n?(o=0,s=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=a+i,s=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=11;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();const u=c.join("");let d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},JQ=new RegExp("^-?(0*)\\d{1,10}$"),vf=function(n){if(JQ.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},fa=function(n){try{n()}catch(e){setTimeout(()=>{throw Bt("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Mc=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class tX{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Bt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class nX{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ct("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bt(e)}}let Rc=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const eN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,iN="websocket",rN="long_polling";class vC{constructor(e,t,i,r,o=!1,s="",a=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=No.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&No.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function oN(n,e,t){let i;if(S("string"==typeof e,"typeof type must == string"),S("object"==typeof t,"typeof params must == object"),e===iN)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==rN)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function iX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return wt(t,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}class rX{constructor(){this.counters_={}}incrementCounter(e,t=1){er(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return kK(this.counters_)}}const bC={},CC={};function wC(n){const e=n.toString();return bC[e]||(bC[e]=new rX),bC[e]}class sX{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&fa(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Br{constructor(e,t,i,r,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ac(e),this.stats_=wC(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),oN(t,rN,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sX(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if("complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new EC((...o)=>{const[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=l;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&eN.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Br.forceAllow_=!0}static forceDisallow(){Br.forceDisallow_=!0}static isAvailable(){return!(!Br.forceAllow_&&(Br.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ft(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=uO(t),r=qP(i,1840);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ft(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class EC{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=$P(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=EC.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ct("frame writing exception"),a.stack&&Ct(a.stack),Ct(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ct("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const s=this.pendingSegs.shift();i=i+"&seg"+r+"="+s.seg+"&ts"+r+"="+s.ts+"&d"+r+"="+s.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Ct("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let Cf=null;typeof MozWebSocket<"u"?Cf=MozWebSocket:typeof WebSocket<"u"&&(Cf=WebSocket);let pa=(()=>{class n{constructor(t,i,r,o,s,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ac(this.connId),this.stats_=wC(i),this.connURL=n.connectionURL_(i,a,l,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,o,s){const a={v:"5"};return typeof location<"u"&&location.hostname&&eN.test(location.hostname)&&(a.r="f"),i&&(a.s=i),r&&(a.ls=r),o&&(a.ac=o),s&&(a.p=s),oN(t,iN,a)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,No.set("previous_websocket_failure",!0);try{let r;0,this.mySock=new Cf(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const o=r.message||r.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==Cf&&!n.forceDisallow_}static previouslyFailed(){return No.isInMemoryStorage||!0===No.get("previous_websocket_failure")}markConnectionHealthy(){No.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=lc(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(S(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=ft(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=qP(i,16384);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),hN=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Br,pa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=pa&&pa.isAvailable();let r=i&&!pa.previouslyFailed();if(t.webSocketOnly&&(i||Bt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[pa];else{const o=this.transports_=[];for(const s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class vN{constructor(e,t,i,r,o,s,a,l,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ac("c:"+this.id+":"),this.transportManager_=new hN(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Mc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=xc("t",e),i=xc("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=xc("t",e),i=xc("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=xc("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?mC("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mC("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Bt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Mc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(No.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class bN{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class CN{constructor(e){this.allowedEvents_=e,this.listeners_={},S(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context))return void r.splice(o,1)}validateEventType_(e){S(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class wf extends CN{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!tv()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wf}getInitialEvent(e){return S("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ce{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function me(){return new Ce("")}function re(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ur(n){return n.pieces_.length-n.pieceNum_}function Se(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ce(n.pieces_,e)}function IC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function kc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function DN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ce(e,0)}function Ue(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Ce)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Ce(t,0)}function oe(n){return n.pieceNum_>=n.pieces_.length}function Qt(n,e){const t=re(n),i=re(e);if(null===t)return e;if(t===i)return Qt(Se(n),Se(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function SC(n,e){if(Ur(n)!==Ur(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Vn(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ur(n)>Ur(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class xX{constructor(e,t){this.errorPrefix_=t,this.parts_=kc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Kh(this.parts_[i]);IN(this)}}function IN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vo(n))}function Vo(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class TC extends CN{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new TC}getInitialEvent(e){return S("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Oc=1e3;let Df,Bo=(()=>{class n extends bN{constructor(t,i,r,o,s,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=Ac("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Oc,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");TC.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&wf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const o=++this.requestNumber_,s={r:o,a:t,b:i};this.log_(ft(s)),S(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(t){this.initConnection_();const i=new ac,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,o){this.initConnection_();const s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),S(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),S(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:o,hashFn:i,query:t,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);const s={p:r};t.tag&&(s.q=i._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,l=>{const c=l.d,u=l.s;n.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(o))===t&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(r,o),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&er(t,"w")){const r=aa(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();Bt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||function(n){const e=Wh(n).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=function(n){const t=Wh(n).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{const s=o.s,a=o.d||"error";this.authToken_===t&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),S(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,t._queryObject,i)}sendUnlisten_(t,i,r,o){this.log_("Unlisten on "+t+" for "+i);const s={p:t};o&&(s.q=r,s.t=o),this.sendRequest("n",s)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,o){const s={p:i,d:r};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,i,r,o){this.putInternal("p",t,i,r,o)}merge(t,i,r,o){this.putInternal("m",t,i,r,o)}putInternal(t,i,r,o,s){this.initConnection_();const a={p:i,d:r};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+ft(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):mC("Unrecognized action received from server: "+ft(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){S(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Oc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return v(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const u=function(){c?c.close():(l=!0,o())};t.realtime_={close:u,sendRequest:function(f){S(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);l?Ct("getToken() completed but was canceled"):(Ct("getToken() completed. Creating connection."),t.authToken_=f&&f.accessToken,t.appCheckToken_=p&&p.token,c=new vN(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,o,m=>{Bt(m+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(f){t.log_("Failed to get token: "+f),l||(t.repoInfo_.nodeAdmin&&Bt(f),u())}}})()}interrupt(t){Ct("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ct("Resuming connection for reason: "+t),delete this.interruptReasons_[t],iv(this.interruptReasons_)&&(this.reconnectDelay_=Oc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(s=>gC(s)).join("$"):"default";const o=this.removeListen_(t,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,i){const r=new Ce(t).toString();let o;if(this.listens.has(r)){const s=this.listens.get(r);o=s.get(i),s.delete(i),0===s.size&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(t,i){Ct("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){Ct("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";t["sdk."+i+"."+fC.replace(/\./g,"-")]=1,tv()?t["framework.cordova"]=1:pO()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=wf.getInstance().currentlyOnline();return iv(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ae{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ae(e,t)}}class Ef{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new ae(ar,e),r=new ae(ar,t);return 0!==this.compare(i,r)}minPost(){return ae.MIN}}class AN extends Ef{static get __EMPTY_NODE(){return Df}static set __EMPTY_NODE(e){Df=e}compare(e,t){return Lo(e.name,t.name)}isDefinedOn(e){throw sa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ae.MIN}maxPost(){return new ae(Ti,Df)}makePost(e,t){return S("string"==typeof e,"KeyIndex indexValue must always be a string."),new ae(e,Df)}toString(){return".key"}}const Ai=new AN;class If{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let xC,ii=(()=>{class n{constructor(t,i,r,o,s){this.key=t,this.value=i,this.color=r??n.RED,this.left=o??cn.EMPTY_NODE,this.right=s??cn.EMPTY_NODE}copy(t,i,r,o,s){return new n(t??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let o=this;const s=r(t,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(t,i,r),null):0===s?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(t,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return cn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,o;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return cn.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class cn{constructor(e,t=cn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new cn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ii.BLACK,null,null))}remove(e){return new cn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ii.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new If(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new If(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new If(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new If(this.root_,null,this.comparator_,!0,e)}}function LX(n,e){return Lo(n.name,e.name)}function AC(n,e){return Lo(n,e)}cn.EMPTY_NODE=new class FX{copy(e,t,i,r,o){return this}insert(e,t,i){return new ii(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const xN=function(n){return"number"==typeof n?"number:"+KP(n):"string:"+n},MN=function(n){if(n.isLeafNode()){const e=n.val();S("string"==typeof e||"number"==typeof e||"object"==typeof e&&er(e,".sv"),"Priority must be a string or number.")}else S(n===xC||n.isEmpty(),"priority of unexpected type.");S(n===xC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let RN,kN,ON,ma=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,S(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),MN(this.priorityNode_)}static set __childrenNodeConstructor(t){RN=t}static get __childrenNodeConstructor(){return RN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return oe(t)?this:".priority"===re(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=re(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:(S(".priority"!==r||1===Ur(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Se(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+xN(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?KP(this.value_):this.value_,this.lazyHash_=zP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(S(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(i),s=n.VALUE_TYPE_ORDER.indexOf(r);return S(o>=0,"Unknown leaf type: "+i),S(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Re=new class jX extends Ef{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return 0===o?Lo(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ae.MIN}maxPost(){return new ae(Ti,new ma("[PRIORITY-POST]",ON))}makePost(e,t){const i=kN(e);return new ae(t,new ma("[PRIORITY-POST]",i))}toString(){return".priority"}},HX=Math.log(2);class $X{constructor(e){this.count=parseInt(Math.log(e+1)/HX,10),this.current_=this.count-1;const r=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Sf=function(n,e,t,i){n.sort(e);const r=function(l,c){const u=c-l;let d,h;if(0===u)return null;if(1===u)return d=n[l],h=t?t(d):d,new ii(h,d.node,ii.BLACK,null,null);{const f=parseInt(u/2,10)+l,p=r(l,f),m=r(f+1,c);return d=n[f],h=t?t(d):d,new ii(h,d.node,ii.BLACK,p,m)}},a=function(l){let c=null,u=null,d=n.length;const h=function(p,m){const g=d-p,_=d;d-=p;const E=r(g+1,_),y=n[g],I=t?t(y):y;f(new ii(I,y.node,m,null,E))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){const m=l.nextBitIsOne(),g=Math.pow(2,l.count-(p+1));m?h(g,ii.BLACK):(h(g,ii.BLACK),h(g,ii.RED))}return u}(new $X(n.length));return new cn(i||e,a)};let MC;const ga={};class lr{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return S(ga&&Re,"ChildrenNode.ts has not been loaded"),MC=MC||new lr({".priority":ga},{".priority":Re}),MC}get(e){const t=aa(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cn?t:null}hasIndex(e){return er(this.indexSet_,e.toString())}addIndex(e,t){S(e!==Ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=t.getIterator(ae.Wrap);let a,s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();a=r?Sf(i,e.getCompare()):ga;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new lr(u,c)}addToIndexes(e,t){const i=qh(this.indexes_,(r,o)=>{const s=aa(this.indexSet_,o);if(S(s,"Missing index implementation for "+o),r===ga){if(s.isDefinedOn(e.node)){const a=[],l=t.getIterator(ae.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Sf(a,s.getCompare())}return ga}{const a=t.get(e.name);let l=r;return a&&(l=l.remove(new ae(e.name,a))),l.insert(e,e.node)}});return new lr(i,this.indexSet_)}removeFromIndexes(e,t){const i=qh(this.indexes_,r=>{if(r===ga)return r;{const o=t.get(e.name);return o?r.remove(new ae(e.name,o)):r}});return new lr(i,this.indexSet_)}}let Pc,K=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&MN(this.priorityNode_),this.children_.isEmpty()&&S(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pc||(Pc=new n(new cn(AC),null,lr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pc}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?Pc:i}}getChild(t){const i=re(t);return null===i?this:this.getImmediateChild(i).getChild(Se(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if(S(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new ae(t,i);let o,s;i.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,i),s=this.indexMap_.addToIndexes(r,this.children_));const a=o.isEmpty()?Pc:this.priorityNode_;return new n(o,a,s)}}updateChild(t,i){const r=re(t);if(null===r)return i;{S(".priority"!==re(t)||1===Ur(t),".priority must be the last token in a path");const o=this.getImmediateChild(r).updateChild(Se(t),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,o=0,s=!0;if(this.forEachChild(Re,(a,l)=>{i[a]=l.val(t),r++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*r){const a=[];for(const l in i)a[l]=i[l];return a}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+xN(this.getPriority().val())+":"),this.forEachChild(Re,(i,r)=>{const o=r.hash();""!==o&&(t+=":"+i+":"+o)}),this.lazyHash_=""===t?"":zP(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const o=this.resolveIndex_(r);if(o){const s=o.getPredecessorKey(new ae(t,i));return s?s.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new ae(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new ae(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,ae.Wrap);let s=o.peek();for(;null!=s&&i.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,ae.Wrap);let s=o.peek();for(;null!=s&&i.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Nc?-1:0}withIndex(t){if(t===Ai||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Ai||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Re),o=i.getIterator(Re);let s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(t){return t===Ai?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Nc=new class zX extends K{constructor(){super(new cn(AC),K.EMPTY_NODE,lr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return K.EMPTY_NODE}isEmpty(){return!1}};function $e(n,e=null){if(null===n)return K.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),S(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ma(n,$e(e));if(n instanceof Array){let t=K.EMPTY_NODE;return wt(n,(i,r)=>{if(er(n,i)&&"."!==i.substring(0,1)){const o=$e(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority($e(e))}{const t=[];let i=!1;if(wt(n,(s,a)=>{if("."!==s.substring(0,1)){const l=$e(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),t.push(new ae(s,l)))}}),0===t.length)return K.EMPTY_NODE;const o=Sf(t,LX,s=>s.name,AC);if(i){const s=Sf(t,Re.getCompare());return new K(o,$e(e),new lr({".priority":s},{".priority":Re}))}return new K(o,$e(e),lr.Default)}}Object.defineProperties(ae,{MIN:{value:new ae(ar,K.EMPTY_NODE)},MAX:{value:new ae(Ti,Nc)}}),AN.__EMPTY_NODE=K.EMPTY_NODE,ma.__childrenNodeConstructor=K,function VX(n){xC=n}(Nc),function UX(n){ON=n}(Nc),function BX(n){kN=n}($e);class RC extends Ef{constructor(e){super(),this.indexPath_=e,S(!oe(e)&&".priority"!==re(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return 0===o?Lo(e.name,t.name):o}makePost(e,t){const i=$e(e),r=K.EMPTY_NODE.updateChild(this.indexPath_,i);return new ae(t,r)}maxPost(){const e=K.EMPTY_NODE.updateChild(this.indexPath_,Nc);return new ae(Ti,e)}toString(){return kc(this.indexPath_,0).join("/")}}const kC=new class WX extends Ef{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?Lo(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ae.MIN}maxPost(){return ae.MAX}makePost(e,t){const i=$e(e);return new ae(t,i)}toString(){return".value"}};function VN(n){return{type:"value",snapshotNode:n}}function ya(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Fc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Lc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class PC{constructor(e){this.index_=e}updateChild(e,t,i,r,o,s){S(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(null!=s&&(i.isEmpty()?e.hasChild(t)?s.trackChildChange(Fc(t,a)):S(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ya(t,i)):s.trackChildChange(Lc(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(Re,(r,o)=>{t.hasChild(r)||i.trackChildChange(Fc(r,o))}),t.isLeafNode()||t.forEachChild(Re,(r,o)=>{if(e.hasChild(r)){const s=e.getImmediateChild(r);s.equals(o)||i.trackChildChange(Lc(r,o,s))}else i.trackChildChange(ya(r,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?K.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Vc{constructor(e){this.indexedFilter_=new PC(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vc.getStartPost_(e),this.endPost_=Vc.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,o,s){return this.matches(new ae(t,i))||(i=K.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,o,s)}updateFullNode(e,t,i){t.isLeafNode()&&(t=K.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(K.EMPTY_NODE);const o=this;return t.forEachChild(Re,(s,a)=>{o.matches(new ae(s,a))||(r=r.updateImmediateChild(s,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class YX{constructor(e){this.rangedFilter_=new Vc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,o,s){return this.rangedFilter_.matches(new ae(t,i))||(i=K.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,o,s):this.fullLimitUpdateChild_(e,t,i,o,s)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=K.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;r=K.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;r=r.updateImmediateChild(a.name,a.node),s++}}else{let o,s,a,l;if(r=t.withIndex(this.index_),r=r.updatePriority(K.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else l=r.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let c=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(o,d)<=0&&(u=!0),u&&c<this.limit_&&a(d,s)<=0?c++:r=r.updateImmediateChild(d.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(h,f)=>d(f,h)}else s=this.index_.getCompare();const a=e;S(a.numChildren()===this.limit_,"");const l=new ae(t,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(t)){const d=a.getImmediateChild(t);let h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=h&&(h.name===t||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:s(h,l);if(u&&!i.isEmpty()&&f>=0)return o?.trackChildChange(Lc(t,i,d)),a.updateImmediateChild(t,i);{o?.trackChildChange(Fc(t,d));const m=a.updateImmediateChild(t,K.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(o?.trackChildChange(ya(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}return i.isEmpty()?e:u&&s(c,l)>=0?(null!=o&&(o.trackChildChange(Fc(c.name,c.node)),o.trackChildChange(ya(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(c.name,K.EMPTY_NODE)):e}}class NC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Re}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return S(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return S(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ar}hasEnd(){return this.endSet_}getIndexEndValue(){return S(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return S(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ti}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return S(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Re}copy(){const e=new NC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function BN(n){const e={};if(n.isDefault())return e;let t;return n.index_===Re?t="$priority":n.index_===kC?t="$value":n.index_===Ai?t="$key":(S(n.index_ instanceof RC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ft(t),n.startSet_&&(e.startAt=ft(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+ft(n.indexStartName_))),n.endSet_&&(e.endAt=ft(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+ft(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function UN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Re&&(e.i=n.index_.toString()),e}class Af extends bN{constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Ac("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(S(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=Af.getListenId_(e,i),a={};this.listens_[s]=a;const l=BN(e._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(o,d,!1,i),aa(this.listens_,s)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",r(h,null)}})}unlisten(e,t){const i=Af.getListenId_(e,t);delete this.listens_[i]}get(e){const t=BN(e._queryParams),i=e._path.toString(),r=new ac;return this.restRequest_(i+".json",t,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uc(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=lc(a.responseText)}catch{Bt("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&Bt("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}}class tZ{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function xf(){return{value:null,children:new Map}}function va(n,e,t){if(oe(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=re(e);n.children.has(i)||n.children.set(i,xf()),va(n.children.get(i),e=Se(e),t)}}function BC(n,e,t){null!==n.value?t(e,n.value):function nZ(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{BC(r,new Ce(e.toString()+"/"+i),t)})}class iZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&wt(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class sZ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new iZ(e);const i=1e4+2e4*Math.random();Mc(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;wt(e,(r,o)=>{o>0&&er(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),Mc(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Bn=(()=>{return(n=Bn||(Bn={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Bn;var n})();function HC(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Mf{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Bn.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(oe(this.path)){if(null!=this.affectedTree.value)return S(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ce(e));return new Mf(me(),t,this.revert)}}return S(re(this.path)===e,"operationForChild called for unrelated child."),new Mf(Se(this.path),this.affectedTree,this.revert)}}class Bc{constructor(e,t){this.source=e,this.path=t,this.type=Bn.LISTEN_COMPLETE}operationForChild(e){return oe(this.path)?new Bc(this.source,me()):new Bc(this.source,Se(this.path))}}class Uo{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Bn.OVERWRITE}operationForChild(e){return oe(this.path)?new Uo(this.source,me(),this.snap.getImmediateChild(e)):new Uo(this.source,Se(this.path),this.snap)}}class ba{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Bn.MERGE}operationForChild(e){if(oe(this.path)){const t=this.children.subtree(new Ce(e));return t.isEmpty()?null:t.value?new Uo(this.source,me(),t.value):new ba(this.source,me(),t)}return S(re(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ba(this.source,Se(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class jr{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(oe(e))return this.isFullyInitialized()&&!this.filtered_;const t=re(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class aZ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Uc(n,e,t,i,r,o){const s=i.filter(a=>a.type===t);s.sort((a,l)=>function uZ(n,e,t){if(null==e.childName||null==t.childName)throw sa("Should only compare child_ events.");const i=new ae(e.childName,e.snapshotNode),r=new ae(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,a,l)),s.forEach(a=>{const l=function cZ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,o);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Rf(n,e){return{eventCache:n,serverCache:e}}function jc(n,e,t,i){return Rf(new jr(e,t,i),n.serverCache)}function HN(n,e,t,i){return Rf(n.eventCache,new jr(e,t,i))}function kf(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function jo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let $C;class ke{constructor(e,t=(()=>($C||($C=new cn(YQ)),$C))()){this.value=e,this.children=t}static fromObject(e){let t=new ke(null);return wt(e,(i,r)=>{t=t.set(new Ce(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:me(),value:this.value};if(oe(e))return null;{const i=re(e),r=this.children.get(i);if(null!==r){const o=r.findRootMostMatchingPathAndValue(Se(e),t);return null!=o?{path:Ue(new Ce(i),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(oe(e))return this;{const t=re(e),i=this.children.get(t);return null!==i?i.subtree(Se(e)):new ke(null)}}set(e,t){if(oe(e))return new ke(t,this.children);{const i=re(e),o=(this.children.get(i)||new ke(null)).set(Se(e),t),s=this.children.insert(i,o);return new ke(this.value,s)}}remove(e){if(oe(e))return this.children.isEmpty()?new ke(null):new ke(null,this.children);{const t=re(e),i=this.children.get(t);if(i){const r=i.remove(Se(e));let o;return o=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&o.isEmpty()?new ke(null):new ke(this.value,o)}return this}}get(e){if(oe(e))return this.value;{const t=re(e),i=this.children.get(t);return i?i.get(Se(e)):null}}setTree(e,t){if(oe(e))return t;{const i=re(e),o=(this.children.get(i)||new ke(null)).setTree(Se(e),t);let s;return s=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new ke(this.value,s)}}fold(e){return this.fold_(me(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Ue(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,me(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(oe(e))return null;{const o=re(e),s=this.children.get(o);return s?s.findOnPath_(Se(e),Ue(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,me(),t)}foreachOnPath_(e,t,i){if(oe(e))return this;{this.value&&i(t,this.value);const r=re(e),o=this.children.get(r);return o?o.foreachOnPath_(Se(e),Ue(t,r),i):new ke(null)}}foreach(e){this.foreach_(me(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ue(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class ri{constructor(e){this.writeTree_=e}static empty(){return new ri(new ke(null))}}function Hc(n,e,t){if(oe(e))return new ri(new ke(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let o=i.value;const s=Qt(r,e);return o=o.updateChild(s,t),new ri(n.writeTree_.set(r,o))}{const r=new ke(t),o=n.writeTree_.setTree(e,r);return new ri(o)}}}function zC(n,e,t){let i=n;return wt(t,(r,o)=>{i=Hc(i,Ue(e,r),o)}),i}function $N(n,e){if(oe(e))return ri.empty();{const t=n.writeTree_.setTree(e,new ke(null));return new ri(t)}}function GC(n,e){return null!=Ho(n,e)}function Ho(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Qt(t.path,e)):null}function zN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Re,(i,r)=>{e.push(new ae(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new ae(i,r.value))}),e}function Hr(n,e){if(oe(e))return n;{const t=Ho(n,e);return new ri(null!=t?new ke(t):n.writeTree_.subtree(e))}}function WC(n){return n.writeTree_.isEmpty()}function Ca(n,e){return GN(me(),n.writeTree_,e)}function GN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{".priority"===r?(S(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):t=GN(Ue(n,r),o,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(Ue(n,".priority"),i)),t}}function Of(n,e){return QN(e,n)}function gZ(n,e){if(n.snap)return Vn(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Vn(Ue(n.path,t),e))return!0;return!1}function yZ(n){return n.visible}function WN(n,e,t){let i=ri.empty();for(let r=0;r<n.length;++r){const o=n[r];if(e(o)){const s=o.path;let a;if(o.snap)Vn(t,s)?(a=Qt(t,s),i=Hc(i,a,o.snap)):Vn(s,t)&&(a=Qt(s,t),i=Hc(i,me(),o.snap.getChild(a)));else{if(!o.children)throw sa("WriteRecord should have .snap or .children");if(Vn(t,s))a=Qt(t,s),i=zC(i,a,o.children);else if(Vn(s,t))if(a=Qt(s,t),oe(a))i=zC(i,me(),o.children);else{const l=aa(o.children,re(a));if(l){const c=l.getChild(Se(a));i=Hc(i,me(),c)}}}}}return i}function qN(n,e,t,i,r){if(i||r){const o=Hr(n.visibleWrites,e);return!r&&WC(o)?t:r||null!=t||GC(o,me())?Ca(WN(n.allWrites,function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Vn(c.path,e)||Vn(e,c.path))},e),t||K.EMPTY_NODE):null}{const o=Ho(n.visibleWrites,e);if(null!=o)return o;{const s=Hr(n.visibleWrites,e);return WC(s)?t:null!=t||GC(s,me())?Ca(s,t||K.EMPTY_NODE):null}}}function Pf(n,e,t,i){return qN(n.writeTree,n.treePath,e,t,i)}function qC(n,e){return function vZ(n,e,t){let i=K.EMPTY_NODE;const r=Ho(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Re,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(t){const o=Hr(n.visibleWrites,e);return t.forEachChild(Re,(s,a)=>{const l=Ca(Hr(o,new Ce(s)),a);i=i.updateImmediateChild(s,l)}),zN(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}return zN(Hr(n.visibleWrites,e)).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}(n.writeTree,n.treePath,e)}function KN(n,e,t,i){return function bZ(n,e,t,i,r){S(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=Ue(e,t);if(GC(n.visibleWrites,o))return null;{const s=Hr(n.visibleWrites,o);return WC(s)?r.getChild(t):Ca(s,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function Nf(n,e){return function wZ(n,e){return Ho(n.visibleWrites,e)}(n.writeTree,Ue(n.treePath,e))}function KC(n,e,t){return function CZ(n,e,t,i){const r=Ue(e,t),o=Ho(n.visibleWrites,r);return null!=o?o:i.isCompleteForChild(t)?Ca(Hr(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function YN(n,e){return QN(Ue(n.treePath,e),n.writeTree)}function QN(n,e){return{treePath:n,writeTree:e}}class SZ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;S("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),S(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(i,Lc(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(i,Fc(i,r.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(i,ya(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw sa("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,Lc(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const XN=new class TZ{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class YC{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new jr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return KC(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jo(this.viewCache_),o=function IZ(n,e,t,i,r,o){return function EZ(n,e,t,i,r,o,s){let a;const l=Hr(n.visibleWrites,e),c=Ho(l,me());if(null!=c)a=c;else{if(null==t)return[];a=Ca(l,t)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s);let f=h.getNext();for(;f&&u.length<r;)0!==d(f,i)&&u.push(f),f=h.getNext();return u}}(n.writeTree,n.treePath,e,t,i,r,o)}(this.writes_,r,t,1,i,e);return 0===o.length?null:o[0]}}function ZN(n,e,t,i,r,o){const s=e.eventCache;if(null!=Nf(i,t))return e;{let a,l;if(oe(t))if(S(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=jo(e),d=qC(i,c instanceof K?c:K.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const c=Pf(i,jo(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{const c=re(t);if(".priority"===c){S(1===Ur(t),"Can't have a priority with additional path components");const u=s.getNode();l=e.serverCache.getNode();const d=KN(i,t,u,l);a=null!=d?n.filter.updatePriority(u,d):s.getNode()}else{const u=Se(t);let d;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();const h=KN(i,t,s.getNode(),l);d=null!=h?s.getNode().getImmediateChild(c).updateChild(u,h):s.getNode().getImmediateChild(c)}else d=KC(i,c,e.serverCache);a=null!=d?n.filter.updateChild(s.getNode(),c,d,u,r,o):s.getNode()}}return jc(e,a,s.isFullyInitialized()||oe(t),n.filter.filtersNodes())}}function Ff(n,e,t,i,r,o,s,a){const l=e.serverCache;let c;const u=s?n.filter:n.filter.getIndexedFilter();if(oe(t))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(t,i);c=u.updateFullNode(l.getNode(),f,null)}else{const f=re(t);if(!l.isCompleteForPath(t)&&Ur(t)>1)return e;const p=Se(t),g=l.getNode().getImmediateChild(f).updateChild(p,i);c=".priority"===f?u.updatePriority(l.getNode(),g):u.updateChild(l.getNode(),f,g,p,XN,null)}const d=HN(e,c,l.isFullyInitialized()||oe(t),u.filtersNodes());return ZN(n,d,t,r,new YC(r,d,o),a)}function QC(n,e,t,i,r,o,s){const a=e.eventCache;let l,c;const u=new YC(r,e,o);if(oe(t))c=n.filter.updateFullNode(e.eventCache.getNode(),i,s),l=jc(e,c,!0,n.filter.filtersNodes());else{const d=re(t);if(".priority"===d)c=n.filter.updatePriority(e.eventCache.getNode(),i),l=jc(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Se(t),f=a.getNode().getImmediateChild(d);let p;if(oe(h))p=i;else{const m=u.getCompleteChild(d);p=null!=m?".priority"===IC(h)&&m.getChild(DN(h)).isEmpty()?m:m.updateChild(h,i):K.EMPTY_NODE}l=f.equals(p)?e:jc(e,n.filter.updateChild(a.getNode(),d,p,h,u,s),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function JN(n,e){return n.eventCache.isCompleteForChild(e)}function e1(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function XC(n,e,t,i,r,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=oe(t)?i:new ke(null).setTree(t,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=e1(0,e.serverCache.getNode().getImmediateChild(d),h);l=Ff(n,l,new Ce(d),p,r,o,s,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!u.hasChild(d)&&!f){const m=e1(0,e.serverCache.getNode().getImmediateChild(d),h);l=Ff(n,l,new Ce(d),m,r,o,s,a)}}),l}class FZ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new PC(i.getIndex()),o=function QX(n){return n.loadsAllData()?new PC(n.getIndex()):n.hasLimit()?new YX(n):new Vc(n)}(i);this.processor_=function AZ(n){return{filter:n}}(o);const s=t.serverCache,a=t.eventCache,l=r.updateFullNode(K.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(K.EMPTY_NODE,a.getNode(),null),u=new jr(l,s.isFullyInitialized(),r.filtersNodes()),d=new jr(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=Rf(d,u),this.eventGenerator_=new aZ(this.query_)}get query(){return this.query_}}function BZ(n,e){const t=jo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!oe(e)&&!t.getImmediateChild(re(e)).isEmpty())?t.getChild(e):null}function t1(n){return 0===n.eventRegistrations_.length}function n1(n,e,t){const i=[];if(t){S(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(t,r);s&&i.push(s)})}if(e){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const s=n.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}else r.push(s)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function r1(n,e,t,i){e.type===Bn.MERGE&&null!==e.source.queryId&&(S(jo(n.viewCache_),"We should always have a full cache before handling merges"),S(kf(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=function MZ(n,e,t,i,r){const o=new SZ;let s,a;if(t.type===Bn.OVERWRITE){const c=t;c.source.fromUser?s=QC(n,e,c.path,c.snap,i,r,o):(S(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!oe(c.path),s=Ff(n,e,c.path,c.snap,i,r,a,o))}else if(t.type===Bn.MERGE){const c=t;c.source.fromUser?s=function kZ(n,e,t,i,r,o,s){let a=e;return i.foreach((l,c)=>{const u=Ue(t,l);JN(e,re(u))&&(a=QC(n,a,u,c,r,o,s))}),i.foreach((l,c)=>{const u=Ue(t,l);JN(e,re(u))||(a=QC(n,a,u,c,r,o,s))}),a}(n,e,c.path,c.children,i,r,o):(S(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=XC(n,e,c.path,c.children,i,r,a,o))}else if(t.type===Bn.ACK_USER_WRITE){const c=t;s=c.revert?function NZ(n,e,t,i,r,o){let s;if(null!=Nf(i,t))return e;{const a=new YC(i,e,r),l=e.eventCache.getNode();let c;if(oe(t)||".priority"===re(t)){let u;if(e.serverCache.isFullyInitialized())u=Pf(i,jo(e));else{const d=e.serverCache.getNode();S(d instanceof K,"serverChildren would be complete if leaf node"),u=qC(i,d)}c=n.filter.updateFullNode(l,u,o)}else{const u=re(t);let d=KC(i,u,e.serverCache);null==d&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),c=null!=d?n.filter.updateChild(l,u,d,Se(t),a,o):e.eventCache.getNode().hasChild(u)?n.filter.updateChild(l,u,K.EMPTY_NODE,Se(t),a,o):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Pf(i,jo(e)),s.isLeafNode()&&(c=n.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=Nf(i,me()),jc(e,c,s,n.filter.filtersNodes())}}(n,e,c.path,i,r,o):function OZ(n,e,t,i,r,o,s){if(null!=Nf(r,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=i.value){if(oe(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Ff(n,e,t,l.getNode().getChild(t),r,o,a,s);if(oe(t)){let c=new ke(null);return l.getNode().forEachChild(Ai,(u,d)=>{c=c.set(new Ce(u),d)}),XC(n,e,t,c,r,o,a,s)}return e}{let c=new ke(null);return i.foreach((u,d)=>{const h=Ue(t,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),XC(n,e,t,c,r,o,a,s)}}(n,e,c.path,c.affectedTree,i,r,o)}else{if(t.type!==Bn.LISTEN_COMPLETE)throw sa("Unknown operation type: "+t.type);s=function PZ(n,e,t,i,r){const o=e.serverCache;return ZN(n,HN(e,o.getNode(),o.isFullyInitialized()||oe(t),o.isFiltered()),t,i,XN,r)}(n,e,t.path,i,o)}const l=o.getChanges();return function RZ(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=kf(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(VN(kf(e)))}}(e,s,l),{viewCache:s,changes:l}}(n.processor_,r,e,t,i);return function xZ(n,e){S(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),S(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),S(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,o1(n,o.changes,o.viewCache.eventCache.getNode(),null)}function o1(n,e,t,i){return function lZ(n,e,t,i){const r=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function KX(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(s.childName,s.snapshotNode))}),Uc(n,r,"child_removed",e,i,t),Uc(n,r,"child_added",e,i,t),Uc(n,r,"child_moved",o,i,t),Uc(n,r,"child_changed",e,i,t),Uc(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let Lf,Bf;class s1{constructor(){this.views=new Map}}function ZC(n,e,t,i){const r=e.source.queryId;if(null!==r){const o=n.views.get(r);return S(null!=o,"SyncTree gave us an op for an invalid query."),r1(o,e,t,i)}{let o=[];for(const s of n.views.values())o=o.concat(r1(s,e,t,i));return o}}function a1(n,e,t,i,r){const s=n.views.get(e._queryIdentifier);if(!s){let a=Pf(t,r?i:null),l=!1;a?l=!0:i instanceof K?(a=qC(t,i),l=!1):(a=K.EMPTY_NODE,l=!1);const c=Rf(new jr(a,l,!1),new jr(i,r,!1));return new FZ(e,c)}return s}function l1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function $r(n,e){let t=null;for(const i of n.views.values())t=t||BZ(i,e);return t}function c1(n,e){return e._queryParams.loadsAllData()?Vf(n):n.views.get(e._queryIdentifier)}function u1(n,e){return null!=c1(n,e)}function zr(n){return null!=Vf(n)}function Vf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let YZ=1;class d1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ke(null),this.pendingWriteTree_=function DZ(){return{visibleWrites:ri.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function JC(n,e,t,i,r){return function hZ(n,e,t,i,r){S(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Hc(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?wa(n,new Uo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Gr(n,e,t=!1){const i=function pZ(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function mZ(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);S(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,s=n.allWrites.length-1;for(;r&&s>=0;){const a=n.allWrites[s];a.visible&&(s>=t&&gZ(a,i.path)?r=!1:Vn(i.path,a.path)&&(o=!0)),s--}return!!r&&(o?(function _Z(n){n.visibleWrites=WN(n.allWrites,yZ,me()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=$N(n.visibleWrites,i.path):wt(i.children,l=>{n.visibleWrites=$N(n.visibleWrites,Ue(i.path,l))}),!0))}(n.pendingWriteTree_,e)){let o=new ke(null);return null!=i.snap?o=o.set(me(),!0):wt(i.children,s=>{o=o.set(new Ce(s),!0)}),wa(n,new Mf(i.path,o,t))}return[]}function $c(n,e,t){return wa(n,new Uo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Uf(n,e,t,i,r=!1){const o=e._path,s=n.syncPointTree_.get(o);let a=[];if(s&&("default"===e._queryIdentifier||u1(s,e))){const l=function WZ(n,e,t,i){const r=e._queryIdentifier,o=[];let s=[];const a=zr(n);if("default"===r)for(const[l,c]of n.views.entries())s=s.concat(n1(c,t,i)),t1(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const l=n.views.get(r);l&&(s=s.concat(n1(l,t,i)),t1(l)&&(n.views.delete(r),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!zr(n)&&o.push(new(function $Z(){return S(Lf,"Reference.ts has not been loaded"),Lf}())(e._repo,e._path)),{removed:o,events:s}}(s,e,t,i);(function zZ(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!r){const u=-1!==c.findIndex(h=>h._queryParams.loadsAllData()),d=n.syncPointTree_.findOnPath(o,(h,f)=>zr(f));if(u&&!d){const h=n.syncPointTree_.subtree(o);if(!h.isEmpty()){const f=function nJ(n){return n.fold((e,t,i)=>{if(t&&zr(t))return[Vf(t)];{let r=[];return t&&(r=l1(t)),wt(i,(o,s)=>{r=r.concat(s)}),r}})}(h);for(let p=0;p<f.length;++p){const m=f[p],g=m.query,_=m1(n,m);n.listenProvider_.startListening(Gc(g),zc(n,g),_.hashFn,_.onComplete)}}}!d&&c.length>0&&!i&&(u?n.listenProvider_.stopListening(Gc(e),null):c.forEach(h=>{const f=n.queryToTagMap.get(Hf(h));n.listenProvider_.stopListening(Gc(h),f)}))}!function iJ(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Hf(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}(n,c)}return a}function h1(n,e,t,i){const r=tw(n,i);if(null!=r){const o=nw(r),s=o.path,a=o.queryId,l=Qt(s,e);return iw(n,s,new Uo(HC(a),l,t))}return[]}function ew(n,e,t,i=!1){const r=e._path;let o=null,s=!1;n.syncPointTree_.foreachOnPath(r,(h,f)=>{const p=Qt(h,r);o=o||$r(f,p),s=s||zr(f)});let l,a=n.syncPointTree_.get(r);a?(s=s||zr(a),o=o||$r(a,me())):(a=new s1,n.syncPointTree_=n.syncPointTree_.set(r,a)),null!=o?l=!0:(l=!1,o=K.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((f,p)=>{const m=$r(p,me());m&&(o=o.updateImmediateChild(f,m))}));const c=u1(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=Hf(e);S(!n.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=function rJ(){return YZ++}();n.queryToTagMap.set(h,f),n.tagToQueryMap.set(f,h)}let d=function GZ(n,e,t,i,r,o){const s=a1(n,e,i,r,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),function UZ(n,e){n.eventRegistrations_.push(e)}(s,t),function jZ(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Re,(o,s)=>{i.push(ya(o,s))}),t.isFullyInitialized()&&i.push(VN(t.getNode())),o1(n,i,t.getNode(),e)}(s,t)}(a,e,t,Of(n.pendingWriteTree_,r),o,l);if(!c&&!s&&!i){const h=c1(a,e);d=d.concat(function oJ(n,e,t){const i=e._path,r=zc(n,e),o=m1(n,t),s=n.listenProvider_.startListening(Gc(e),r,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(i);if(r)S(!zr(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,u,d)=>{if(!oe(c)&&u&&zr(u))return[Vf(u).query];{let h=[];return u&&(h=h.concat(l1(u).map(f=>f.query))),wt(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){const u=l[c];n.listenProvider_.stopListening(Gc(u),zc(n,u))}}return s}(n,e,h))}return d}function jf(n,e,t){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{const c=$r(a,Qt(s,e));if(c)return c});return qN(r,e,o,t,!0)}function wa(n,e){return f1(e,n.syncPointTree_,null,Of(n.pendingWriteTree_,me()))}function f1(n,e,t,i){if(oe(n.path))return p1(n,e,t,i);{const r=e.get(me());null==t&&null!=r&&(t=$r(r,me()));let o=[];const s=re(n.path),a=n.operationForChild(s),l=e.children.get(s);if(l&&a){const c=t?t.getImmediateChild(s):null,u=YN(i,s);o=o.concat(f1(a,l,c,u))}return r&&(o=o.concat(ZC(r,n,i,t))),o}}function p1(n,e,t,i){const r=e.get(me());null==t&&null!=r&&(t=$r(r,me()));let o=[];return e.children.inorderTraversal((s,a)=>{const l=t?t.getImmediateChild(s):null,c=YN(i,s),u=n.operationForChild(s);u&&(o=o.concat(p1(u,a,l,c)))}),r&&(o=o.concat(ZC(r,n,i,t))),o}function m1(n,e){const t=e.query,i=zc(n,t);return{hashFn:()=>(function LZ(n){return n.viewCache_.serverCache.getNode()}(e)||K.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function JZ(n,e,t){const i=tw(n,t);if(i){const r=nw(i),o=r.path,s=r.queryId,a=Qt(o,e);return iw(n,o,new Bc(HC(s),a))}return[]}(n,t._path,i):function ZZ(n,e){return wa(n,new Bc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function ZQ(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return Uf(n,t,null,o)}}}}function zc(n,e){const t=Hf(e);return n.queryToTagMap.get(t)}function Hf(n){return n._path.toString()+"$"+n._queryIdentifier}function tw(n,e){return n.tagToQueryMap.get(e)}function nw(n){const e=n.indexOf("$");return S(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ce(n.substr(0,e))}}function iw(n,e,t){const i=n.syncPointTree_.get(e);return S(i,"Missing sync point for query tag that we're tracking"),ZC(i,t,Of(n.pendingWriteTree_,e),null)}function Gc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function KZ(){return S(Bf,"Reference.ts has not been loaded"),Bf}())(n._repo,n._path):n}class rw{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new rw(t)}node(){return this.node_}}class ow{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ue(this.path_,e);return new ow(this.syncTree_,t)}node(){return jf(this.syncTree_,this.path_)}}const g1=function(n,e,t){return n&&"object"==typeof n?(S(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?aJ(n[".sv"],e,t):"object"==typeof n[".sv"]?lJ(n[".sv"],e):void S(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},aJ=function(n,e,t){if("timestamp"===n)return t.timestamp;S(!1,"Unexpected server value: "+n)},lJ=function(n,e,t){n.hasOwnProperty("increment")||S(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&S(!1,"Unexpected increment value: "+i);const r=e.node();if(S(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!=typeof s?i:s+i},sw=function(n,e,t){return aw(n,new rw(e),t)};function aw(n,e,t){const i=n.getPriority().val(),r=g1(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const s=n,a=g1(s.getValue(),e,t);return a!==s.getValue()||r!==s.getPriority().val()?new ma(a,$e(r)):n}{const s=n;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new ma(r))),s.forEachChild(Re,(a,l)=>{const c=aw(l,e.getImmediateChild(a),t);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}class lw{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function $f(n,e){let t=e instanceof Ce?e:new Ce(e),i=n,r=re(t);for(;null!==r;){const o=aa(i.node.children,r)||{children:{},childCount:0};i=new lw(r,i,o),t=Se(t),r=re(t)}return i}function $o(n){return n.node.value}function cw(n,e){n.node.value=e,uw(n)}function y1(n){return n.node.childCount>0}function zf(n,e){wt(n.node.children,(t,i)=>{e(new lw(t,n,i))})}function v1(n,e,t,i){t&&!i&&e(n),zf(n,r=>{v1(r,e,!0,i)}),t&&i&&e(n)}function Wc(n){return new Ce(null===n.parent?n.name:Wc(n.parent)+"/"+n.name)}function uw(n){null!==n.parent&&function dJ(n,e,t){const i=function cJ(n){return void 0===$o(n)&&!y1(n)}(t),r=er(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,uw(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,uw(n))}(n.parent,n.name,n)}const hJ=/[\[\].#$\/\u0000-\u001F\u007F]/,fJ=/[\[\].#$\u0000-\u001F\u007F]/,dw=10485760,Gf=function(n){return"string"==typeof n&&0!==n.length&&!hJ.test(n)},b1=function(n){return"string"==typeof n&&0!==n.length&&!fJ.test(n)},Kc=function(n,e,t){const i=t instanceof Ce?new xX(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vo(i));if("function"==typeof e)throw new Error(n+"contains a function "+Vo(i)+" with contents = "+e.toString());if(yf(e))throw new Error(n+"contains "+e.toString()+" "+Vo(i));if("string"==typeof e&&e.length>dw/3&&Kh(e)>dw)throw new Error(n+"contains a string greater than "+dw+" utf8 bytes "+Vo(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,o=!1;if(wt(e,(s,a)=>{if(".value"===s)r=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!Gf(s)))throw new Error(n+" contains an invalid key ("+s+") "+Vo(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function MX(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Kh(e),IN(n)})(i,s),Kc(n,a,i),function RX(n){const e=n.parts_.pop();n.byteLength_-=Kh(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&o)throw new Error(n+' contains ".value" child '+Vo(i)+" in addition to actual children.")}},fw=function(n,e,t,i){if(!(i&&void 0===t||b1(t)))throw new Error(la(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')};class _J{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wf(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();null!==t&&!SC(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)}function E1(n,e,t){Wf(n,t),D1(n,i=>SC(i,e))}function vn(n,e,t){Wf(n,t),D1(n,i=>Vn(i,e)||Vn(e,i))}function D1(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(yJ(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function yJ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Fo&&Ct("event: "+t.toString()),fa(i)}}}class bJ{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _J,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xf(),this.transactionQueueTree_=new lw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function S1(n){const t=n.infoData_.getNode(new Ce(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Qc(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:S1(n)})}function T1(n,e,t,i,r){n.dataUpdateCount++;const o=new Ce(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(r)if(i){const l=qh(t,c=>$e(c));s=function eJ(n,e,t,i){const r=tw(n,i);if(r){const o=nw(r),s=o.path,a=o.queryId,l=Qt(s,e),c=ke.fromObject(t);return iw(n,s,new ba(HC(a),l,c))}return[]}(n.serverSyncTree_,o,l,r)}else{const l=$e(t);s=h1(n.serverSyncTree_,o,l,r)}else if(i){const l=qh(t,c=>$e(c));s=function XZ(n,e,t){const i=ke.fromObject(t);return wa(n,new ba({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,o,l)}else{const l=$e(t);s=$c(n.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=Da(n,o)),vn(n.eventQueue_,a,s)}function A1(n,e){pw(n,"connected",e),!1===e&&function IJ(n){Ea(n,"onDisconnectEvents");const e=Qc(n),t=xf();BC(n.onDisconnect_,me(),(r,o)=>{const s=function(n,e,t,i){return aw(e,new ow(t,n),i)}(r,o,n.serverSyncTree_,e);va(t,r,s)});let i=[];BC(t,me(),(r,o)=>{i=i.concat($c(n.serverSyncTree_,r,o));const s=yw(n,r);Da(n,s)}),n.onDisconnect_=xf(),vn(n.eventQueue_,me(),i)}(n)}function pw(n,e,t){const i=new Ce("/.info/"+e),r=$e(t);n.infoData_.updateSnapshot(i,r);const o=$c(n.infoSyncTree_,i,r);vn(n.eventQueue_,i,o)}function qf(n){return n.nextWriteId_++}function mw(n,e,t,i,r){Ea(n,"set",{path:e.toString(),value:t,priority:i});const o=Qc(n),s=$e(t,i),a=jf(n.serverSyncTree_,e),l=sw(s,a,o),c=qf(n),u=JC(n.serverSyncTree_,e,l,c,!0);Wf(n.eventQueue_,u),n.server_.put(e.toString(),s.val(!0),(h,f)=>{const p="ok"===h;p||Bt("set at "+e+" failed: "+h);const m=Gr(n.serverSyncTree_,c,!p);vn(n.eventQueue_,e,m),function Wr(n,e,t,i){e&&fa(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let o=r;i&&(o+=": "+i);const s=new Error(o);s.code=r,e(s)}})}(0,r,h,f)});const d=yw(n,e);Da(n,d),vn(n.eventQueue_,d,[])}function gw(n,e,t){let i;i=".info"===re(e._path)?Uf(n.infoSyncTree_,e,t):Uf(n.serverSyncTree_,e,t),E1(n.eventQueue_,e._path,i)}function Ea(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ct(t,...e)}function _w(n,e,t){return jf(n.serverSyncTree_,e,t)||K.EMPTY_NODE}function Kf(n,e=n.transactionQueueTree_){if(e||Yf(n,e),$o(e)){const t=k1(n,e);S(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function kJ(n,e,t){const i=t.map(c=>c.currentWriteId),r=_w(n,e,i);let o=r;const s=r.hash();for(let c=0;c<t.length;c++){const u=t[c];S(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Qt(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}const a=o.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Ea(n,"transaction put response",{path:l.toString(),status:c});let u=[];if("ok"===c){const d=[];for(let h=0;h<t.length;h++)t[h].status=2,u=u.concat(Gr(n.serverSyncTree_,t[h].currentWriteId)),t[h].onComplete&&d.push(()=>t[h].onComplete(null,!0,t[h].currentOutputSnapshotResolved)),t[h].unwatcher();Yf(n,$f(n.transactionQueueTree_,e)),Kf(n,n.transactionQueueTree_),vn(n.eventQueue_,e,u);for(let h=0;h<d.length;h++)fa(d[h])}else{if("datastale"===c)for(let d=0;d<t.length;d++)t[d].status=3===t[d].status?4:0;else{Bt("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=c}Da(n,e)}},s)}(n,Wc(e),t)}else y1(e)&&zf(e,t=>{Kf(n,t)})}function Da(n,e){const t=R1(n,e),i=Wc(t);return function OJ(n,e,t){if(0===e.length)return;const i=[];let r=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=Qt(t,l.path);let d,u=!1;if(S(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,r=r.concat(Gr(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",r=r.concat(Gr(n.serverSyncTree_,l.currentWriteId,!0));else{const h=_w(n,l.path,s);l.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){Kc("transaction failed: Data returned ",f,l.path);let p=$e(f);"object"==typeof f&&null!=f&&er(f,".priority")||(p=p.updatePriority(h.getPriority()));const g=l.currentWriteId,_=Qc(n),E=sw(p,h,_);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=E,l.currentWriteId=qf(n),s.splice(s.indexOf(g),1),r=r.concat(JC(n.serverSyncTree_,l.path,E,l.currentWriteId,l.applyLocally)),r=r.concat(Gr(n.serverSyncTree_,g,!0))}else u=!0,d="nodata",r=r.concat(Gr(n.serverSyncTree_,l.currentWriteId,!0))}vn(n.eventQueue_,t,r),r=[],u&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&i.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Yf(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)fa(i[a]);Kf(n,n.transactionQueueTree_)}(n,k1(n,t),i),i}function R1(n,e){let t,i=n.transactionQueueTree_;for(t=re(e);null!==t&&void 0===$o(i);)i=$f(i,t),t=re(e=Se(e));return i}function k1(n,e){const t=[];return O1(n,e,t),t.sort((i,r)=>i.order-r.order),t}function O1(n,e,t){const i=$o(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);zf(e,r=>{O1(n,r,t)})}function Yf(n,e){const t=$o(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,cw(e,t.length>0?t:void 0)}zf(e,i=>{Yf(n,i)})}function yw(n,e){const t=Wc(R1(n,e)),i=$f(n.transactionQueueTree_,e);return function uJ(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{vw(n,r)}),vw(n,i),v1(i,r=>{vw(n,r)}),t}function vw(n,e){const t=$o(e);if(t){const i=[];let r=[],o=-1;for(let s=0;s<t.length;s++)3===t[s].status||(1===t[s].status?(S(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(S(0===t[s].status,"Unexpected transaction status in abort"),t[s].unwatcher(),r=r.concat(Gr(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&i.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?cw(e,void 0):t.length=o+1,vn(n.eventQueue_,Wc(e),r);for(let s=0;s<i.length;s++)fa(i[s])}}const bw=function(n,e){const t=FJ(n),i=t.namespace;return"firebase.com"===t.domain&&Si(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Si("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new vC(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Ce(t.pathString)}},FJ=function(n){let e="",t="",i="",r="",o="",s=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let u=n.indexOf("/");-1===u&&(u=n.length);let d=n.indexOf("?");-1===d&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(r=function PJ(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(n.substring(u,d)));const h=function NJ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Bt(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,d)));c=e.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())t="localhost";else if(f.split(".").length<=2)t=f;else{const p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),t=e.substring(p+1),o=i}"ns"in h&&(o=h.ns)}return{host:e,port:l,domain:t,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};class P1{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ft(this.snapshot.exportVal())}}class N1{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cw{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return S(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class bn{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return oe(this._path)?null:IC(this._path)}get ref(){return new oi(this._repo,this._path)}get _queryIdentifier(){const e=UN(this._queryParams),t=gC(e);return"{}"===t?"default":t}get _queryObject(){return UN(this._queryParams)}isEqual(e){if(!((e=Xe(e))instanceof bn))return!1;const t=this._repo===e._repo,i=SC(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function TX(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class oi extends bn{constructor(e,t){super(e,t,new NC,!1)}get parent(){const e=DN(this._path);return null===e?null:new oi(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class zo{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ce(e),i=Ia(this.ref,e);return new zo(this._node.getChild(t),i,Re)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new zo(r,Ia(this.ref,i),Re)))}hasChild(e){const t=new Ce(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ww(n,e){return(n=Xe(n))._checkNotDeleted("ref"),void 0!==e?Ia(n._root,e):n._root}function Ia(n,e){return null===re((n=Xe(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),fw("child","path",t,!1)):fw("child","path",e,!1),new oi(n._repo,Ue(n._path,e));var t}function Ew(n,e){(function(n,e){if(".info"===re(e))throw new Error(n+" failed = Can't modify data under /.info/")})("set",(n=Xe(n))._path),function(n,e,t,i){i&&void 0===e||Kc(la(n,"value"),e,t)}("set",e,n._path,!1);const t=new ac;return mw(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function VJ(n){n=Xe(n);const e=new Cw(()=>{}),t=new Xc(e);return function EJ(n,e,t){const i=function tJ(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(c,u)=>{const d=Qt(c,t);i=i||$r(u,d)});let r=n.syncPointTree_.get(t);r?i=i||$r(r,me()):(r=new s1,n.syncPointTree_=n.syncPointTree_.set(t,r));const o=null!=i,s=o?new jr(i,!0,!1):null;return function VZ(n){return kf(n.viewCache_)}(a1(r,e,Of(n.pendingWriteTree_,e._path),o?s.getNode():K.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const o=$e(r).withIndex(e._queryParams.getIndex());let s;if(ew(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())s=$c(n.serverSyncTree_,e._path,o);else{const a=zc(n.serverSyncTree_,e);s=h1(n.serverSyncTree_,e._path,o,a)}return vn(n.eventQueue_,e._path,s),Uf(n.serverSyncTree_,e,t,null,!0),o},r=>(Ea(n,"get for query "+ft(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new zo(i,new oi(n._repo,n._path),n._queryParams.getIndex()))}class Xc{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new P1("value",this,new zo(e.snapshotNode,new oi(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new N1(this,e,t):null}matches(e){return e instanceof Xc&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Zf{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new N1(this,e,t):null}createEvent(e,t){S(null!=e.childName,"Child events should have a childName.");const i=Ia(new oi(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new P1(e.type,this,new zo(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Zf&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function F1(n,e,t,i){return function Zc(n,e,t,i,r){let o;if("object"==typeof i&&(o=void 0,r=i),"function"==typeof i&&(o=i),r&&r.onlyOnce){const l=t,c=(u,d)=>{gw(n._repo,n,a),l(u,d)};c.userCallback=t.userCallback,c.context=t.context,t=c}const s=new Cw(t,o||void 0),a="value"===e?new Xc(s):new Zf(e,s);return function xJ(n,e,t){let i;i=".info"===re(e._path)?ew(n.infoSyncTree_,e,t):ew(n.serverSyncTree_,e,t),E1(n.eventQueue_,e._path,i)}(n._repo,n,a),()=>gw(n._repo,n,a)}(n,"value",e,t,i)}(function HZ(n){S(!Lf,"__referenceConstructor has already been defined"),Lf=n})(oi),function qZ(n){S(!Bf,"__referenceConstructor has already been defined"),Bf=n}(oi);const Dw={};function QJ(n,e,t,i,r){let o=i||n.options.databaseURL;void 0===o&&(n.options.projectId||Si("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ct("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,s=bw(o,r),a=s.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=bw(o,r),a=s.repoInfo):l=!s.repoInfo.secure;const u=r&&l?new Rc(Rc.OWNER):new nX(n.name,n.options,e);(function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Gf(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),b1(n)}(t))throw new Error(la(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",s),oe(s.path)||Si("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function ZJ(n,e,t,i){let r=Dw[e.name];r||(r={},Dw[e.name]=r);let o=r[n.toURLString()];return o&&Si("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new bJ(n,false,t,i),r[n.toURLString()]=o,o}(a,n,u,new tX(n.name,t));return new eee(d,n)}class eee{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function CJ(n,e,t){if(n.stats_=wC(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Af(n.repoInfo_,(i,r,o,s)=>{T1(n,i,r,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>A1(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ft(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Bo(n.repoInfo_,e,(i,r,o,s)=>{T1(n,i,r,o,s)},i=>{A1(n,i)},i=>{!function wJ(n,e){wt(e,(t,i)=>{pw(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function oX(n,e){const t=n.toString();return CC[t]||(CC[t]=e()),CC[t]}(n.repoInfo_,()=>new sZ(n.stats_,n.server_)),n.infoData_=new tZ,n.infoSyncTree_=new d1({startListening:(i,r,o,s)=>{let a=[];const l=n.infoData_.getNode(i._path);return l.isEmpty()||(a=$c(n.infoSyncTree_,i._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),pw(n,"connected",!1),n.serverSyncTree_=new d1({startListening:(i,r,o,s)=>(n.server_.listen(i,o,r,(a,l)=>{const c=s(a,l);vn(n.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new oi(this._repo,me())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function XJ(n,e){const t=Dw[e];(!t||t[n.key]!==n)&&Si(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function M1(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Si("Cannot call "+e+" on a deleted database.")}}function j1(n=Zh(),e){const t=tr(n,"database").getImmediate({identifier:e}),i=yO("database");return i&&function tee(n,e,t,i={}){(n=Xe(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Si("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Si('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Rc(Rc.OWNER);else if(i.mockUserToken){const s="string"==typeof i.mockUserToken?i.mockUserToken:bO(i.mockUserToken,n.app.options.projectId);o=new Rc(s)}!function YJ(n,e,t,i){n.repoInfo_=new vC(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,o)}(t,...i),t}Bo.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Bo.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function nee(n){(function zQ(n){fC=n})(ca),ni(new Fn("database",(e,{instanceIdentifier:t})=>QJ(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),sn(UP,jP,n),sn(UP,jP,"esm2017")}();const H1="firebasestorage.googleapis.com",$1="storageBucket";class ze extends ti{constructor(e,t,i=0){super(Iw(e),`Firebase Storage: ${t} (${Iw(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Iw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Iw(n){return"storage/"+n}function Sw(){return new ze("unknown","An unknown error occurred, please check the error payload for server response.")}function z1(){return new ze("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function G1(){return new ze("canceled","User canceled the upload/download.")}function W1(){return new ze("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Tw(n){return new ze("invalid-argument",n)}function q1(){return new ze("app-deleted","The Firebase app was deleted.")}function Jc(n,e){return new ze("invalid-format","String does not match format '"+n+"': "+e)}function eu(n){throw new ze("internal-error","Internal error: "+n)}class Xt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Xt.makeFromUrl(e,t)}catch{return new Xt(e,"")}if(""===i.path)return i;throw function pee(n){return new ze("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+r+"(/(.*))?$","i");function c(I){I.path_=decodeURIComponent(I.path)}const d=t.replace(/[.]/g,"\\."),y=[{regex:a,indices:{bucket:1,path:3},postModify:function o(I){"/"===I.path.charAt(I.path.length-1)&&(I.path_=I.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===H1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<y.length;I++){const q=y[I],Y=q.regex.exec(e);if(Y){let xt=Y[q.indices.path];xt||(xt=""),i=new Xt(Y[q.indices.bucket],xt),q.postModify(i);break}}if(null==i)throw function fee(n){return new ze("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class bee{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Jf(n){return"string"==typeof n||n instanceof String}function K1(n){return Aw()&&n instanceof Blob}function Aw(){return typeof Blob<"u"&&!function hO(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()}function xw(n,e,t,i){if(i<e)throw Tw(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw Tw(`Invalid value for '${n}'. Expected ${t} or less.`)}function cr(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function Y1(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var Kr=(()=>{return(n=Kr||(Kr={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Kr;var n})();function Q1(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||r||o}class See{constructor(e,t,i,r,o,s,a,l,c,u,d,h=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const t=(i,r)=>{const o=this.resolve_,s=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function Eee(n){return void 0!==n}(l)?o():o(l)}catch(l){s(l)}else if(null!==a){const l=Sw();l.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,l):l)}else s(r.canceled?this.appDelete_?q1():G1():z1())};this.canceled_?t(0,new ep(!1,null,!0)):this.backoffId_=function Cee(n,e,t){let i=1,r=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(...g){c||(c=!0,e.apply(null,g))}function d(g){r=setTimeout(()=>{r=null,n(f,l())},g)}function h(){o&&clearTimeout(o)}function f(g,..._){if(c)return void h();if(g)return h(),void u.call(null,g,..._);if(l()||s)return h(),void u.call(null,g,..._);let y;i<64&&(i*=2),1===a?(a=2,y=0):y=1e3*(i+Math.random()),d(y)}let p=!1;function m(g){p||(p=!0,h(),!c&&(null!==r?(g||(a=2),clearTimeout(r),d(0)):g||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,m(!0)},t),m}((i,r)=>{if(r)return void i(!1,new ep(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Kr.NO_ERROR,l=o.getStatus();if((!a||Q1(l,this.additionalRetryCodes_))&&this.retry){const u=o.getErrorCode()===Kr.ABORT;return void i(!1,new ep(!1,null,u))}const c=-1!==this.successCodes_.indexOf(l);i(!0,new ep(c,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function wee(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ep{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function Oee(...n){const e=function kee(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(Aw())return new Blob(n);throw new ze("unsupported-environment","This browser doesn't seem to support creating Blobs")}class Mw{constructor(e,t){this.data=e,this.contentType=t||null}}function Z1(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function J1(n,e){switch(n){case"base64":{const r=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(r||o)throw Jc(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const r=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(r||o)throw Jc(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Nee(n){if(typeof atob>"u")throw function yee(n){return new ze("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(r){throw r.message.includes("polyfill")?r:Jc(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class eF{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Jc("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function Bee(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class ur{constructor(e,t){let i=0,r="";K1(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(K1(this.data_)){const r=function Pee(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new ur(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new ur(i,!0)}}static getBlob(...e){if(Aw()){const t=e.map(i=>i instanceof ur?i.data_:i);return new ur(Oee.apply(null,t))}{const t=e.map(s=>Jf(s)?function X1(n,e){switch(n){case"raw":return new Mw(Z1(e));case"base64":case"base64url":return new Mw(J1(n,e));case"data_url":return new Mw(function Lee(n){const e=new eF(n);return e.base64?J1("base64",e.rest):function Fee(n){let e;try{e=decodeURIComponent(n)}catch{throw Jc("data_url","Malformed data URL.")}return Z1(e)}(e.rest)}(e),function Vee(n){return new eF(n).contentType}(e))}throw Sw()}("raw",s).data:s.data_);let i=0;t.forEach(s=>{i+=s.byteLength});const r=new Uint8Array(i);let o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)r[o++]=s[a]}),new ur(r,!0)}}uploadData(){return this.data_}}function Rw(n){let e;try{e=JSON.parse(n)}catch{return null}return function Iee(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function tF(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Hee(n,e){return e}class Zt{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Hee}}let tp=null;function tu(){if(tp)return tp;const n=[];n.push(new Zt("bucket")),n.push(new Zt("generation")),n.push(new Zt("metageneration")),n.push(new Zt("name","fullPath",!0));const t=new Zt("name");t.xform=function e(o,s){return function $ee(n){return!Jf(n)||n.length<2?n:tF(n)}(s)},n.push(t);const r=new Zt("size");return r.xform=function i(o,s){return void 0!==s?Number(s):s},n.push(r),n.push(new Zt("timeCreated")),n.push(new Zt("updated")),n.push(new Zt("md5Hash",null,!0)),n.push(new Zt("cacheControl",null,!0)),n.push(new Zt("contentDisposition",null,!0)),n.push(new Zt("contentEncoding",null,!0)),n.push(new Zt("contentLanguage",null,!0)),n.push(new Zt("contentType",null,!0)),n.push(new Zt("metadata","customMetadata",!0)),tp=n,tp}function nF(n,e,t){const i=Rw(e);return null===i?null:function Gee(n,e,t){const i={type:"file"},r=t.length;for(let o=0;o<r;o++){const s=t[o];i[s.local]=s.xform(i,e[s.server])}return function zee(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Xt(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(i,n),i}(n,i,t)}function kw(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class Ri{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ki(n){if(!n)throw Sw()}function np(n,e){return function t(i,r){const o=nF(n,r,e);return ki(null!==o),o}}function Sa(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function dee(){return new ze("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function uee(){return new ze("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function cee(n){return new ze("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hee(n){return new ze("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function nu(n){const e=Sa(n);return function t(i,r){let o=e(i,r);return 404===i.getStatus()&&(o=function lee(n){return new ze("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=r.serverResponse,o}}function aF(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function tte(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class ip{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function Ow(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ki(!1)}return ki(!!t&&-1!==(e||["active"]).indexOf(t)),t}function Pw(n){switch(n){case"running":case"pausing":case"canceling":return"running";case"paused":return"paused";case"success":return"success";case"canceled":return"canceled";default:return"error"}}class ote{constructor(e,t,i){if(function Dee(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Ta(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class ste{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw eu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw eu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ate extends ste{initXhr(){this.xhr_.responseType="text"}}function ai(){return new ate}class hte{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=tu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(Q1(r.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=z1()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function nte(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),s=aF(e,i,r),a={name:s.fullPath},l=cr(o,n.host,n._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},d=kw(s,t),p=new Ri(l,"POST",function f(m){let g;Ow(m);try{g=m.getResponseHeader("X-Goog-Upload-URL")}catch{ki(!1)}return ki(Jf(g)),g},n.maxUploadRetryTime);return p.urlParams=a,p.headers=u,p.body=d,p.errorHandler=Sa(e),p}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ai,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function ite(n,e,t,i){const l=new Ri(t,"POST",function o(c){const u=Ow(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ki(!1)}d||ki(!1);const h=Number(d);return ki(!isNaN(h)),new ip(h,i.size(),"final"===u)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Sa(e),l}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(r,ai,t,i);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ip(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let s;try{s=function rte(n,e,t,i,r,o,s,a){const l=new ip(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function gee(){return new ze("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let u=c;r>0&&(u=Math.min(u,r));const d=l.current;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=i.slice(d,d+u);if(null===m)throw W1();const y=new Ri(t,"POST",function g(I,q){const Y=Ow(I,["active","final"]),Ge=l.current+u,xt=i.size();let Mt;return Mt="final"===Y?np(e,o)(I,q):null,new ip(Ge,xt,"final"===Y,Mt)},e.maxUploadRetryTime);return y.headers=p,y.body=m.uploadData(),y.progressCallback=a||null,y.errorHandler=Sa(n),y}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(s,ai,r,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=function oF(n,e,t){const r=cr(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Ri(r,"GET",np(n,t),s);return a.errorHandler=nu(e),a}(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ai,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function lF(n,e,t,i,r){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let y="";for(let I=0;I<2;I++)y+=Math.random().toString().slice(2);return y}();s["Content-Type"]="multipart/related; boundary="+l;const c=aF(e,i,r),u=kw(c,t),f=ur.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===f)throw W1();const p={name:c.fullPath},m=cr(o,n.host,n._protocol),_=n.maxUploadRetryTime,E=new Ri(m,"POST",np(n,t),_);return E.urlParams=p,E.headers=s,E.body=f.uploadData(),E.errorHandler=Sa(e),E}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ai,e,t);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=G1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Pw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const o=new ote(t||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Pw(this._state)){case"success":Ta(this._resolve.bind(null,this.snapshot))();break;case"canceled":case"error":Ta(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Pw(this._state)){case"running":case"paused":e.next&&Ta(e.next.bind(e,this.snapshot))();break;case"success":e.complete&&Ta(e.complete.bind(e))();break;default:e.error&&Ta(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Go{constructor(e,t){this._service=e,this._location=t instanceof Xt?t:Xt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Go(e,t)}get root(){const e=new Xt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tF(this._location.path)}get storage(){return this._service}get parent(){const e=function Uee(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Xt(this._location.bucket,e);return new Go(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function vee(n){return new ze("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function bte(n){n._throwIfRoot("getDownloadURL");const e=function Zee(n,e,t){const r=cr(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Ri(r,"GET",function Qee(n,e){return function t(i,r){const o=nF(n,r,e);return ki(null!==o),function Wee(n,e,t,i){const r=Rw(e);if(null===r||!Jf(r.downloadTokens))return null;const o=r.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const d=n.fullPath;return cr("/b/"+s(n.bucket)+"/o/"+s(d),t,i)+Y1({alt:"media",token:c})})[0]}(o,r,n.host,n._protocol)}}(n,t),s);return a.errorHandler=nu(e),a}(n.storage,n._location,tu());return n.storage.makeRequestWithTokens(e,ai).then(t=>{if(null===t)throw function _ee(){return new ze("no-download-url","The given file does not have any download URLs.")}();return t})}function mF(n,e){if(n instanceof Fw){const t=n;if(null==t._bucket)throw function mee(){return new ze("no-default-bucket","No default bucket found. Did you set the '"+$1+"' property when initializing the app?")}();const i=new Go(t,t._bucket);return null!=e?mF(i,e):i}return void 0!==e?function pF(n,e){const t=function jee(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Xt(n._location.bucket,t);return new Go(n.storage,i)}(n,e):n}function gF(n,e){const t=e?.[$1];return null==t?null:Xt.makeFromBucketSpec(t,n)}class Fw{constructor(e,t,i,r,o){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=H1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Xt.makeFromBucketSpec(r,this._host):gF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Xt.makeFromBucketSpec(this._url,e):gF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return v(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return v(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Go(this,e)}_makeRequest(e,t,i,r,o=!0){if(this._deleted)return new bee(q1());{const s=function Ree(n,e,t,i,r,o,s=!0){const a=Y1(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return function xee(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function Tee(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function Aee(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,o),function Mee(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,i),new See(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,s)}(e,this._appId,i,r,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var i=this;return v(function*(){const[r,o]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,o).getPromise()})()}}const _F="@firebase/storage",vF="storage";function bF(n,e){return function Dte(n,e){if(e&&function wte(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Fw)return function Ete(n,e){return new Go(n,e)}(n,e);throw Tw("To use ref(service, url), the first argument must be a Storage instance.")}return mF(n,e)}(n=Xe(n),e)}function CF(n=Zh(),e){const i=tr(n=Xe(n),vF).getImmediate({identifier:e}),r=yO("storage");return r&&function xte(n,e,t,i={}){!function Ite(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:bO(r,n.app.options.projectId))}(n,e,t,i)}(i,...r),i}function Mte(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new Fw(t,i,r,e,ca)}!function Rte(){ni(new Fn(vF,Mte,"PUBLIC").setMultipleInstances(!0)),sn(_F,"0.9.14",""),sn(_F,"0.9.14","esm2017")}();class Yr{constructor(){this.books=[],this.booksSubject=new Ee,this.booksRef=ww(j1(),"/books")}emitBooks(){this.booksSubject.next(this.books)}getLastBookId(){let e=this.books.length-1;return-1===e?0:this.books[e].id}saveBooks(){Ew(this.booksRef,this.books)}getBooks(){F1(this.booksRef,e=>{const t=e.val();this.books=t||[],this.emitBooks()})}getSingleBook(e){return new Promise((t,i)=>{VJ(ww(j1(),"/books/"+e)).then(r=>{r.exists()?t(r.val()):console.log("No data available")}).catch(r=>{i(r)})})}createNewBook(e){this.books.push(e),this.saveBooks(),this.emitBooks()}updateBook(e){let t=this.books.findIndex(i=>i.id===e.id);-1!==t&&(this.books[t]=e,this.saveBooks(),this.emitBooks())}removeBook(e){e.photo&&function Ate(n){return function Cte(n){n._throwIfRoot("deleteObject");const e=function ete(n,e){const i=cr(e.fullServerUrl(),n.host,n._protocol),a=new Ri(i,"DELETE",function s(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=nu(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ai)}(n=Xe(n))}(bF(CF(),e.photo)).then(()=>{console.log("Photo supprim\xe9e")}).catch(o=>{console.log("Echec lors de la suppression de la photo:",o)});let t=this.books.findIndex(i=>i.id===e.id);-1!==t&&(this.books.splice(t,1),this.saveBooks(),this.emitBooks())}uploadFile(e){return new Promise((t,i)=>{const r=Date.now().toString()+e.name,a=function Ste(n,e,t){return function mte(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new hte(n,new ur(e),t)}(n=Xe(n),e,t)}(bF(CF(),"images/"+r),e);a.on("state_changed",l=>{switch(l.state){case"paused":console.log("Upload en pause");break;case"running":console.log("Upload en cours...")}},l=>{console.log("Erreur lors de l'upload:",l),i()},()=>{(function Tte(n){return bte(n=Xe(n))})(a.snapshot.ref).then(l=>{t(l)})})})}static#e=this.\u0275fac=function(t){return new(t||Yr)};static#t=this.\u0275prov=x({token:Yr,factory:Yr.\u0275fac,providedIn:"root"})}function kte(n,e){1&n&&(F(0,"h2"),ee(1,"Ajouter un livre"),P())}function Ote(n,e){1&n&&(F(0,"h2"),ee(1,"Modifier un livre"),P())}function Pte(n,e){1&n&&(F(0,"p",16),ee(1,"Fichi\xe9 charg\xe9"),P())}class iu{constructor(e,t,i){this.booksService=e,this.router=t,this.route=i,this.book=new BP(-1,"","",""),this.booksSubscription=new gt,this.fileIsUploading=!1,this.fileUploaded=!1}ngOnInit(){if(void 0===this.route.snapshot.params.id)return;let e=Number(this.route.snapshot.params.id);isFinite(e)?(this.booksSubscription=this.booksService.booksSubject.subscribe(t=>{let i=t.findIndex(r=>r.id===e);i>=0?this.book=t[i]:this.router.navigate(["/books"])}),this.booksService.emitBooks()):this.router.navigate(["/books"])}onNewBook(){this.router.navigate(["/books","new"])}ngOnDestroy(){this.booksSubscription.unsubscribe()}onSubmit(e){let t=new BP(this.book.id,e.value.title,e.value.author,e.value.year);this.fileUrl&&""!==this.fileUrl&&(t.photo=this.fileUrl),-1===this.book.id?(t.id=this.booksService.getLastBookId()+1,this.booksService.createNewBook(t)):this.booksService.updateBook(t),this.router.navigate(["/books"])}onUploadFile(e){this.fileIsUploading=!0,this.booksService.uploadFile(e).then(t=>{this.fileUrl=t,this.fileIsUploading=!1,this.fileUploaded=!0}).catch(()=>{this.fileUrl="",this.fileIsUploading=!1,this.fileUploaded=!1})}detectFiles(e){this.onUploadFile(e.target.files[0])}static#e=this.\u0275fac=function(t){return new(t||iu)(b(Yr),b(tt),b(Or))};static#t=this.\u0275cmp=en({type:iu,selectors:[["app-book-form"]],decls:25,vars:7,consts:[[4,"ngIf"],[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group","my-2"],["for","title"],["type","text","id","title","name","title","required","",1,"form-control",3,"ngModel"],["for","author"],["type","text","id","author","name","author","required","",1,"form-control",3,"ngModel"],["for","year"],["type","text","id","year","name","year","required","",1,"form-control",3,"ngModel"],["for","photo"],["type","file","id","photo","name","photo","accept","image/*",1,"form-control",3,"change"],["class","text-success",4,"ngIf"],["type","submit",1,"btn","btn-primary","my-2",3,"disabled"],[1,"text-success"]],template:function(t,i){if(1&t){const r=yd();Ft(0,kte,2,0,"h2",0),Ft(1,Ote,2,0,"h2",0),F(2,"div",1)(3,"div",2)(4,"form",3,4),Ye("ngSubmit",function(){Vu(r);const s=Vg(5);return Bu(i.onSubmit(s))}),F(6,"div",5)(7,"label",6),ee(8,"Titre"),P(),Gt(9,"input",7),P(),F(10,"div",5)(11,"label",8),ee(12,"Auteur"),P(),Gt(13,"input",9),P(),F(14,"div",5)(15,"label",10),ee(16,"Ann\xe9e"),P(),Gt(17,"input",11),P(),F(18,"div",5)(19,"label",12),ee(20,"Photo"),P(),F(21,"input",13),Ye("change",function(s){return i.detectFiles(s)}),P(),Ft(22,Pte,2,0,"p",14),P(),F(23,"button",15),ee(24,"Enregistrer"),P()()()()}if(2&t){const r=Vg(5);Fe("ngIf",-1===i.book.id),be(1),Fe("ngIf",-1!==i.book.id),be(8),Fe("ngModel",i.book.title),be(4),Fe("ngModel",i.book.author),be(4),Fe("ngModel",i.book.year),be(5),Fe("ngIf",i.fileUploaded),be(1),Fe("disabled",r.invalid||i.fileIsUploading)}},dependencies:[bo,gh,Ws,rh,oh,yh,hy,mh]})}function wF(n,e=0){return function Nte(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function rp(n){return Array.isArray(n)?n:[n]}function lt(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Aa(n){return n instanceof rt?n.nativeElement:n}const Fte=["addListener","removeListener"],Lte=["addEventListener","removeEventListener"],Vte=["on","off"];function Lw(n,e,t,i){if(he(t)&&(i=t,t=void 0),i)return Lw(n,e,t).pipe(J_(i));const[r,o]=function jte(n){return he(n.addEventListener)&&he(n.removeEventListener)}(n)?Lte.map(s=>a=>n[s](e,a,t)):function Bte(n){return he(n.addListener)&&he(n.removeListener)}(n)?Fte.map(EF(n,e)):function Ute(n){return he(n.on)&&he(n.off)}(n)?Vte.map(EF(n,e)):[];if(!r&&Qp(n))return _t(s=>Lw(s,e,t))(Jt(n));if(!r)throw new TypeError("Invalid event target");return new Oe(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function EF(n,e){return t=>i=>n[t](e,i)}class Hte extends gt{constructor(e,t){super()}schedule(e,t=0){return this}}const op={setInterval(n,e,...t){const{delegate:i}=op;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=op;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class Vw extends Hte{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return op.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&op.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ns(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const ru={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=ru;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(o=>{t=void 0,n(o)});return new gt(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=ru;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=ru;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},DF={now:()=>(DF.delegate||Date).now(),delegate:void 0};class ou{constructor(e,t=ou.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}ou.now=DF.now;class Bw extends ou{constructor(e,t=ou.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}new class zte extends Bw{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class $te extends Vw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ru.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(ru.cancelAnimationFrame(t),e._scheduled=void 0)}});let Uw,Wte=1;const sp={};function IF(n){return n in sp&&(delete sp[n],!0)}const qte={setImmediate(n){const e=Wte++;return sp[e]=!0,Uw||(Uw=Promise.resolve()),Uw.then(()=>IF(e)&&n()),e},clearImmediate(n){IF(n)}},{setImmediate:Kte,clearImmediate:Yte}=qte,ap={setImmediate(...n){const{delegate:e}=ap;return(e?.setImmediate||Kte)(...n)},clearImmediate(n){const{delegate:e}=ap;return(e?.clearImmediate||Yte)(n)},delegate:void 0},jw=(new class Xte extends Bw{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Qte extends Vw{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=ap.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:o}=e;null!=t&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==t&&(ap.clearImmediate(t),e._scheduled=void 0)}}),new Bw(Vw)),Jte=jw;function SF(n,e=jw){return function ene(n){return qe((e,t)=>{let i=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;const c=r;r=null,t.next(c)}s&&t.complete()},l=()=>{o=null,s&&t.complete()};e.subscribe(Ve(t,c=>{i=!0,r=c,o||Jt(n(c)).subscribe(o=Ve(t,a,l))},()=>{s=!0,(!i||!o||o.closed)&&t.complete()}))})}(()=>function nne(n=0,e,t=Jte){let i=-1;return null!=e&&(W0(e)?t=e:i=e),new Oe(r=>{let o=function tne(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}(n,e))}let Hw;try{Hw=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Hw=!1}let su,Wo,$w,Oi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function I3(n){return n===eM}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Hw)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(C(Od))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lp(n){return function ine(){if(null==su&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>su=!0}))}finally{su=su||!1}return su}()?n:!!n.capture}function rne(){if(null==Wo){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Wo=!1,Wo;if("scrollBehavior"in document.documentElement.style)Wo=!0;else{const n=Element.prototype.scrollTo;Wo=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Wo}function zw(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Qr(n){return n.composedPath?n.composedPath()[0]:n.target}function Gw(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const ane=new T("cdk-dir-doc",{providedIn:"root",factory:function lne(){return X(ce)}}),cne=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ww=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new Le,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function une(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?cne.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(C(ane,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),au=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({}),n})(),hne=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Ee,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Oe(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(SF(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):N()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Yt(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,t)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Aa(i),o=t.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Lw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(C(ue),C(Oi),C(ce,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AF=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Ee,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,o=r.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(SF(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(C(Oi),C(ue),C(ce,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({}),n})(),MF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[au,xF,au,xF]}),n})();class qw{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Kw extends qw{constructor(e,t,i,r,o){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}}class RF extends qw{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class pne extends qw{constructor(e){super(),this.element=e instanceof rt?e.nativeElement:e}}class Yw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Kw?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof RF?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof pne?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class mne extends Yw{constructor(e,t,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||yt.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Qw=(()=>{class n extends Yw{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new Le,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),s=i.createComponent(o,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=t,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(b(uo),b(Rn),b(ce))},n.\u0275dir=V({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[fe]}),n})(),up=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({}),n})();function Xw(n){return qe((e,t)=>{Jt(n).subscribe(Ve(t,()=>t.complete(),$p)),!t.closed&&e.subscribe(t)})}const kF=rne();class gne{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=lt(-this._previousScrollPosition.left),e.style.top=lt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),kF&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),kF&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class _ne{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class OF{enable(){}disable(){}attach(){}}function Zw(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function PF(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class yne{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Zw(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let vne=(()=>{class n{constructor(t,i,r,o){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new OF,this.close=s=>new _ne(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new gne(this._viewportRuler,this._document),this.reposition=s=>new yne(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(C(hne),C(AF),C(ue),C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class NF{constructor(e){if(this.scrollStrategy=new OF,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class bne{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let FF=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cne=(()=>{class n extends FF{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(ue,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wne=(()=>{class n extends FF{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Qr(o)},this._clickListener=o=>{const s=Qr(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(s)||u.overlayElement.contains(a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(o)):d.next(o)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(Oi),C(ue,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dp=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||Gw()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(t),Gw()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(Oi))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lu{constructor(e,t,i,r,o,s,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Ee,this._attachments=new Ee,this._detachments=new Ee,this._locationChanges=gt.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Ee,this._outsidePointerEvents=new Ee,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ei(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=lt(this._config.width),e.height=lt(this._config.height),e.minWidth=lt(this._config.minWidth),e.minHeight=lt(this._config.minHeight),e.maxWidth=lt(this._config.maxWidth),e.maxHeight=lt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=rp(t||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(Xw(Zp(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const LF="cdk-overlay-connected-position-bounding-box",Ene=/([A-Za-z%]+)$/;class Dne{constructor(e,t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ee,this._resizeSubscription=gt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(LF),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?o.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(o.length){let a=null,l=-1;for(const c of o){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&qo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(LF),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,o;if("center"==i.originX)r=e.left+e.width/2;else{const s=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?s:a}return t.left<0&&(r-=t.left),o="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:r,y:o}}_getOverlayPoint(e,t,i){let r,o;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,t,i,r){const o=BF(t);let{x:s,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let h=0-a,f=a+o.height-i.height,p=this._subtractOverflows(o.width,0-s,s+o.width-i.width),m=this._subtractOverflows(o.height,h,f),g=p*m;return{visibleArea:g,isCompletelyWithinViewport:o.width*o.height===g,fitsInViewportVertically:m===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,o=i.right-t.x,s=VF(this._overlayRef.getConfig().minHeight),a=VF(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=o;return(e.fitsInViewportVertically||null!=s&&s<=r)&&c}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=BF(t),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),a=Math.max(e.y+r.height-o.height,0),l=Math.max(o.top-i.top-e.y,0),c=Math.max(o.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=o.width?c||-s:e.x<this._viewportMargin?o.left-i.left-e.x:0,d=r.height<=o.height?l||-a:e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new bne(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let o,s,a,u,d,h;if("top"===t.overlayY)s=e.y,o=i.height-s+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,o=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;o=2*f,s=e.y-f,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:s,left:d,bottom:a,right:h,width:u,height:o}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=lt(i.height),r.top=lt(i.top),r.bottom=lt(i.bottom),r.width=lt(i.width),r.left=lt(i.left),r.right=lt(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=lt(o)),s&&(r.maxWidth=lt(s))}this._lastBoundingBoxSize=i,qo(this._boundingBox.style,r)}_resetBoundingBoxStyles(){qo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){qo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();qo(i,this._getExactOverlayY(t,e,u)),qo(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=lt(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=lt(s.maxWidth):o&&(i.maxWidth="")),qo(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=lt(o.y),r}_getExactOverlayX(e,t,i){let s,r={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=lt(o.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:PF(e,i),isOriginOutsideView:Zw(e,i),isOverlayClipped:PF(t,i),isOverlayOutsideView:Zw(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&rp(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof rt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function qo(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function VF(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Ene);return t&&"px"!==t?null:parseFloat(e)}return n||null}function BF(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const UF="cdk-global-overlay-wrapper";class Ine{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(UF),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),c=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",m="";l?m="flex-start":"center"===u?(m="center",h?p=d:f=d):h?"left"===u||"end"===u?(m="flex-end",f=d):("right"===u||"start"===u)&&(m="flex-start",p=d):"left"===u||"start"===u?(m="flex-start",f=d):("right"===u||"end"===u)&&(m="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=l?"0":f,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":p,t.justifyContent=m,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(UF),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Sne=(()=>{class n{constructor(t,i,r,o){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new Ine}flexibleConnectedTo(t){return new Dne(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(C(AF),C(ce),C(Oi),C(dp))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Tne=0,Ma=(()=>{class n{constructor(t,i,r,o,s,a,l,c,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new NF(t);return s.direction=s.direction||this._directionality.value,new lu(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Tne++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(zs)),new mne(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(C(vne),C(dp),C(uo),C(Sne),C(Cne),C(yt),C(ue),C(ce),C(Ww),C(Ml),C(wne),C(Al,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mne={provide:new T("cdk-connected-overlay-scroll-strategy"),deps:[Ma],useFactory:function xne(n){return()=>n.scrollStrategies.reposition()}};let jF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({providers:[Ma,Mne],imports:[au,up,MF,MF]}),n})();function $F(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function zF(n){return Yt((e,t)=>n<=t)}function Lne(n,e){return n===e}let Vne=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Bne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({providers:[Vne]}),n})();const GF=new Set;let Ra,jne=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):$ne}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Hne(n){if(!GF.has(n))try{Ra||(Ra=document.createElement("style"),Ra.setAttribute("type","text/css"),document.head.appendChild(Ra)),Ra.sheet&&(Ra.sheet.insertRule(`@media ${n} {body{ }}`,0),GF.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(C(Oi))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $ne(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let zne=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Ee}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return WF(rp(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let o=Ey(WF(rp(t)).map(s=>this._registerQuery(s).observable));return o=Eh(o.pipe(ei(1)),o.pipe(zF(1),function Une(n,e=jw){return qe((t,i)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=o;o=null,i.next(c)}};function l(){const c=s+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(Ve(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(Q(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),o={observable:new Oe(s=>{const a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Ih(i),Q(({matches:s})=>({query:t,matches:s})),Xw(this._destroySubject)),mql:i};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(C(jne),C(ue))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WF(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let hp=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Kne(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function qne(n){try{return n.frameElement}catch{return null}}(function nie(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===QF(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),o=QF(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function eie(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function tie(n){return!function Qne(n){return function Zne(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Yne(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function Xne(n){return function Jne(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||YF(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(C(Oi))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YF(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function QF(n){if(!YF(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class iie{constructor(e,t,i,r,o=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(ei(1)).subscribe(e)}}let Jw=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new iie(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(C(hp),C(ue),C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XF(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function ZF(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const rie=new T("cdk-input-modality-detector-options"),oie={ignoreKeys:[18,17,224,91,16]},ka=lp({passive:!0,capture:!0});let sie=(()=>{class n{constructor(t,i,r,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Pn(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Qr(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(XF(s)?"keyboard":"mouse"),this._mostRecentTarget=Qr(s))},this._onTouchstart=s=>{ZF(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Qr(s))},this._options={...oie,...o},this.modalityDetected=this._modality.pipe(zF(1)),this.modalityChanged=this.modalityDetected.pipe(function Fne(n,e=_r){return n=n??Lne,qe((t,i)=>{let r,o=!0;t.subscribe(Ve(i,s=>{const a=e(s);(o||!n(r,a))&&(o=!1,r=a,i.next(s))}))})}()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,ka),r.addEventListener("mousedown",this._onMousedown,ka),r.addEventListener("touchstart",this._onTouchstart,ka)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ka),document.removeEventListener("mousedown",this._onMousedown,ka),document.removeEventListener("touchstart",this._onTouchstart,ka))}}return n.\u0275fac=function(t){return new(t||n)(C(Oi),C(ue),C(ce),C(rie,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lie=new T("cdk-focus-monitor-default-options"),fp=lp({passive:!0,capture:!0});let eE=(()=>{class n{constructor(t,i,r,o,s){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ee,this._rootNodeFocusAndBlurListener=a=>{for(let c=Qr(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(t,i=!1){const r=Aa(t);if(!this._platform.isBrowser||1!==r.nodeType)return N(null);const o=function sne(n){if(function one(){if(null==$w){const n=typeof document<"u"?document.head:null;$w=!(!n||!n.createShadowRoot&&!n.attachShadow)}return $w}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;const a={checkChildren:i,subject:new Ee,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Aa(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const o=Aa(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),o=Qr(t);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,fp),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,fp)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Xw(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fp),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fp),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,o)=>{(o===t||r.checkChildren&&o.contains(t))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(C(ue),C(Oi),C(sie),C(ce,8),C(lie,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eL="cdk-high-contrast-black-on-white",tL="cdk-high-contrast-white-on-black",tE="cdk-high-contrast-active";let nL=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=X(zne).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(tE,eL,tL),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(tE,eL):2===i&&t.add(tE,tL)}}}return n.\u0275fac=function(t){return new(t||n)(C(Oi),C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cie=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(C(nL))},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[Bne]}),n})();var Ko_OPEN="mdc-dialog--open",iL_DIALOG_ANIMATION_CLOSE_TIME_MS=(["textarea",".mdc-menu .mdc-list-item",".mdc-menu .mdc-deprecated-list-item"].join(", "),75);function uie(n,e){}class pp{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let rL=(()=>{class n extends Yw{constructor(t,i,r,o,s,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=zw(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=zw();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=zw())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(b(rt),b(Jw),b(ce,8),b(pp),b(hp),b(ue),b(lu),b(eE))},n.\u0275cmp=en({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&function NA(n,e,t){const i=de();i.firstCreatePass&&(VA(i,new OA(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),LA(i,D(),e)}(Qw,7),2&t){let r;u_(r=d_())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&Mn("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[fe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&Ft(0,uie,0,0,"ng-template",0)},dependencies:[Qw],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class nE{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Ee,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!$F(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const oL=new T("DialogScrollStrategy"),die=new T("DialogData"),hie=new T("DefaultDialogConfig"),pie={provide:oL,deps:[Ma],useFactory:function fie(n){return()=>n.scrollStrategies.block()}};let mie=0,sL=(()=>{class n{constructor(t,i,r,o,s,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ee,this._afterOpenedAtThisLevel=new Ee,this._ariaHiddenElements=new Map,this.afterAllClosed=Dh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ih(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,i){(i={...this._defaultOptions||new pp,...i}).id=i.id||"cdk-dialog-"+mie++,i.id&&this.getDialogById(i.id);const o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new nE(s,i),l=this._attachContainer(s,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){iE(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){iE(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),iE(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new NF({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:pp,useValue:r},{provide:nE,useValue:i},{provide:lu,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=rL;const l=new Kw(a,r.viewContainerRef,yt.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,o){if(t instanceof yi){const s=this._createInjector(o,i,r,void 0);let a={$implicit:o.data,dialogRef:i};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new RF(t,null,a,s))}else{const s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new Kw(t,o.viewContainerRef,s,o.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,o){const s=t.injector||t.viewContainerRef?.injector,a=[{provide:die,useValue:t.data},{provide:nE,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!s||!s.get(Ww,null,{optional:!0}))&&a.push({provide:Ww,useValue:{value:t.direction,change:N()}}),yt.create({parent:s||o,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const o=i[r];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(C(Ma),C(yt),C(hie,8),C(n,12),C(dp),C(oL))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();function iE(n,e){let t=n.length;for(;t--;)e(n[t])}let gie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({providers:[sL,pie],imports:[jF,up,cie,up]}),n})();const yie=new T("mat-sanity-checks",{providedIn:"root",factory:function _ie(){return!0}});let Oa=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!Gw()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(C(nL),C(yie,8),C(ce))},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[au,au]}),n})();class bie{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const cL=lp({passive:!0,capture:!0});class Cie{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Qr(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,i,r){const o=this._events.get(t);if(o){const s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,cL)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const o=r.get(t);!o||(o.delete(i),0===o.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,cL)))}}const uL={enterDuration:225,exitDuration:150},dL=lp({passive:!0,capture:!0}),hL=["mousedown","touchstart"],fL=["mouseup","mouseleave","touchend","touchcancel"];class mp{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Aa(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...uL,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const s=i.radius||function Eie(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-s+"px",u.style.top=l-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===r.width&&0===r.height,m=new bie(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",m.state=0,i.persistent||(this._mostRecentTransientRipple=m);let g=null;return!p&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(m),E=()=>this._destroyRipple(m);u.addEventListener("transitionend",_),u.addEventListener("transitioncancel",E),g={onTransitionEnd:_,onTransitionCancel:E}}),this._activeRipples.set(m,g),(p||!c)&&this._finishRippleTransition(m),m}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...uL,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Aa(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,hL.forEach(i=>{mp._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{fL.forEach(t=>{this._triggerElement.addEventListener(t,this,dL)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=XF(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!ZF(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(hL.forEach(t=>mp._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&fL.forEach(t=>e.removeEventListener(t,this,dL)))}}mp._eventManager=new Cie;let Die=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[Oa,Oa]}),n})();class pL{}class Iie{}const dr="*";function _L(n,e=null){return{type:2,steps:n,options:e}}function Pa(n){return{type:6,styles:n,offset:null}}function wL(n){Promise.resolve().then(n)}class uu{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){wL(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class EL{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const o=this.players.length;0==o?wL(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function Tie(n,e){}class gp{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}let Aie=(()=>{class n extends rL{constructor(t,i,r,o,s,a,l,c){super(t,i,r,o,s,a,l,c),this._animationStateChanged=new Le}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(b(rt),b(Jw),b(ce,8),b(gp),b(hp),b(ue),b(lu),b(eE))},n.\u0275cmp=en({type:n,selectors:[["ng-component"]],features:[fe],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const DL="--mat-dialog-transition-duration";function IL(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?wF(n.substring(0,n.length-2)):n.endsWith("s")?1e3*wF(n.substring(0,n.length-1)):"0"===n?0:null}let xie=(()=>{class n extends Aie{constructor(t,i,r,o,s,a,l,c,u){super(t,i,r,o,s,a,l,u),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?IL(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?IL(this._config.exitAnimationDuration)??iL_DIALOG_ANIMATION_CLOSE_TIME_MS:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(DL,`${this._openAnimationDuration}ms`),this._hostElement.classList.add("mdc-dialog--opening"),this._hostElement.classList.add(Ko_OPEN),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(Ko_OPEN),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(Ko_OPEN),this._animationsEnabled?(this._hostElement.style.setProperty(DL,`${this._openAnimationDuration}ms`),this._hostElement.classList.add("mdc-dialog--closing"),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove("mdc-dialog--opening"),this._hostElement.classList.remove("mdc-dialog--closing")}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}}return n.\u0275fac=function(t){return new(t||n)(b(rt),b(Jw),b(ce,8),b(gp),b(hp),b(ue),b(lu),b(Al,8),b(eE))},n.\u0275cmp=en({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(t,i){2&t&&(wd("id",i._config.id),Mn("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Vs("_mat-animation-noopable",!i._animationsEnabled))},features:[fe],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(F(0,"div",0)(1,"div",1),Ft(2,Tie,0,0,"ng-template",2),P()())},dependencies:[Qw],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),n})();class oE{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ee,this._beforeClosed=new Ee,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Yt(r=>"opened"===r.state),ei(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Yt(r=>"closed"===r.state),ei(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Zp(this.backdropClick(),this.keydownEvents().pipe(Yt(r=>27===r.keyCode&&!this.disableClose&&!$F(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function Mie(n,e,t){n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Yt(t=>"closing"===t.state),ei(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const SL=new T("MatMdcDialogData"),Rie=new T("mat-mdc-dialog-default-options"),TL=new T("mat-mdc-dialog-scroll-strategy"),Oie={provide:TL,deps:[Ma],useFactory:function kie(n){return()=>n.scrollStrategies.block()}};let Pie=0,Nie=(()=>{class n{constructor(t,i,r,o,s,a,l,c,u,d){this._overlay=t,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ee,this._afterOpenedAtThisLevel=new Ee,this._idPrefix="mat-dialog-",this.dialogConfigClass=gp,this.afterAllClosed=Dh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ih(void 0))),this._scrollStrategy=a,this._dialog=i.get(sL)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,i){let r;(i={...this._defaultOptions||new gp,...i}).id=i.id||`${this._idPrefix}${Pie++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:pp,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){cd()},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})(),sE=(()=>{class n extends Nie{constructor(t,i,r,o,s,a,l,c){super(t,i,o,a,l,s,oE,xie,SL,c),this._idPrefix="mat-mdc-dialog-"}}return n.\u0275fac=function(t){return new(t||n)(C(Ma),C(yt),C(Ml,8),C(Rie,8),C(TL),C(n,12),C(dp),C(Al,8))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})(),Fie=0,Lie=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+Fie++}ngOnInit(){this._dialogRef||(this._dialogRef=function Uie(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(b(oE,8),b(rt),b(sE))},n.\u0275dir=V({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,i){2&t&&wd("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),Vie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=V({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),n})(),Bie=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=V({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(t,i){2&t&&Vs("mat-mdc-dialog-actions-align-center","center"===i.align)("mat-mdc-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})(),jie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({providers:[sE,Oie],imports:[gie,jF,up,Oa,Oa]}),n})();function Hie(n,e){if(1&n&&(F(0,"div",8),Gt(1,"img",9),P()),2&n){const t=mo();be(1),Fe("src",t.book.photo,lg)}}function $ie(n,e){if(1&n){const t=yd();F(0,"button",6),Ye("click",function(){return Vu(t),Bu(mo().onViewBook())}),ee(1,"Voir"),P()}}class du{constructor(e,t,i,r){this.booksService=e,this.router=t,this.route=i,this.dialog=r,this.booksSubscription=new gt,this.showViewButton=!0}ngOnInit(){if(!this.book){let e=Number(this.route.snapshot.params.id);isFinite(e)?(this.booksSubscription=this.booksService.booksSubject.subscribe(t=>{let i=t.findIndex(r=>r.id===e);i>=0?(this.book=t[i],this.showViewButton=!1):this.router.navigate(["/books"])}),this.booksService.emitBooks()):this.router.navigate(["/books"])}}openDialog(e,t){this.dialog.open(_p,{width:"350px",enterAnimationDuration:e,exitAnimationDuration:t,data:this.book}).afterClosed().subscribe(r=>{r&&this.onDeleteBook()})}onDeleteBook(){this.booksService.removeBook(this.book),this.router.navigate(["/books"])}onViewBook(){this.router.navigate(["/books","view",this.book.id])}onEditBook(){this.router.navigate(["/books","edit",this.book.id])}ngOnDestroy(){this.booksSubscription.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||du)(b(Yr),b(tt),b(Or),b(sE))};static#t=this.\u0275cmp=en({type:du,selectors:[["app-single-book"]],inputs:{book:"book"},decls:26,vars:5,consts:[[1,"d-flex","p-2","justify-content-between",2,"place-items","center"],[1,"d-flex","p-2"],["class","d-flex flex-column me-3","style","place-items: center; width: 200px; overflow: hidden;",4,"ngIf"],[1,"d-flex","flex-column",2,"font-size","large"],[1,"d-flex","flex-column","p-2"],["class","btn btn-primary","style","width: 95px;",3,"click",4,"ngIf"],[1,"btn","btn-primary",2,"width","95px",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","flex-column","me-3",2,"place-items","center","width","200px","overflow","hidden"],["alt","Couverture du livre",2,"height","250px",3,"src"]],template:function(t,i){1&t&&(F(0,"div",0)(1,"div",1),Ft(2,Hie,2,1,"div",2),F(3,"div",3)(4,"p")(5,"i"),ee(6,"Titre: "),P(),F(7,"b"),ee(8),P()(),F(9,"p")(10,"i"),ee(11,"Auteur: "),P(),ee(12),P(),F(13,"p")(14,"i"),ee(15,"Ann\xe9e: "),P(),ee(16),P()()(),F(17,"div",4)(18,"p"),Ft(19,$ie,2,0,"button",5),P(),F(20,"p")(21,"button",6),Ye("click",function(){return i.onEditBook()}),ee(22,"Modifier"),P()(),F(23,"p")(24,"button",7),Ye("click",function(){return i.openDialog("0ms","0ms")}),ee(25,"Supprimer"),P()()()()),2&t&&(be(2),Fe("ngIf",i.book.photo),be(6),Cd(i.book.title),be(4),wr(" ",i.book.author,""),be(4),wr(" ",i.book.year,""),be(3),Fe("ngIf",i.showViewButton))},dependencies:[bo]})}class _p{constructor(e,t){this.dialogRef=e,this.book=t}onDelete(){this.dialogRef.close("SUPPRIMER")}onCancel(){this.dialogRef.close()}static#e=this.\u0275fac=function(t){return new(t||_p)(b(oE),b(SL))};static#t=this.\u0275cmp=en({type:_p,selectors:[["dialog-example"]],decls:12,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],[1,"btn","btn-secondary","m-3",3,"click"],[1,"btn","btn-danger","m-3",3,"click"]],template:function(t,i){1&t&&(F(0,"h1",0),ee(1,"Attention"),P(),F(2,"div",1),ee(3," Voulez-vous vraiment supprimer ce livre? "),Gt(4,"br"),F(5,"b"),ee(6),P()(),F(7,"div",2)(8,"button",3),Ye("click",function(){return i.onCancel()}),ee(9,"Annuler"),P(),F(10,"button",4),Ye("click",function(){return i.onDelete()}),ee(11,"Oui, supprimer"),P()()),2&t&&(be(6),Cd(i.book.title))},dependencies:[Lie,Vie,Bie],encapsulation:2})}function zie(n,e){if(1&n&&(F(0,"span"),ee(1),P()),2&n){const t=mo();be(1),wr("(",t.books.length,")")}}function Gie(n,e){1&n&&(F(0,"p"),ee(1,"Il n'y aucun livre pour le moment"),P())}function Wie(n,e){if(1&n&&(F(0,"div",4),Gt(1,"app-single-book",5),P()),2&n){const t=e.$implicit;be(1),Fe("book",t)}}class yp{constructor(e,t){this.booksService=e,this.router=t,this.books=[]}ngOnInit(){this.booksSubscription=this.booksService.booksSubject.subscribe(e=>{this.books=e}),this.booksService.getBooks(),this.booksService.emitBooks()}onNewBook(){this.router.navigate(["/books","new"])}ngOnDestroy(){this.booksSubscription.unsubscribe()}static#e=this.\u0275fac=function(t){return new(t||yp)(b(Yr),b(tt))};static#t=this.\u0275cmp=en({type:yp,selectors:[["app-book-list"]],decls:9,vars:3,consts:[[4,"ngIf"],["routerLink","/books/new"],[1,"books","d-flex","flex-column","p-2",2,"gap","5px"],["class","border-top border-primary",4,"ngFor","ngForOf"],[1,"border-top","border-primary"],[3,"book"]],template:function(t,i){1&t&&(F(0,"h2"),ee(1,"Liste des livres "),Ft(2,zie,2,1,"span",0),P(),F(3,"p")(4,"a",1),ee(5,"Ajouter un livre"),P()(),Ft(6,Gie,2,0,"p",0),F(7,"div",2),Ft(8,Wie,2,1,"div",3),P()),2&t&&(be(2),Fe("ngIf",i.books.length>0),be(4),Fe("ngIf",0===i.books.length),be(2),Fe("ngForOf",i.books))},dependencies:[Yx,bo,oc,du]})}class hr{constructor(e){this.router=e}canActivate(e,t){return new Promise((i,r)=>{Ab(mf(),o=>{o?i(!0):(this.router.navigate(["/auth","signin"]),i(!1))})})}static#e=this.\u0275fac=function(t){return new(t||hr)(C(tt))};static#t=this.\u0275prov=x({token:hr,factory:hr.\u0275fac,providedIn:"root"})}class Na{constructor(e){this.router=e}canActivate(e,t){return new Promise((i,r)=>{Ab(mf(),o=>{o?(this.router.navigate(["/books"]),i(!1)):i(!0)})})}static#e=this.\u0275fac=function(t){return new(t||Na)(C(tt))};static#t=this.\u0275prov=x({token:Na,factory:Na.\u0275fac,providedIn:"root"})}const qie=[{path:"auth/signup",canActivate:[Na],component:_f},{path:"auth/signin",canActivate:[Na],component:gf},{path:"books",canActivate:[hr],component:yp},{path:"books/view/:id",canActivate:[hr],component:du},{path:"books/new",canActivate:[hr],component:iu},{path:"books/edit/:id",canActivate:[hr],component:iu},{path:"**",redirectTo:"auth/signin"}];class vp{static#e=this.\u0275fac=function(t){return new(t||vp)};static#t=this.\u0275mod=Pe({type:vp});static#n=this.\u0275inj=Ae({imports:[sO.forRoot(qie),sO]})}sn("firebase","9.14.0","app");const xL="@firebase/installations",aE="0.5.16",RL=`w:${aE}`,kL="FIS_v2",fr=new Ao("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function OL(n){return n instanceof ti&&n.code.includes("request-failed")}function lE({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function PL(n){return{token:n.token,requestStatus:2,expiresIn:tre(n.expiresIn),creationTime:Date.now()}}function cE(n,e){return uE.apply(this,arguments)}function uE(){return(uE=v(function*(n,e){const i=(yield e.json()).error;return fr.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})).apply(this,arguments)}function NL({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function FL(n,{refreshToken:e}){const t=NL(n);return t.append("Authorization",function nre(n){return`${kL} ${n}`}(e)),t}function dE(n){return hE.apply(this,arguments)}function hE(){return(hE=v(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function tre(n){return Number(n.replace("s","000"))}function ire(n,e){return fE.apply(this,arguments)}function fE(){return(fE=v(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=lE(n),r=NL(n),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({fid:t,authVersion:kL,appId:n.appId,sdkVersion:RL})},l=yield dE(()=>fetch(i,a));if(l.ok){const c=yield l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:PL(c.authToken)}}throw yield cE("Create Installation",l)})).apply(this,arguments)}function LL(n){return new Promise(e=>{setTimeout(e,n)})}const ore=/^[cdef][\w-]{21}$/;function sre(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function are(n){return function rre(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return ore.test(t)?t:""}catch{return""}}function Fa(n){return`${n.appName}!${n.appId}`}const La=new Map;function VL(n,e){const t=Fa(n);BL(t,e),function ure(n,e){const t=function UL(){return!Yo&&"BroadcastChannel"in self&&(Yo=new BroadcastChannel("[Firebase] FID Change"),Yo.onmessage=n=>{BL(n.data.key,n.data.fid)}),Yo}();t&&t.postMessage({key:n,fid:e}),function jL(){0===La.size&&Yo&&(Yo.close(),Yo=null)}()}(t,e)}function BL(n,e){const t=La.get(n);if(t)for(const i of t)i(e)}let Yo=null;const Qo="firebase-installations-store";let mE=null;function gE(){return mE||(mE=AO("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Qo)}})),mE}function bp(n,e){return _E.apply(this,arguments)}function _E(){return(_E=v(function*(n,e){const t=Fa(n),r=(yield gE()).transaction(Qo,"readwrite"),o=r.objectStore(Qo),s=yield o.get(t);return yield o.put(e,t),yield r.done,(!s||s.fid!==e.fid)&&VL(n,e.fid),e})).apply(this,arguments)}function yE(n){return vE.apply(this,arguments)}function vE(){return(vE=v(function*(n){const e=Fa(n),i=(yield gE()).transaction(Qo,"readwrite");yield i.objectStore(Qo).delete(e),yield i.done})).apply(this,arguments)}function hu(n,e){return bE.apply(this,arguments)}function bE(){return(bE=v(function*(n,e){const t=Fa(n),r=(yield gE()).transaction(Qo,"readwrite"),o=r.objectStore(Qo),s=yield o.get(t),a=e(s);return void 0===a?yield o.delete(t):yield o.put(a,t),yield r.done,a&&(!s||s.fid!==a.fid)&&VL(n,a.fid),a})).apply(this,arguments)}function CE(n){return wE.apply(this,arguments)}function wE(){return(wE=v(function*(n){let e;const t=yield hu(n.appConfig,i=>{const r=fre(i),o=pre(n,r);return e=o.registrationPromise,o.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function fre(n){return $L(n||{fid:sre(),registrationStatus:0})}function pre(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(fr.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function mre(n,e){return EE.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:gre(n)}:{installationEntry:e}}function EE(){return(EE=v(function*(n,e){try{const t=yield ire(n,e);return bp(n.appConfig,t)}catch(t){throw OL(t)&&409===t.customData.serverCode?yield yE(n.appConfig):yield bp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function gre(n){return DE.apply(this,arguments)}function DE(){return(DE=v(function*(n){let e=yield HL(n.appConfig);for(;1===e.registrationStatus;)yield LL(100),e=yield HL(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:i}=yield CE(n);return i||t}return e})).apply(this,arguments)}function HL(n){return hu(n,e=>{if(!e)throw fr.create("installation-not-found");return $L(e)})}function $L(n){return function _re(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function yre(n,e){return IE.apply(this,arguments)}function IE(){return(IE=v(function*({appConfig:n,heartbeatServiceProvider:e},t){const i=vre(n,t),r=FL(n,t),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const a={method:"POST",headers:r,body:JSON.stringify({installation:{sdkVersion:RL,appId:n.appId}})},l=yield dE(()=>fetch(i,a));if(l.ok)return PL(yield l.json());throw yield cE("Generate Auth Token",l)})).apply(this,arguments)}function vre(n,{fid:e}){return`${lE(n)}/${e}/authTokens:generate`}function SE(n){return TE.apply(this,arguments)}function TE(){return(TE=v(function*(n,e=!1){let t;const i=yield hu(n.appConfig,o=>{if(!GL(o))throw fr.create("not-registered");const s=o.authToken;if(!e&&wre(s))return o;if(1===s.requestStatus)return t=bre(n,e),o;{if(!navigator.onLine)throw fr.create("app-offline");const a=Dre(o);return t=Cre(n,a),a}});return t?yield t:i.authToken})).apply(this,arguments)}function bre(n,e){return AE.apply(this,arguments)}function AE(){return(AE=v(function*(n,e){let t=yield zL(n.appConfig);for(;1===t.authToken.requestStatus;)yield LL(100),t=yield zL(n.appConfig);const i=t.authToken;return 0===i.requestStatus?SE(n,e):i})).apply(this,arguments)}function zL(n){return hu(n,e=>{if(!GL(e))throw fr.create("not-registered");return function Ire(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Cre(n,e){return xE.apply(this,arguments)}function xE(){return(xE=v(function*(n,e){try{const t=yield yre(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield bp(n.appConfig,i),t}catch(t){if(!OL(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield bp(n.appConfig,i)}else yield yE(n.appConfig);throw t}})).apply(this,arguments)}function GL(n){return void 0!==n&&2===n.registrationStatus}function wre(n){return 2===n.requestStatus&&!function Ere(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function Dre(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function ME(){return(ME=v(function*(n){const e=n,{installationEntry:t,registrationPromise:i}=yield CE(e);return i?i.catch(console.error):SE(e).catch(console.error),t.fid})).apply(this,arguments)}function RE(){return(RE=v(function*(n,e=!1){const t=n;return yield Are(t),(yield SE(t,e)).token})).apply(this,arguments)}function Are(n){return kE.apply(this,arguments)}function kE(){return(kE=v(function*(n){const{registrationPromise:e}=yield CE(n);e&&(yield e)})).apply(this,arguments)}function NE(n){return fr.create("missing-app-config-values",{valueName:n})}const WL="installations",Ore=n=>{const e=n.getProvider("app").getImmediate(),t=function Rre(n){if(!n||!n.options)throw NE("App Configuration");if(!n.name)throw NE("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw NE(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:tr(e,"heartbeat"),_delete:()=>Promise.resolve()}},Pre=n=>{const t=tr(n.getProvider("app").getImmediate(),WL).getImmediate();return{getId:()=>function Sre(n){return ME.apply(this,arguments)}(t),getToken:r=>function Tre(n){return RE.apply(this,arguments)}(t,r)}};(function Nre(){ni(new Fn(WL,Ore,"PUBLIC")),ni(new Fn("installations-internal",Pre,"PRIVATE"))})(),sn(xL,aE),sn(xL,aE,"esm2017");const Cp="analytics",Fre="firebase_id",Bre="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qL="https://www.googletagmanager.com/gtag/js",At=new Yh("@firebase/analytics");function KL(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function Ure(n,e){const t=document.createElement("script");t.src=`${qL}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function Hre(n,e,t,i,r,o){return FE.apply(this,arguments)}function FE(){return(FE=v(function*(n,e,t,i,r,o){const s=i[r];try{if(s)yield e[s];else{const l=(yield KL(t)).find(c=>c.measurementId===r);l&&(yield e[l.appId])}}catch(a){At.error(a)}n("config",r,o)})).apply(this,arguments)}function $re(n,e,t,i,r){return LE.apply(this,arguments)}function LE(){return(LE=v(function*(n,e,t,i,r){try{let o=[];if(r&&r.send_to){let s=r.send_to;Array.isArray(s)||(s=[s]);const a=yield KL(t);for(const l of s){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(!u){o=[];break}o.push(u)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",i,r||{})}catch(o){At.error(o)}})).apply(this,arguments)}function Wre(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(qL)&&t.src.includes(n))return t;return null}const Cn=new Ao("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),YL=new class Qre{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Xre(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function Zre(n){return VE.apply(this,arguments)}function VE(){return(VE=v(function*(n){var e;const{appId:t,apiKey:i}=n,r={method:"GET",headers:Xre(i)},o=Bre.replace("{app-id}",t),s=yield fetch(o,r);if(200!==s.status&&304!==s.status){let a="";try{const l=yield s.json();null!==(e=l.error)&&void 0!==e&&e.message&&(a=l.error.message)}catch{}throw Cn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function Jre(n){return BE.apply(this,arguments)}function BE(){return(BE=v(function*(n,e=YL,t){const{appId:i,apiKey:r,measurementId:o}=n.options;if(!i)throw Cn.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw Cn.create("no-api-key")}const s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new noe;return setTimeout(v(function*(){a.abort()}),void 0!==t?t:6e4),QL({appId:i,apiKey:r,measurementId:o},s,a,e)})).apply(this,arguments)}function QL(n,e,t){return UE.apply(this,arguments)}function UE(){return(UE=v(function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=YL){var o,s;const{appId:a,measurementId:l}=n;try{yield eoe(i,e)}catch(c){if(l)return At.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===(o=c)||void 0===o?void 0:o.message}]`),{appId:a,measurementId:l};throw c}try{const c=yield Zre(n);return r.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!toe(u)){if(r.deleteThrottleMetadata(a),l)return At.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:a,measurementId:l};throw c}const d=503===Number(null===(s=u?.customData)||void 0===s?void 0:s.httpStatus)?wO(t,r.intervalMillis,30):wO(t,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+d,backoffCount:t+1};return r.setThrottleMetadata(a,h),At.debug(`Calling attemptFetch again in ${d} millis`),QL(n,h,i,r)}})).apply(this,arguments)}function eoe(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(o),i(Cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function toe(n){if(!(n instanceof ti&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class noe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let jE,qE;function HE(){return(HE=v(function*(n,e,t,i,r){if(r&&r.global)n("event",t,i);else{const o=yield e;n("event",t,Object.assign(Object.assign({},i),{send_to:o}))}})).apply(this,arguments)}function XL(n){qE=n}function ZL(n){jE=n}function loe(){return KE.apply(this,arguments)}function KE(){return(KE=v(function*(){var n;if(!mO())return At.warn(Cn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield gO()}catch(e){return At.warn(Cn.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function YE(){return(YE=v(function*(n,e,t,i,r,o,s){var a;const l=Jre(n);l.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&At.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>At.error(f)),e.push(l);const c=loe().then(f=>{if(f)return i.getId()}),[u,d]=yield Promise.all([l,c]);Wre(o)||Ure(o,u.measurementId),qE&&(r("consent","default",qE),XL(void 0)),r("js",new Date);const h=null!==(a=s?.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[Fre]=d),r("config",u.measurementId,h),jE&&(r("set",jE),ZL(void 0)),u.measurementId})).apply(this,arguments)}class uoe{constructor(e){this.app=e}_delete(){return delete pr[this.app.options.appId],Promise.resolve()}}let pr={},JL=[];const eV={};let nV,mr,wp="dataLayer",QE=!1;function hoe(n,e,t){!function doe(){const n=[];if(fO()&&n.push("This is a browser extension environment."),function NK(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=Cn.create("invalid-analytics-context",{errorInfo:e});At.warn(t.message)}}();const i=n.options.appId;if(!i)throw Cn.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Cn.create("no-api-key");At.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pr[i])throw Cn.create("already-exists",{id:i});if(!QE){!function jre(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(wp);const{wrappedGtag:o,gtagCore:s}=function Gre(n,e,t,i,r){let o=function(...s){window[i].push(arguments)};return window[r]&&"function"==typeof window[r]&&(o=window[r]),window[r]=function zre(n,e,t,i){function o(){return(o=v(function*(s,a,l){try{"event"===s?yield $re(n,e,t,a,l):"config"===s?yield Hre(n,e,t,i,a,l):"consent"===s?n("consent","update",l):n("set",a)}catch(c){At.error(c)}})).apply(this,arguments)}return function r(s,a,l){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[r]}}(pr,JL,eV,wp,"gtag");mr=o,nV=s,QE=!0}return pr[i]=function coe(n,e,t,i,r,o,s){return YE.apply(this,arguments)}(n,JL,eV,e,nV,wp,t),new uoe(n)}const iV="@firebase/analytics";function _oe(n,e){1&n&&(F(0,"li",3)(1,"a",7),ee(2,"Connexion"),P()())}function yoe(n,e){1&n&&(F(0,"li",3)(1,"a",8),ee(2,"Cr\xe9er un compte"),P()())}function voe(n,e){if(1&n){const t=yd();F(0,"li",3)(1,"a",9),Ye("click",function(){return Vu(t),Bu(mo().onSignOut())}),ee(2,"D\xe9connexion"),P()()}}!function goe(){ni(new Fn(Cp,(e,{options:t})=>hoe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),ni(new Fn("analytics-internal",function n(e){try{const t=e.getProvider(Cp).getImmediate();return{logEvent:(i,r,o)=>function moe(n,e,t,i){n=Xe(n),function ioe(n,e,t,i,r){return HE.apply(this,arguments)}(mr,pr[n.app.options.appId],e,t,i).catch(r=>At.error(r))}(t,i,r,o)}}catch(t){throw Cn.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),sn(iV,"0.8.4"),sn(iV,"0.8.4","esm2017")}();class Ep{constructor(e){this.authService=e,this.isAuth=!1}ngOnInit(){Ab(mf(),e=>{this.isAuth=!!e})}onSignOut(){this.authService.signOut()}static#e=this.\u0275fac=function(t){return new(t||Ep)(b(Vr))};static#t=this.\u0275cmp=en({type:Ep,selectors:[["app-header"]],decls:11,vars:3,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],[1,"nav","flex-row","justify-content-around","my-2","my-lg-0"],[1,"nav-item"],["routerLinkActive","activeLink","routerLink","books",1,"nav-link"],[1,"navbar-right"],["class","nav-item",4,"ngIf"],["routerLinkActive","activeLink","routerLink","auth/signin",1,"nav-link"],["routerLinkActive","activeLink","routerLink","auth/signup",1,"nav-link"],[1,"nav-link",2,"cursor","pointer",3,"click"]],template:function(t,i){1&t&&(F(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),ee(5,"Livres"),P()()(),F(6,"div",5)(7,"ul",2),Ft(8,_oe,3,0,"li",6),Ft(9,yoe,3,0,"li",6),Ft(10,voe,3,0,"li",6),P()()()()),2&t&&(be(8),Fe("ngIf",!i.isAuth),be(1),Fe("ngIf",!i.isAuth),be(1),Fe("ngIf",i.isAuth))},dependencies:[bo,oc,Zk]})}class Dp{constructor(){!function foe(n=Zh()){const e=tr(n=Xe(n),Cp);return e.isInitialized()?e.getImmediate():function poe(n,e={}){const t=tr(n,Cp);if(t.isInitialized()){const r=t.getImmediate();if(cc(e,t.getOptions()))return r;throw Cn.create("already-initialized")}return t.initialize({options:e})}(n)}(RO({apiKey:"AIzaSyBBV5GP11FXJh_7iLsm4GBUcY1XkdFHbrQ",authDomain:"biblio-angular-3ccc8.firebaseapp.com",projectId:"biblio-angular-3ccc8",storageBucket:"biblio-angular-3ccc8.appspot.com",messagingSenderId:"348771868880",appId:"1:348771868880:web:04d00f2bf41a1b07f93ed5",measurementId:"G-QWP4HZVTEP"}))}static#e=this.\u0275fac=function(t){return new(t||Dp)};static#t=this.\u0275cmp=en({type:Dp,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(t,i){1&t&&(Gt(0,"app-header"),F(1,"div",0),Gt(2,"router-outlet"),P())},dependencies:[Uy,Ep]})}function oV(n){return new w(3e3,!1)}function ese(){return typeof window<"u"&&typeof window.document<"u"}function ZE(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Xr(n){switch(n.length){case 0:return new uu;case 1:return n[0];default:return new EL(n)}}function sV(n,e,t,i,r=new Map,o=new Map){const s=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const d=u.get("offset"),h=d==l,f=h&&c||new Map;u.forEach((p,m)=>{let g=m,_=p;if("offset"!==m)switch(g=e.normalizePropertyName(g,s),_){case"!":_=r.get(m);break;case dr:_=o.get(m);break;default:_=e.normalizeStyleValue(m,g,_,s)}f.set(g,_)}),h||a.push(f),c=f,l=d}),s.length)throw function Hoe(n){return new w(3502,!1)}();return a}function JE(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&e0(t,"start",n)));break;case"done":n.onDone(()=>i(t&&e0(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&e0(t,"destroy",n)))}}function e0(n,e,t){const o=t0(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function t0(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function wn(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function aV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let n0=(n,e)=>!1,lV=(n,e,t)=>[],cV=null;function r0(n){const e=n.parentNode||n.host;return e===cV?null:e}(ZE()||typeof Element<"u")&&(ese()?(cV=(()=>document.documentElement)(),n0=(n,e)=>{for(;e;){if(e===n)return!0;e=r0(e)}return!1}):n0=(n,e)=>n.contains(e),lV=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Xo=null,uV=!1;const dV=n0,hV=lV;let fV=(()=>{class n{validateStyleProperty(t){return function nse(n){Xo||(Xo=function ise(){return typeof document<"u"?document.body:null}()||{},uV=!!Xo.style&&"WebkitAppearance"in Xo.style);let e=!0;return Xo.style&&!function tse(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Xo.style,!e&&uV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Xo.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return dV(t,i)}getParentElement(t){return r0(t)}query(t,i,r){return hV(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new uu(r,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})(),o0=(()=>{class n{}return n.NOOP=new fV,n})();const s0="ng-enter",Ip="ng-leave",Sp="ng-trigger",Tp=".ng-trigger",mV="ng-animating",a0=".ng-animating";function gr(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:l0(parseFloat(e[1]),e[2])}function l0(n,e){return"s"===e?1e3*n:n}function Ap(n,e,t){return n.hasOwnProperty("duration")?n:function sse(n,e,t){let r,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(oV()),{duration:0,delay:0,easing:""};r=l0(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=l0(parseFloat(l),a[4]));const c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function boe(){return new w(3100,!1)}()),a=!0),o<0&&(e.push(function Coe(){return new w(3101,!1)}()),a=!0),a&&e.splice(l,0,oV())}return{duration:r,delay:o,easing:s}}(n,e,t)}function fu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function gV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Zr(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function yV(n,e,t){return t?e+":"+t+";":""}function vV(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=yV(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=yV(0,use(t),n.style[t]));n.setAttribute("style",e)}function Pi(n,e,t){n.style&&(e.forEach((i,r)=>{const o=u0(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i}),ZE()&&vV(n))}function Zo(n,e){n.style&&(e.forEach((t,i)=>{const r=u0(i);n.style[r]=""}),ZE()&&vV(n))}function pu(n){return Array.isArray(n)?1==n.length?n[0]:_L(n):n}const c0=new RegExp("{{\\s*(.+?)\\s*}}","g");function bV(n){let e=[];if("string"==typeof n){let t;for(;t=c0.exec(n);)e.push(t[1]);c0.lastIndex=0}return e}function mu(n,e,t){const i=n.toString(),r=i.replace(c0,(o,s)=>{let a=e[s];return null==a&&(t.push(function Eoe(n){return new w(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function xp(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const cse=/-+([a-z0-9])/g;function u0(n){return n.replace(cse,(...e)=>e[1].toUpperCase())}function use(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function En(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Doe(n){return new w(3004,!1)}()}}function CV(n,e){return window.getComputedStyle(n)[e]}function gse(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function _se(n,e,t){if(":"==n[0]){const l=function yse(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Voe(n){return new w(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Loe(n){return new w(3015,!1)}()),e;const r=i[1],o=i[2],s=i[3];e.push(wV(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&e.push(wV(s,r))}(i,t,e)):t.push(n),t}const Op=new Set(["true","1"]),Pp=new Set(["false","0"]);function wV(n,e){const t=Op.has(n)||Pp.has(n),i=Op.has(e)||Pp.has(e);return(r,o)=>{let s="*"==n||n==r,a="*"==e||e==o;return!s&&t&&"boolean"==typeof r&&(s=r?Op.has(n):Pp.has(n)),!a&&i&&"boolean"==typeof o&&(a=o?Op.has(e):Pp.has(e)),s&&a}}const vse=new RegExp("s*:selfs*,?","g");function d0(n,e,t,i){return new bse(n).build(e,t,i)}class bse{constructor(e){this._driver=e}build(e,t,i){const r=new Ese(t);return this._resetContextStyleTimingState(r),En(this,pu(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function Soe(){return new w(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(function Toe(){return new w(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{bV(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&(xp(o.values()),t.errors.push(function Aoe(n,e){return new w(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=En(this,pu(e.animation),t);return{type:1,matchers:gse(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Jo(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>En(this,i,t)),options:Jo(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const o=e.steps.map(s=>{t.currentTime=i;const a=En(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:o,options:Jo(e.options)}}visitAnimate(e,t){const i=function Ise(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return h0(Ap(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=h0(0,0,"");return o.dynamic=!0,o.strValue=t,o}const r=Ap(t,e);return h0(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:Pa({});if(5==o.type)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const c={};i.easing&&(c.easing=i.easing),s=Pa(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===dr?i.push(a):t.errors.push(new w(3002,!1)):i.push(gV(a));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(t.errors.push(function Moe(n,e,t,i,r){return new w(3010,!1)}()),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:r}),t.options&&function lse(n,e,t){const i=e.params||{},r=bV(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(function woe(n){return new w(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Roe(){return new w(3011,!1)}()),i;let o=0;const s=[];let a=!1,l=!1,c=0;const u=e.steps.map(_=>{const E=this._makeStyleAst(_,t);let y=null!=E.offset?E.offset:function Dse(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(E.styles),I=0;return null!=y&&(o++,I=E.offset=y),l=l||I<0||I>1,a=a||I<c,c=I,s.push(I),E});l&&t.errors.push(function koe(){return new w(3012,!1)}()),a&&t.errors.push(function Ooe(){return new w(3200,!1)}());const d=e.steps.length;let h=0;o>0&&o<d?t.errors.push(function Poe(){return new w(3202,!1)}()):0==o&&(h=1/(d-1));const f=d-1,p=t.currentTime,m=t.currentAnimateTimings,g=m.duration;return u.forEach((_,E)=>{const y=h>0?E==f?1:h*E:s[E],I=y*g;t.currentTime=p+m.delay+I,m.duration=I,this._validateStyleAst(_,t),_.offset=y,i.styles.push(_)}),i}visitReference(e,t){return{type:8,animation:En(this,pu(e.animation),t),options:Jo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Jo(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Jo(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function Cse(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(vse,"")),n=n.replace(/@\*/g,Tp).replace(/@\w+/g,t=>Tp+"-"+t.slice(1)).replace(/:animating/g,a0),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,wn(t.collectedStyles,t.currentQuerySelector,new Map);const a=En(this,pu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Jo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Noe(){return new w(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:Ap(e.timings,t.errors,!0);return{type:12,animation:En(this,pu(e.animation),t),timings:i,options:null}}}class Ese{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Jo(n){return n?(n=fu(n)).params&&(n.params=function wse(n){return n?fu(n):null}(n.params)):n={},n}function h0(n,e,t){return{duration:n,delay:e,easing:t}}function f0(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class Np{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Ase=new RegExp(":enter","g"),Mse=new RegExp(":leave","g");function p0(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return(new Rse).buildKeyframes(n,e,t,i,r,o,s,a,l,c)}class Rse{buildKeyframes(e,t,i,r,o,s,a,l,c,u=[]){c=c||new Np;const d=new m0(e,t,c,r,o,u,[]);d.options=l;const h=l.delay?gr(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([s],null,d.errors,l),En(this,i,d);const f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let m=f.length-1;m>=0;m--){const g=f[m];if(g.element===t){p=g;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[f0(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const o=r?.delay;if(o){const s="number"==typeof o?o:gr(mu(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime;const s=null!=i.duration?gr(i.duration):null,a=null!=i.delay?gr(i.delay):null;return 0!==s&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),En(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Fp);const s=gr(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>En(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?gr(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),En(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return Ap(t.params?mu(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?gr(r.delay):0;o&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Fp);let s=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);o&&d.delayNextStep(o),c===t.element&&(l=d.currentTimeline),En(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;En(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const Fp={};class m0{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Fp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Lp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=gr(i.duration)),null!=i.delay&&(r.delay=gr(i.delay));const o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=mu(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,o=new m0(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Fp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new kse(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Ase,"."+this._enterClassName)).replace(Mse,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&0==a.length&&s.push(function Foe(n){return new w(3014,!1)}()),a}}class Lp{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Lp(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||dr),this._currentKeyframe.set(t,dr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const o=r&&r.params||{},s=function Ose(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let o of i)t.set(o,dr)}else Zr(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of s){const c=mu(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??dr),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Zr(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===dr&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const o=e.size?xp(e.values()):[],s=t.size?xp(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return f0(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class kse extends Lp{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=i+t,a=t/s,l=Zr(e[0]);l.set("offset",0),o.push(l);const c=Zr(e[0]);c.set("offset",IV(a)),o.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let h=Zr(e[d]);const f=h.get("offset");h.set("offset",IV((t+f*i)/s)),o.push(h)}i=s,t=0,r="",e=o}return f0(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function IV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class g0{}const Pse=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Nse extends g0{normalizePropertyName(e,t){return u0(e)}normalizeStyleValue(e,t,i,r){let o="";const s=i.toString().trim();if(Pse.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)o="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Ioe(n,e){return new w(3005,!1)}())}return s+o}}function SV(n,e,t,i,r,o,s,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}const _0={};class TV{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function Fse(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,u){const d=[],h=this.ast.options&&this.ast.options.params||_0,p=this.buildStyles(i,a&&a.params||_0,d),m=l&&l.params||_0,g=this.buildStyles(r,m,d),_=new Set,E=new Map,y=new Map,I="void"===r,q={params:Lse(m,h),delay:this.ast.options?.delay},Y=u?[]:p0(e,t,this.ast.animation,o,s,p,g,q,c,d);let Ge=0;if(Y.forEach(Mt=>{Ge=Math.max(Mt.duration+Mt.delay,Ge)}),d.length)return SV(t,this._triggerName,i,r,I,p,g,[],[],E,y,Ge,d);Y.forEach(Mt=>{const li=Mt.element,HV=wn(E,li,new Set);Mt.preStyleProps.forEach(es=>HV.add(es));const _u=wn(y,li,new Set);Mt.postStyleProps.forEach(es=>_u.add(es)),li!==t&&_.add(li)});const xt=xp(_.values());return SV(t,this._triggerName,i,r,I,p,g,Y,xt,E,y,Ge)}}function Lse(n,e){const t=fu(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Vse{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=fu(this.defaultParams);return Object.keys(e).forEach(o=>{const s=e[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=mu(s,r,t));const l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(l,s)})}),i}}class Use{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Vse(r.style,r.options&&r.options.params||{},i))}),AV(this.states,"true","1"),AV(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new TV(e,r,this.states))}),this.fallbackTransition=function jse(n,e,t){return new TV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function AV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Hse=new Np;class $se{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],o=d0(this._driver,t,i,[]);if(i.length)throw function $oe(n){return new w(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,i){const r=e.element,o=sV(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=p0(this._driver,t,o,s0,Ip,new Map,new Map,i,Hse,r),s.forEach(u=>{const d=wn(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(function zoe(){return new w(3300,!1)}()),s=[]),r.length)throw function Goe(n){return new w(3504,!1)}();a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,dr))})});const c=Xr(s.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Woe(n){return new w(3301,!1)}();return t}listen(e,t,i,r){const o=t0(t,"","","");return JE(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const xV="ng-animate-queued",y0="ng-animate-disabled",Kse=[],MV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yse={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Un="__ng_removed";class v0{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Jse(n){return n??null}(i?e.value:e),i){const o=fu(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const gu="void",b0=new v0(gu);class Qse{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,jn(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function qoe(n,e){return new w(3302,!1)}();if(null==i||0==i.length)throw function Koe(n){return new w(3303,!1)}();if(!function eae(n){return"start"==n||"done"==n}(i))throw function Yoe(n,e){return new w(3400,!1)}();const o=wn(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);const a=wn(this._engine.statesByElement,e,new Map);return a.has(t)||(jn(e,Sp),jn(e,Sp+"-"+t),a.set(t,b0)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Qoe(n){return new w(3401,!1)}();return t}trigger(e,t,i,r=!0){const o=this._getTrigger(t),s=new C0(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(jn(e,Sp),jn(e,Sp+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new v0(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=b0),c.value!==gu&&l.value===c.value){if(!function iae(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(l.params,c.params)){const m=[],g=o.matchStyles(l.value,l.params,m),_=o.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Zo(e,g),Pi(e,_)})}return}const h=wn(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==t&&m.queued&&m.destroy()});let f=o.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=o.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:s,isFallbackTransition:p}),p||(jn(e,xV),s.onStart(()=>{Va(e,xV)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);const g=this._engine.playersByElement.get(e);if(g){let _=g.indexOf(s);_>=0&&g.splice(_,1)}}),this.players.push(s),h.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,Tp,!0);i.forEach(r=>{if(r[Un])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,gu,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&Xr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,c=i.get(s)||b0,u=new v0(gu),d=new C0(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Un];(!o||o===MV)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){jn(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){const l=t0(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,JE(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const o=i.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class Xse{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Qse(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}return t}trigger(e,t,i,r){if(Vp(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Vp(t))return;const o=t[Un];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),jn(e,y0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Va(e,y0))}removeNode(e,t,i,r){if(Vp(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[Un]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return Vp(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Tp,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,a0,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Xr(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Un];if(t&&t.setForRemoval){if(e[Un]=MV,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(y0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)jn(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Xr(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function Xoe(n){return new w(3402,!1)}()}_flushAnimations(e,t){const i=new Np,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(O=>{u.add(O);const L=this.driver.query(O,".ng-animate-queued",!0);for(let $=0;$<L.length;$++)u.add(L[$])});const d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=OV(h,this.collectedEnterElements),p=new Map;let m=0;f.forEach((O,L)=>{const $=s0+m++;p.set(L,$),O.forEach(pe=>jn(pe,$))});const g=[],_=new Set,E=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const L=this.collectedLeaveElements[O],$=L[Un];$&&$.setForRemoval&&(g.push(L),_.add(L),$.hasAnimation?this.driver.query(L,".ng-star-inserted",!0).forEach(pe=>_.add(pe)):E.add(L))}const y=new Map,I=OV(h,Array.from(_));I.forEach((O,L)=>{const $=Ip+m++;y.set(L,$),O.forEach(pe=>jn(pe,$))}),e.push(()=>{f.forEach((O,L)=>{const $=p.get(L);O.forEach(pe=>Va(pe,$))}),I.forEach((O,L)=>{const $=y.get(L);O.forEach(pe=>Va(pe,$))}),g.forEach(O=>{this.processLeaveNode(O)})});const q=[],Y=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(t).forEach($=>{const pe=$.player,Et=$.element;if(q.push(pe),this.collectedEnterElements.length){const Ut=Et[Un];if(Ut&&Ut.setForMove){if(Ut.previousTriggersValues&&Ut.previousTriggersValues.has($.triggerName)){const ts=Ut.previousTriggersValues.get($.triggerName),Hn=this.statesByElement.get($.element);if(Hn&&Hn.has($.triggerName)){const Hp=Hn.get($.triggerName);Hp.value=ts,Hn.set($.triggerName,Hp)}}return void pe.destroy()}}const Ni=!d||!this.driver.containsElement(d,Et),Dn=y.get(Et),Jr=p.get(Et),We=this._buildInstruction($,i,Jr,Dn,Ni);if(We.errors&&We.errors.length)return void Y.push(We);if(Ni)return pe.onStart(()=>Zo(Et,We.fromStyles)),pe.onDestroy(()=>Pi(Et,We.toStyles)),void r.push(pe);if($.isFallbackTransition)return pe.onStart(()=>Zo(Et,We.fromStyles)),pe.onDestroy(()=>Pi(Et,We.toStyles)),void r.push(pe);const GV=[];We.timelines.forEach(Ut=>{Ut.stretchStartingKeyframe=!0,this.disabledNodes.has(Ut.element)||GV.push(Ut)}),We.timelines=GV,i.append(Et,We.timelines),s.push({instruction:We,player:pe,element:Et}),We.queriedElements.forEach(Ut=>wn(a,Ut,[]).push(pe)),We.preStyleProps.forEach((Ut,ts)=>{if(Ut.size){let Hn=l.get(ts);Hn||l.set(ts,Hn=new Set),Ut.forEach((Hp,D0)=>Hn.add(D0))}}),We.postStyleProps.forEach((Ut,ts)=>{let Hn=c.get(ts);Hn||c.set(ts,Hn=new Set),Ut.forEach((Hp,D0)=>Hn.add(D0))})});if(Y.length){const O=[];Y.forEach(L=>{O.push(function Zoe(n,e){return new w(3505,!1)}())}),q.forEach(L=>L.destroy()),this.reportError(O)}const Ge=new Map,xt=new Map;s.forEach(O=>{const L=O.element;i.has(L)&&(xt.set(L,L),this._beforeAnimationBuild(O.player.namespaceId,O.instruction,Ge))}),r.forEach(O=>{const L=O.element;this._getPreviousPlayers(L,!1,O.namespaceId,O.triggerName,null).forEach(pe=>{wn(Ge,L,[]).push(pe),pe.destroy()})});const Mt=g.filter(O=>NV(O,l,c)),li=new Map;kV(li,this.driver,E,c,dr).forEach(O=>{NV(O,l,c)&&Mt.push(O)});const _u=new Map;f.forEach((O,L)=>{kV(_u,this.driver,new Set(O),l,"!")}),Mt.forEach(O=>{const L=li.get(O),$=_u.get(O);li.set(O,new Map([...Array.from(L?.entries()??[]),...Array.from($?.entries()??[])]))});const es=[],$V=[],zV={};s.forEach(O=>{const{element:L,player:$,instruction:pe}=O;if(i.has(L)){if(u.has(L))return $.onDestroy(()=>Pi(L,pe.toStyles)),$.disabled=!0,$.overrideTotalTime(pe.totalTime),void r.push($);let Et=zV;if(xt.size>1){let Dn=L;const Jr=[];for(;Dn=Dn.parentNode;){const We=xt.get(Dn);if(We){Et=We;break}Jr.push(Dn)}Jr.forEach(We=>xt.set(We,Et))}const Ni=this._buildAnimation($.namespaceId,pe,Ge,o,_u,li);if($.setRealPlayer(Ni),Et===zV)es.push($);else{const Dn=this.playersByElement.get(Et);Dn&&Dn.length&&($.parentPlayer=Xr(Dn)),r.push($)}}else Zo(L,pe.fromStyles),$.onDestroy(()=>Pi(L,pe.toStyles)),$V.push($),u.has(L)&&r.push($)}),$V.forEach(O=>{const L=o.get(O.element);if(L&&L.length){const $=Xr(L);O.setRealPlayer($)}}),r.forEach(O=>{O.parentPlayer?O.syncPlayerEvents(O.parentPlayer):O.destroy()});for(let O=0;O<g.length;O++){const L=g[O],$=L[Un];if(Va(L,Ip),$&&$.hasAnimation)continue;let pe=[];if(a.size){let Ni=a.get(L);Ni&&Ni.length&&pe.push(...Ni);let Dn=this.driver.query(L,a0,!0);for(let Jr=0;Jr<Dn.length;Jr++){let We=a.get(Dn[Jr]);We&&We.length&&pe.push(...We)}}const Et=pe.filter(Ni=>!Ni.destroyed);Et.length?tae(this,L,Et):this.processLeaveNode(L)}return g.length=0,es.forEach(O=>{this.players.push(O),O.onDone(()=>{O.destroy();const L=this.players.indexOf(O);this.players.splice(L,1)}),O.play()}),es}elementContainsData(e,t){let i=!1;const r=t[Un];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const l=!o||o==gu;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==o,d=wn(i,c,[]);this._getPreviousPlayers(c,u,s,a,t.toState).forEach(f=>{const p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}Zo(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{const m=p.element;u.add(m);const g=m[Un];if(g&&g.removedBeforeQueried)return new uu(p.duration,p.delay);const _=m!==l,E=function nae(n){const e=[];return PV(n,e),e}((i.get(m)||Kse).map(Ge=>Ge.getRealPlayer())).filter(Ge=>!!Ge.element&&Ge.element===m),y=o.get(m),I=s.get(m),q=sV(0,this._normalizer,0,p.keyframes,y,I),Y=this._buildPlayer(p,q,E);if(p.subTimeline&&r&&d.add(m),_){const Ge=new C0(e,a,m);Ge.setRealPlayer(Y),c.push(Ge)}return Y});c.forEach(p=>{wn(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>function Zse(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>jn(p,mV));const f=Xr(h);return f.onDestroy(()=>{u.forEach(p=>Va(p,mV)),Pi(l,t.toStyles)}),d.forEach(p=>{wn(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new uu(e.duration,e.delay)}}class C0{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new uu,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>JE(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){wn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Vp(n){return n&&1===n.nodeType}function RV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function kV(n,e,t,i,r){const o=[];t.forEach(l=>o.push(RV(l)));const s=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const h=e.computeStyle(c,d,r);u.set(d,h),(!h||0==h.length)&&(c[Un]=Yse,s.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>RV(l,o[a++])),s}function OV(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:s(c),o.set(a,l),l}return e.forEach(a=>{const l=s(a);1!==l&&t.get(l).push(a)}),t}function jn(n,e){n.classList?.add(e)}function Va(n,e){n.classList?.remove(e)}function tae(n,e,t){Xr(t).onDone(()=>n.processLeaveNode(e))}function PV(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof EL?PV(i.players,e):e.push(i)}}function NV(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}class Bp{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new Xse(e,t,i),this._timelineEngine=new $se(e,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){const s=e+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],u=d0(this._driver,o,l,[]);if(l.length)throw function joe(n,e){return new w(3404,!1)}();a=function Bse(n,e,t){return new Use(n,e,t)}(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[o,s]=aV(i);this._timelineEngine.command(o,t,s,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if("@"==i.charAt(0)){const[s,a]=aV(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let oae=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Pi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Pi(this._element,this._initialStyles),this._endStyles&&(Pi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Zo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zo(this._element,this._endStyles),this._endStyles=null),Pi(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function w0(n){let e=null;return n.forEach((t,i)=>{(function sae(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class FV{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:CV(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class aae{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return dV(e,t)}getParentElement(e){return r0(e)}query(e,t,i){return hV(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,o,s=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const c=new Map,u=s.filter(f=>f instanceof FV);(function dse(n,e){return 0===n||0===e})(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,m)=>c.set(m,p))});let d=function ase(n){return n.length?n[0]instanceof Map?n:n.map(e=>gV(e)):[]}(t).map(f=>Zr(f));d=function hse(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,CV(n,a)))}}return e}(e,d,c);const h=function rae(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=w0(e[0]),e.length>1&&(i=w0(e[e.length-1]))):e instanceof Map&&(t=w0(e)),t||i?new oae(n,t,i):null}(e,d);return new FV(e,d,l,h)}}let lae=(()=>{class n extends pL{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:zn.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?_L(t):t;return LV(this._renderer,null,i,"register",[r]),new cae(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(C(dl),C(ce))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();class cae extends Iie{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new uae(this._id,e,t||{},this._renderer)}}class uae{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return LV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function LV(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const VV="@.disabled";let dae=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(t,i){const o=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(o);return u||(u=new BV("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,u)),u}const s=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(s,a,t,u.name,u)};return i.data.animation.forEach(l),new hae(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(C(dl),C(Bp),C(ue))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})();class BV{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?o=>t.destroyNode(o):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==VV?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class hae extends BV{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==VV?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function fae(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function pae(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}const UV=[{provide:pL,useClass:lae},{provide:g0,useFactory:function gae(){return new Nse}},{provide:Bp,useClass:(()=>{class n extends Bp{constructor(t,i,r,o){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(C(ce),C(o0),C(g0),C(zs))},n.\u0275prov=x({token:n,factory:n.\u0275fac}),n})()},{provide:dl,useFactory:function _ae(n,e,t){return new dae(n,e,t)},deps:[th,Bp,ue]}],E0=[{provide:o0,useFactory:()=>new aae},{provide:Al,useValue:"BrowserAnimations"},...UV],jV=[{provide:o0,useClass:fV},{provide:Al,useValue:"NoopAnimations"},...UV];let yae=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?jV:E0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({providers:E0,imports:[EM]}),n})(),Cae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Pe({type:n}),n.\u0275inj=Ae({imports:[Oa,Die,Oa]}),n})();class jp{static#e=this.\u0275fac=function(t){return new(t||jp)};static#t=this.\u0275mod=Pe({type:jp,bootstrap:[Dp]});static#n=this.\u0275inj=Ae({providers:[Vr,hr,Yr],imports:[EM,vp,Fq,MR,s5,yae,jie,Cae]})}w8().bootstrapModule(jp).catch(n=>console.error(n))}},he=>{he(he.s=709)}]);